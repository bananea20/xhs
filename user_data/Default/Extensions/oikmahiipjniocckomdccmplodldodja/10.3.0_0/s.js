(()=>{"use strict";var e,t,n,s,i,l={40048:(e,t,n)=>{n.d(t,{$o:()=>o,FC:()=>d});n(71372),n(43108),n(36728);var s=n(88120),i=n(99853),l=n(41215),r=n(50251),a=n.n(r),c=n(74875);const o=!0,d={id:i.gu.BaiDu,name:"百度文字识别",points:!0,secretKeys:{get:()=>a().storage.local.get({baiDuOCRKey:[]}).then((({baiDuOCRKey:e})=>(Array.isArray(e)?e:[e]).map((e=>({id:e.key,key:e.secret}))))),set:e=>a().storage.local.set({baiDuOCRKey:e.map((e=>({key:e.id,secret:e.key})))}),isComplete:e=>(0,c.dz)(e,["id"])},pointsEnable:{get:()=>a().storage.local.get({bdOcrPoints:o}).then((({bdOcrPoints:e})=>e)),set:e=>a().storage.local.set({bdOcrPoints:e})}};class h extends s.E{constructor(){super(d,!0)}callBySecretKey(e,t){return new l.w(e).ocr(t.image)}transform(e){if(!e.paragraphs_result)throw new Error("百度文字识别服务配置有误，请确认你领取过免费资源包，且密钥填写无误。");return e.paragraphs_result.reduce(((t,{words_result_idx:n})=>(t.push(n.reduce(((t,n)=>t+e.words_result[n].words),"")),t)),[]).join("\n")}}new h},87393:(e,t,n)=>{n.d(t,{L:()=>i});n(73439),n(93784);const s={"中文(简体)":"zh",英语:"en",俄语:"ru",西班牙语:"es",法语:"fr",阿拉伯语:"ar",土耳其语:"tr",葡萄牙语:"pt",泰语:"th",印尼语:"id",意大利语:"it",越南语:"vi"};function i(e,t="",n=""){const i=s[n]||"auto",l=s[t]||"zh";return`https://translate.alibaba.com/#hcfy_text=${encodeURIComponent(e)}&hcfy_from=${i}&hcfy_to=${l}`}},55876:(e,t,n)=>{n.d(t,{r:()=>i});n(73439),n(93784);const s={"":"自动识别","中文(简体)":"中文"};function i(e,t="中文",n=""){return`https://fanyi.qq.com/#hcfy_text=${encodeURIComponent(e)}&hcfy_from=${s[n]||n}&hcfy_to=${s[t]||t}`}},17192:(e,t,n)=>{n.d(t,{Q:()=>i});const s=JSON.parse('{"中文(简体)":"zh-CHS","英语":"en","日语":"ja","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","芬兰语":"fi","丹麦语":"da","越南语":"vi","印地语":"hi","印尼语":"id","马来语":"ms"}');n(93784);function i(e,t="",n=""){const i=s[n],l=s[t];return i&&l?`https://fanyi.youdao.com/#hcfy_text=${encodeURIComponent(e)}&hcfy_from=${i}&hcfy_to=${l}`:`http://fanyi.youdao.com/#hcfy_text=${encodeURIComponent(e)}`}},60279:(e,t,n)=>{n.d(t,{VH:()=>m,d6:()=>f,gz:()=>p,jd:()=>j,qI:()=>g});n(634);var s=n(80471),i=n(51813),l=n(32728),r=n(47288),a=n(98269),c=n(88311),o=n(59250),d=n(40048),h=n(62259),u=n(13429),x=n(52768);let p=function(e){return e.electronics="electronics",e.finance="finance",e.mechanics="mechanics",e.medicine="medicine",e.novel="novel",e}({}),j=function(e){return e.title="title",e.description="description",e.communication="communication",e.medical="medical",e.social="social",e.finance="finance",e}({}),m=function(e){return e.ctrlEnter="ctrl-enter",e.enter="enter",e}({});const g={button:!0,buttonAutoClose:!0,buttonOffsetTop:0,buttonOffsetLeft:0,charsLimit:0,disableInTextarea:!1,domainBlackList:[],domainWhiteList:[],textList:[{name:"忽略中文",readonly:!0,enabled:!1,value:"[\\u4e00-\\u9fa5]",description:"如果划选的文本当中包含中文，则不显示翻译按钮或翻译结果。"},{name:"忽略字符",readonly:!0,enabled:!0,value:"^[\\s.\\-0-9()•+]+$",description:"如果划选的文本全部都是由数字、点、括号、空格、横线、加号和圆点（即 •，多用于密码框）组成的，则不显示翻译按钮或翻译结果。"}],placement:"bottom",pin:!1,pinAfterDrag:!1,pinPos:null,pinEnhance:!0,pinIgnoreDomainList:!0,darkMode:"system",pdfAuto:!1,pdfSnifferEnable:!0,pdfStandalone:!1,width:290,source:"",destination:"中文(简体)",secondDestination:"英语",secondDestinationLatestSource:!1,showTextArea:!1,textAreaAuto:!1,textAreaShortKey:m.enter,selectedAPIs:["GoogleWeb","DeepLWeb","Yandex","BingDictWeb"],collapsedAPIs:[],selectedExternalLinks:[],autoClipboard:null,autoClipboardImage:null,autoPlay:!1,autoCopy:!1,autoPaste:!0,recentUseLangFrom:[""],recentUseLangTo:["中文(简体)"],tipPanelSettingsClosed:!1,tipBlockedPDFClosed:!1,tipIncognitoPDFClosed:!1,tipOcrChangeClosed:!0,tipForeverVIPClosed:!0,tipQuickLinksClosed:!1,tipNewProfessionalClosed:!1,tipTextareaBtnClosed:!0,tipForSTTClosed:!1,tipForPinAfterDragClosed:!0,tipForPageTrsNoLoadingClosed:!0,tipForSlowDeepLPageTrsClosed:!1,tipForPageTrsClosed:!1,panelPos:{width:270,height:500,left:100,top:100},panelFocus:!0,panelSize:"small",panelButtons:["media","microphone"],panelCustomStyle:"",notifySyncOptions:!0,sourceTransformNoBr:!1,sourceTransformNCaml:!1,sourceTransformNoComment:!1,sourceTransformRegExps:[],historyEnabled:!1,favoritesEnabled:!0,modifierKeys:[],modifierKeyPressedAction:"",modifierKeyTranslate:!1,modifierKeyLink:!1,audioVolume:100,audioRate:1,systemTTS:"aid",systemTTSAccent:{},systemTTSVoice:{},localOCR:{lang:"eng"},pageTrsApi:"GoogleWeb",pageTrsHighlight:!0,pageTrsResultStyleId:"STYLE_LINE",pageTrsResultStyleMainColor:null,pageTrsResultStyleTextColor:null,pageTrsResultStyleTextSize:null,pageTrsResultStyleTextWeight:null,pageTrsResultStyleCustom:"",pageTrsApiOptions:i.L.map((e=>e.id)),pageTrsJumpTwo:!1,pageTrsEditable:!0,googleRegion:"com",googleType:"fast",googleMirror:"",googleHidePhonetic:!1,quickLinks:[{name:"谷歌搜索",link:"https://www.google.com/search?q=%s",menu:!0,panel:!0},{name:"维基百科",link:"https://zh.wikipedia.org/w/index.php?search=%s",menu:!0,panel:!0},{name:"剑桥词典",link:"https://dictionary.cambridge.org/dictionary/english-chinese-simplified/%s",menu:!0,panel:!0}],noticesRead:[],customAPI:"",customAPINames:[],pointsEnabled:[],baiduDomain:null,aliDomain:null,ocrService:"tesseractocr",contextMenus:l.n,popupAction:"show-popup",pageTrsSource:"",pageTrsDest:["中文(简体)"],pageTrsPanelPos:"bottom-right",chatGPTPrompt:"",chatGPTEndpoint:"",chatGPTModel:"gpt-3.5-turbo"},f={chatGPTConversationInfo:null,hoverTranslate:!1,latestSource:"",pageTrsAuto:!1,pageTrsType:s.U.both,tipForShortKeyForPageTrsTypeClosed:!1,tipForFullTextClosed:!1,tipForDeepLLimitClosed:!1,user:null,optionsSyncAt:null,disabledNofiByBrowserUI:!1,favoritesSyncAt:null,historiesSyncAt:null,deeplKey:[],deeplPoints:x.VY,baiDuAppKey:[],bdPoints:o.Fi,bdProPoints:o.ZX,baiDuOCRKey:[],bdOcrPoints:d.$o,youDaoAppKey:[],ydPoints:r.eT,aLiApiKey:[],aliPoints:a.Kl,aliProPoints:a.YU,qqApiKey:[],qqPoints:h.xu,hsApiKey:[],hsPoints:u.p7,soGouApiKey:[],cyApiToken:[],cyPoints:c.HK,chatGPTKey:[],ocrLimit:{date:0,times:0},pdfLimit:{date:0,times:0},pageTranslateLimit:{date:0,times:0},sttLimit:{date:0,times:0},videoLimit:{date:0,times:0},panelTranslateLimit:{date:0,times:0},pdfZoom:"",noticesUnreadNum:0,noticesFiltered:[],tipForFirstExportClosed:!1,tipForPasteTranslateClosed:!1,tipForDropTranslateClosed:!1,tipForAddJumpTwoClosed:!0,tipForServicesUpdateClosed:!0,tipForGoogleTranslateClosed:!1,tipForSaveSourceSelectClosed:!0}},26602:(e,t,n)=>{n(71372),n(64829);var s=n(17029),i=n(24991),l=n(68588);const r={"zh-CN":{settings:JSON.parse('{"buy":{"step1name":"第一步：注册账号","step2name":"第二步：购买","done_name":"完成","finish_btn":"完成","payName":{"wechat":"微信","alipay":"支付宝","paypal":"PayPal"},"choosePayMethod":"请选择支付方式：","howPaypal":"如何使用 PayPal 付款","loadingPrice":"正在加载价格信息，请稍候……","loadingPriceFail":"价格信息加载失败，请稍后重试。","payByMethod":"请使用<Bold>{{ payMethodLabel }}</Bold>扫描下方二维码支付：","chooseBuyType":"请选择：","loadingQR":"正在加载二维码，请稍候……","loadingQRFail":"加载二维码时出错，请稍后重试。错误信息：","aliPayExtraErrorMsg":"支付宝偶尔不能正常加载二维码，请换用其它支付方式。","qrImgAlt":"支付二维码","payTip":"当你完成支付后，此页面一般会在 5 秒内自动跳转，在跳转之前请不要关闭窗口。如果 30 秒后还没有跳转，你可以重启浏览器试试。","openVIP":"开通会员","foreverVIPMsg":"您的会员永不过期。您可以前往【个人中心】确认会员到期时间。","VIPOpenedUntilMsg":"您的会员到期时间为 {{ time }}。您可以前往【个人中心】确认会员到期时间。","buyPoints":"购买翻译积分","pointsRestMsg":"您的翻译积分数量为 {{ points }}。您可以前往【个人中心】确认翻译积分余额。","noBuyTypeError":"不支持的购买类型：{{ type }}","loginText":"已有账号？去登录","nextStep":"下一步"},"permission":{"notAllowURLTitle":"未允许划词翻译访问文件网址","goToAllowURLDescription":"你需要先前往<GoToDetailLink>划词翻译的详细信息页面</GoToDetailLink>勾选【允许访问文件网址】，划词翻译才能检测到或者自动打开你拖放进浏览器的 PDF 文件。另外，当你勾选之后，你就可以将你电脑里的文件（例如 <InlineCode>.txt</InlineCode>、<InlineCode>.md</InlineCode>、<InlineCode>.html</InlineCode> 或 <InlineCode>.png</InlineCode>）拖放进浏览器并使用划词翻译了。","goToAllowURLBtn":"去勾选","noAllowURL":"由于你的浏览器不提供本地文件的访问权限，所以划词翻译无法自动打开你拖放进浏览器的 PDF 文件，也无法在以 <InlineCode>file:///</InlineCode> 开头的网址（例如你拖放进浏览器的 <InlineCode>.txt</InlineCode> 或 <InlineCode>.png</InlineCode> 文件）里使用。","incognitoTipTitle":"无痕模式下的限制","incognitoTip":"由于浏览器自身的安全限制，内置 PDF 阅读器无法在无痕窗口中使用，所以当你在无痕窗口中打开内置 PDF 阅读器时，划词翻译会自动改为在普通窗口中打开。"}}')}};i.ZP.use(l.Db).init({resources:r,lng:"zh-CN",defaultNS:"settings",interpolation:{escapeValue:!1}});const a=i.ZP;var c=n(2784),o=n(73557),d=n(42595),h=n(91942),u=n(56378),x=n(23351),p=n(15454),j=n(49629),m=n(10106),g=n(50251),f=n.n(g),y=n(39215),v=n(63454),b=n(58222),k=n(41752),T=n(88559),C=(n(77950),n(15735),n(6886),n(75578)),S=(n(73439),n(15929)),w=n(34809),L=n(81834),_=n(61750),E=n(26777),P=n(52322);function R(e){const[t,n]=(0,c.useState)(!1),s=e.inputRef,[i,l]=(0,c.useState)(null);(0,c.useEffect)((()=>{s&&("function"==typeof s?s(i):s.current=i)}),[i,s]);const r={...e,inputRef:l};return(0,P.jsx)(w.B,{...r,type:t?"text":"password",rightElement:(0,P.jsx)(k.z,{icon:t?"eye-open":"eye-off",minimal:!0,onClick:()=>{n((e=>!e)),null==i||i.focus()}})})}var A=n(92245);const I=(0,A.RN)(),F={email:"",pwd:"",vk:""},Z=(0,c.forwardRef)((function(e,t){const{onLogin:n,openType:s,tip:i}=e,[l,r]=(0,c.useState)(!1),a=(0,c.useRef)(null),o=(0,c.useRef)(null),[d,u]=(0,c.useState)(null),x="login"===s,p=x?"登录":"注册";(0,c.useEffect)((()=>{d&&d.focus()}),[d]);const[j,m]=(0,c.useState)(F),[g,f]=(0,_.Z)((async()=>{try{await L.L.post("/sendEmail",(0,E.Z)(j,"email"))}catch(e){return}I.then((e=>{e.show({intent:"success",message:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("p",{children:"验证码已发送到你的邮箱，请查收。"}),(0,P.jsx)("div",{className:h.Tio,children:"如果长时间没有收到验证码，请确认邮箱是否填写有误，或者检查验证码邮件是否在垃圾邮箱里。"})]}),timeout:0})})),r(!0)}),[j]),[y,v]=(0,_.Z)((async()=>{try{const e=await L.L.post(x?"/login":"/register",j);n(e.data)}catch(e){}}),[s,j,n]);return(0,c.useImperativeHandle)(t,(()=>({clear(){m(F)},focus(e){var t;if("user"===e)null===(t=a.current)||void 0===t||t.focus();else if("pwd"===e){var n;null===(n=o.current)||void 0===n||n.focus()}}})),[]),(0,P.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x||l?v():f()},children:[(0,P.jsxs)("div",{className:h.TmF,children:[i,(0,P.jsx)(S.c,{label:"邮箱",labelFor:"email-input",labelInfo:"（区分大小写）",children:(0,P.jsx)(w.B,{id:"email-input",disabled:y.loading,inputRef:a,value:j.email,onChange:e=>{m((t=>({...t,email:e.target.value})))},required:!0,type:"email",pattern:"\\b[\\w.-]+@[\\w.-]+\\.\\w{2,4}\\b"})}),(0,P.jsx)(S.c,{label:"密码",labelFor:"pwd-input",children:(0,P.jsx)(R,{id:"pwd-input",disabled:y.loading,inputRef:o,value:j.pwd,onChange:e=>{m((t=>({...t,pwd:e.target.value})))},required:!0,minLength:6,maxLength:20})}),l&&(0,P.jsx)(S.c,{label:"验证码",labelFor:"vk-input",children:(0,P.jsx)(w.B,{id:"vk-input",inputRef:u,disabled:y.loading,value:j.vk,onChange:e=>{m((t=>({...t,vk:e.target.value})))},required:!0})})]}),(0,P.jsx)("div",{className:h.Alt,children:(0,P.jsxs)("div",{className:h.e$L,style:{alignItems:"center"},children:["login"===s&&(0,P.jsx)("a",{href:"https://hcfy.app/forget.html",target:"_blank",rel:"noreferrer",children:"忘记密码？"}),(0,P.jsx)(k.z,{text:p,loading:g.loading||y.loading,type:"submit",intent:"primary",style:{marginLeft:"15px"}})]})})]})}));var N=n(60279),D=n(18435);const O=(0,c.createContext)(),z=(0,c.createContext)(),K=(0,E.Z)(N.d6,"user");function U(e){const[t,n]=(0,D.Z)(K),s=(0,c.useCallback)((e=>{n({user:e})}),[n]);return(0,P.jsx)(z.Provider,{value:s,children:(0,P.jsx)(O.Provider,{value:t&&t.user,children:e.children})})}function V(e){const{open:t}=e,n=(0,c.useRef)(),{setShowVip:s,setShowLogin:i,syncOptions:l}=(0,c.useContext)(ge),r=(0,c.useContext)(z),a=(0,o.s0)(),d=()=>{var e;null===(e=n.current)||void 0===e||e.clear()},h="登录";return(0,P.jsx)(C.V,{isOpen:t,onClose:()=>{i(!1),d()},onClosed:d,onOpened:()=>{var e;null===(e=n.current)||void 0===e||e.focus("user")},title:h,children:(0,P.jsx)(Z,{ref:n,onLogin:e=>{i(!1),r(e),l(e)},openType:"login",tip:(0,P.jsxs)("p",{children:["划词翻译无需",h,"即可免费使用，只有当你要用",(0,P.jsx)("a",{onClick:()=>{i(!1),s(!0)},children:"会员功能"}),"或",(0,P.jsx)("a",{onClick:()=>{i(!1),a("/services?buy=1")},children:"翻译积分"}),"时才需要",h,"。"]})})})}var B=n(4812);const M=n(1327).Z.create({baseURL:"https://hcfy.app/"});var $=n(35368);function H(e){const{docURL:t}=e,n=(0,B.Z)((async()=>(await M.get(t)).data),[t]);return n.loading?(0,P.jsx)("p",{children:"正在加载，请稍候……"}):n.error?(0,P.jsx)("p",{children:"加载失败，请稍后重试。"}):(0,P.jsx)("div",{dangerouslySetInnerHTML:{__html:n.value?(0,$.sanitize)(n.value,{USE_PROFILES:{html:!0},ADD_ATTR:["target"]}):"加载失败，请稍后重试。"}})}function q(e){const{t}=(0,l.$G)(),{nextBtnText:n,summaryURL:s,onNext:i,onLogin:r}=e,a=(0,c.useContext)(O);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:h.TmF,children:(0,P.jsx)(H,{docURL:s})}),(0,P.jsx)("div",{className:h.Alt,children:(0,P.jsxs)("div",{className:h.e$L,style:{alignItems:"center"},children:[!a&&(0,P.jsx)("a",{onClick:r,children:t("buy.loginText")}),(0,P.jsx)(k.z,{intent:"primary",text:n||t("buy.nextStep"),onClick:i})]})})]})}var W=n(65119),G=n(65679);function Y(e){let t;return null!=e&&e.vipEndTime&&(0,W.Z)(t=new Date(e.vipEndTime))?{isOpened:!0,text:"续费会员",endTime:(0,G.Z)(t,"yyyy 年 M 月 d 日 HH:mm:ss")}:{isOpened:!1,text:"开通会员"}}var J=n(24400),X=n(30942),Q=n(7921),ee=n(99266);const te=[{label:a.t("buy.payName.wechat"),value:"wx"},{label:a.t("buy.payName.alipay"),value:"alipay"},{label:a.t("buy.payName.paypal"),value:"pp"}],ne="https://hcfy.app/docs/paypal";function se(e){var t;const{t:n}=(0,l.$G)(),{onPaid:s,priceURL:i,createOrderAPI:r}=e,[a,o]=(0,c.useState)("wx"),[d,u]=(0,c.useState)(""),x=null===(t=te.find((e=>e.value===a)))||void 0===t?void 0:t.label,p=(0,B.Z)((async()=>{const e=(await M.get(i)).data;return u(e[0].value),e}),[i]),j=(0,B.Z)((async()=>{if(!d)return;if("pp"===a)return void window.open(ne);return(await L.L.post(r,{id:d,method:a})).data}),[a,d,r]),m=j.value;return(0,c.useEffect)((()=>{if(!m)return;const e=window.setInterval((async()=>{if(!m)return;let e;try{e=await L.L.get("/checkOrder",{params:{orderId:m.orderId}})}catch(e){return}e.data.paid&&s(e.data.user)}),1e3);return()=>{window.clearInterval(e)}}),[s,m]),(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("div",{className:h.TmF,children:[(0,P.jsx)(ee.E,{label:n("buy.choosePayMethod"),inline:!0,options:te,selectedValue:a,onChange:e=>{o(e.currentTarget.value)}}),"pp"===a?(0,P.jsx)("div",{children:(0,P.jsx)("a",{href:ne,target:"_blank",rel:"noreferrer",children:n("buy.howPaypal")})}):(0,P.jsxs)(P.Fragment,{children:[p.loading?(0,P.jsx)("p",{children:n("buy.loadingPrice")}):p.error?(0,P.jsx)("p",{children:n("buy.loadingPriceFail")}):(0,P.jsx)(ee.E,{label:n("buy.chooseBuyType"),inline:!0,onChange:e=>{u(e.currentTarget.value)},selectedValue:d,options:p.value}),(0,P.jsx)("p",{children:(0,P.jsx)(l.cC,{i18nKey:"buy.payByMethod",components:{Bold:(0,P.jsx)("b",{style:{fontSize:20}})},values:{payMethodLabel:x}})}),j.loading?(0,P.jsx)("p",{children:n("buy.loadingQR")}):j.error?(0,P.jsxs)("p",{children:[n("buy.loadingQRFail"),(0,P.jsx)("span",{style:{color:"#FFB366"},children:j.error.message}),"alipay"===a&&n("buy.aliPayExtraErrorMsg")]}):m&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("p",{children:(0,P.jsx)("img",{src:m.qrUrl,width:280,height:280,alt:n("buy.qrImgAlt")})}),(0,P.jsx)("p",{className:h.kjJ,children:n("buy.payTip")})]})]})]})})}const ie=(0,P.jsx)(J.I,{icon:"tick-circle",intent:"success"});function le(e){const{t}=(0,l.$G)(),n=(0,c.useContext)(O),s=(0,c.useContext)(z),{onFinish:i,generateSuccessMsg:r,priceURL:a,createOrderAPI:o,onPaid:d}=e,u=(0,c.useRef)(),[x,p]=(0,c.useState)(n?1:0),[j,m]=(0,c.useState)([{text:t("buy.step1name")},{text:t("buy.step2name")},{text:t("buy.done_name")}]);return(0,c.useEffect)((()=>{var e;m((e=>{const t=(0,Q.Z)(e);return t.forEach(((e,t)=>{t<x?(e.current=!1,e.icon=ie):t===x?(e.current=!0,delete e.icon):(e.current=!1,delete e.icon)})),t})),0!==x||null===(e=u.current)||void 0===e||e.focus("user")}),[x]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(X.O,{className:"buy-steps",items:j,overflowListProps:{minVisibleItems:3}}),0===x&&(0,P.jsx)(Z,{ref:u,onLogin:e=>{s(e),p((e=>e+1))},openType:"register"}),1===x&&(0,P.jsx)(se,{priceURL:a,createOrderAPI:o,onPaid:e=>{s(e),d&&d(),p((e=>e+1))}}),2===x&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:h.TmF,children:["支付成功！",n&&r(n)]}),(0,P.jsx)("div",{className:h.Alt,children:(0,P.jsx)("div",{className:h.e$L,children:(0,P.jsx)(k.z,{text:t("buy.finish_btn"),intent:"primary",onClick:i})})})]})]})}let re=function(e){return e[e.VIP=0]="VIP",e[e.Points=1]="Points",e}({});const ae={[re.VIP]:{title:a.t("buy.openVIP"),docURL:"/vip-summary-bp5.html",summaryBtnText:a.t("buy.openVIP"),docPricesURL:"/prices.json",qrAPI:"/getPayQR",generateSuccessMsg:e=>e.forever?a.t("buy.foreverVIPMsg"):a.t("buy.VIPOpenedUntilMsg",{time:Y(e).endTime}),onPaid:()=>{f().runtime.sendMessage({action:"sync data"})}},[re.Points]:{title:a.t("buy.buyPoints"),docURL:void 0,summaryBtnText:void 0,docPricesURL:"/points.json",qrAPI:"/getPointsPayQR",onPaid:void 0,generateSuccessMsg:e=>a.t("buy.pointsRestMsg",{points:e.points})}};function ce(e){const{t}=(0,l.$G)(),{isOpen:n,buyType:s}=e,i=ae[s],r=i.docURL?0:1,[a,o]=(0,c.useState)(r),{setShowVip:d,setShowLogin:h,setShowBuyPoints:u}=(0,c.useContext)(ge);let x;switch(s){case re.VIP:x=d;break;case re.Points:x=u;break;default:throw new TypeError(t("buy.noBuyTypeError",{type:s}))}const p=()=>{x(!1)},j=()=>{p(),o(r)};return(0,P.jsxs)(C.V,{isOpen:n,canOutsideClickClose:!1,canEscapeKeyClose:!1,onClose:j,title:i.title,style:0===a?{width:660}:void 0,children:[i.docURL&&0===a&&(0,P.jsx)(q,{summaryURL:i.docURL,nextBtnText:i.summaryBtnText,onNext:()=>{o((e=>e+1))},onLogin:()=>{p(),h(!0)}}),1===a&&(0,P.jsx)(le,{priceURL:i.docPricesURL,createOrderAPI:i.qrAPI,onPaid:i.onPaid,generateSuccessMsg:i.generateSuccessMsg,onFinish:j})]})}n(6710);var oe=n(69378),de=n.n(oe);async function he(){const e=await f().storage.local.get(N.qI),t=await L.L.put("/options",{options:JSON.stringify(e)});await f().storage.local.set({optionsSyncAt:t.data})}async function ue(e){let t;e||(t=(await f().storage.local.get("optionsSyncAt")).optionsSyncAt);const n=await L.L.get("/options",{params:{ifModifiedSince:t}});if(204===n.status)return"no-data";if(304===n.status)return"not-modified";const s=n.data;if(!s)return"server-data-error";let i;try{i=JSON.parse(s.optionsString)}catch(e){return"server-data-error"}return de()(await f().storage.local.get(N.qI),i)?(await f().storage.local.set({optionsSyncAt:s.updatedAt}),"not-modified"):e||t?(i.optionsSyncAt=s.updatedAt,await f().storage.local.set(i),"covered"):{status:"need-confirm",date:s.updatedAt}}var xe=n(6856),pe=n(83524);const je=(0,A.RN)({maxToasts:2}),me=(0,c.forwardRef)((function(e,t){const[n,s]=(0,c.useState)(!1),[i,l]=(0,c.useState)("");(0,c.useImperativeHandle)(t,(()=>({async syncOptions(){let e;try{e=await async function(){const e=await ue();return"no-data"===e?(await he(),"uploaded"):e}()}catch(e){return}if("string"!=typeof e)l(e.date),s(!0);else{(await je).show({intent:"success",message:(0,P.jsxs)(P.Fragment,{children:["uploaded"===e&&"已将划词翻译设置上传到服务器。","not-modified"===e&&"划词翻译设置已经是最新的了，无需更新。","server-data-error"===e&&"服务器保存的划词翻译设置数据有误，请稍后重试。如果多次出现这种情况，请反馈给我。","covered"===e&&"已更新划词翻译设置。"]})})}}})),[]);const r=new Date(i),a=(0,W.Z)(r)?(0,G.Z)(r,"yyyy-MM-dd HH:mm:ss"):"";return(0,P.jsxs)(xe.b,{isOpen:n,cancelButtonText:"上传本地设置",confirmButtonText:"下载云端设置",onCancel:async()=>{s(!1);try{await he();(await je).show({intent:"success",message:"上传成功"})}catch(e){}},onConfirm:async()=>{let e;s(!1);try{e=await ue(!0)}catch(e){return}(await je).show({intent:"success",message:(0,P.jsxs)(P.Fragment,{children:["no-data"===e&&"服务器没有保存过划词翻译设置，请先将本地设置上传。","not-modified"===e&&"划词翻译设置已经是最新的了，无需更新。","server-data-error"===e&&"服务器保存的划词翻译设置数据有误，请稍后重试。如果多次出现这种情况，请反馈给我。","covered"===e&&"已更新划词翻译设置。"]})})},children:[(0,P.jsx)(pe.H4,{children:"同步设置"}),(0,P.jsxs)("p",{children:["您本地的设置与 ",a," ","上传至云端的设置不一致，您想要如何同步您的设置？"]})]})})),ge=(0,c.createContext)(),fe="?login"===window.location.search,ye="?vip"===window.location.search;function ve(e){const[t,n]=(0,c.useState)(fe),[s,i]=(0,c.useState)(!1),[l,r]=(0,c.useState)(ye),a=(0,c.useRef)(null),o=(0,c.useCallback)((e=>{var t;null!=e&&e.vipActivated?null===(t=a.current)||void 0===t||t.syncOptions():r(!0)}),[]);return(0,P.jsxs)(ge.Provider,{value:{setShowLogin:n,setShowBuyPoints:i,setShowVip:r,syncOptions:o},children:[(0,P.jsx)(V,{open:t}),(0,P.jsx)(ce,{isOpen:s,buyType:re.Points}),(0,P.jsx)(ce,{isOpen:l,buyType:re.VIP}),(0,P.jsx)(me,{ref:a}),e.children]})}n(39529),n(36728);var be=n(12776),ke=n(4953);const Te="?notices"===window.location.search,Ce={...(0,E.Z)(N.qI,["noticesRead"]),...(0,E.Z)(N.d6,["noticesUnreadNum","noticesFiltered"])};function Se(){const[e,t]=(0,D.Z)(Ce),[n,s]=(0,c.useState)(!0),[i,l]=(0,c.useState)(Te),r=[],a=[];e&&e.noticesFiltered.forEach((t=>{e.noticesRead.includes(t.id)?r.push(t):a.push(t)}));const o=n?a:r;return(0,c.useEffect)((()=>{f().runtime.sendMessage({action:"refresh notices"})}),[]),(0,P.jsxs)("div",{style:{position:"relative"},children:[(0,P.jsx)(be.J,{popoverClassName:"notice-popover",isOpen:i,position:"bottom",onClose:()=>{l(!1)},onClosed:()=>{s(!0)},content:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,P.jsx)(pe.H4,{style:{marginBottom:0},children:"通知"}),(0,P.jsxs)("a",{onClick:()=>s((e=>!e)),children:["显示",n?"已读":"未读"]})]}),(0,P.jsxs)("div",{className:"notices-box",children:[o.map((n=>{const s=null==e?void 0:e.noticesRead.includes(n.id);return(0,P.jsxs)(x.Z,{style:{padding:10},children:[n.title&&(0,P.jsx)(pe.H6,{children:n.title}),(0,P.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,$.sanitize)(n.text)}}),(n.link||!s)&&(0,P.jsxs)("p",{className:"actions",children:[n.link&&(0,P.jsx)("a",{href:n.link,target:"_blank",rel:"noreferrer",children:"查看详情"}),!s&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("a",{style:{float:"right"},onClick:()=>{t((e=>{e.noticesRead.push(n.id)}))},children:"标为已读"})})]})]},n.id)})),!o.length&&(0,P.jsx)(ke.t,{icon:"notifications-updated",description:`没有${n?"未读":"已读"}通知`})]})]}),children:(0,P.jsx)(k.z,{icon:"notifications",onClick:()=>l((e=>!e)),minimal:!0})}),!(null==e||!e.noticesUnreadNum)&&(0,P.jsx)("div",{className:"notices-num",style:{position:"absolute",top:0,right:0},children:null==e?void 0:e.noticesUnreadNum})]})}var we=n(89458);function Le(e){const t=(0,c.useRef)(null),{inline:n}=e;return(0,c.useEffect)((()=>{var e;if(!n)return;const s=t.current;if(!s)return;const i=null===(e=s.closest("."+h.TwV))||void 0===e?void 0:e.parentElement;return i?(i.classList.add(h.KtJ),()=>{i.classList.remove(h.KtJ)}):void 0}),[n]),(0,P.jsx)(we.u,{interactionKind:"hover",hoverCloseDelay:300,position:"bottom",content:(0,P.jsx)("div",{style:{width:e.width||300},children:e.children}),children:(0,P.jsx)("span",{ref:t,style:{display:"inline-flex",height:12,width:12},children:(0,P.jsx)(J.I,{icon:"help",size:12,style:{cursor:"help"}})})})}function _e(){const{syncOptions:e}=(0,c.useContext)(ge),t=(0,c.useContext)(O),n=(0,o.s0)();return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(y.w,{fixedToTop:!0,children:[(0,P.jsx)(v.f,{align:"left",children:(0,P.jsxs)(b.y,{children:["划词翻译"," ",(0,P.jsxs)("span",{className:h.Tio,children:["v",f().runtime.getManifest().version]})]})}),(0,P.jsxs)(v.f,{align:"right",children:[(0,P.jsx)(k.A,{icon:"git-repo",text:"更新日志",minimal:!0,href:"https://hcfy.app/docs/log",target:"_blank",rel:"noreferrer"}),(0,P.jsx)(k.A,{icon:"issue",text:"反馈问题",href:"https://hcfy.app/docs/issues",target:"_blank",rel:"noreferrer"}),(0,P.jsx)(T.o,{}),(0,P.jsx)(k.z,{icon:"refresh",text:"同步设置",onClick:()=>{e(t)},style:{marginRight:"10px"}}),(0,P.jsxs)(Le,{children:[(0,P.jsx)("p",{children:"开通会员后，划词翻译会在你每次更改设置后自动将设置上传到服务器。"}),(0,P.jsx)("div",{children:"另外，划词翻译会在后台每隔一小时检查设置是否有变更，你也可以点击“同步设置”按钮立刻进行一次检查。"})]}),(0,P.jsx)(T.o,{}),(0,P.jsx)(k.z,{icon:t?t.vipActivated?"crown":"user":"log-in",minimal:!0,onClick:()=>{n("/user")},rightIcon:t?"caret-down":void 0,text:t?t.email:"登录"}),(0,P.jsx)(Se,{})]})]})})}var Ee=n(89930),Pe=n(17419);let Re=!1;const Ae=(0,A.RN)({maxToasts:2});var Ie=n(59831),Fe=n(92454);function Ze(e){const[t,n]=(0,c.useState)(null);return(0,c.useEffect)((()=>{function t(){f().permissions.contains(e).then(n)}return t(),f().permissions.onAdded.addListener(t),f().permissions.onRemoved.addListener(t),()=>{f().permissions.onAdded.removeListener(t),f().permissions.onRemoved.removeListener(t)}}),[e]),t}const Ne={permissions:["notifications"]};const De={origins:["<all_urls>"]};const Oe=window.navigator.userAgent,ze=(Oe.includes("Mac"),Oe.includes("Chrome")),Ke=Oe.includes("Edg"),Ue=ze&&!Ke,Ve=Oe.includes("Firefox");function Be(e){return e.split(".").map((e=>Number(e)))}Be(f().runtime.getManifest().version);var Me=n(39421);const $e="chrome://extensions/?id="+f().runtime.id;function He(){f().tabs.create({url:$e})}const qe=(0,P.jsx)("a",{onClick:He,children:"划词翻译的详细信息页面"});function We(){const{t:e}=(0,l.$G)(),t=(0,B.Z)((()=>f().extension.isAllowedFileSchemeAccess()),[]);return t.loading||t.value||t.error?null:(0,P.jsxs)(Me.U,{icon:"info-sign",title:e("permission.notAllowURLTitle"),children:[(0,P.jsx)("p",{children:(0,P.jsx)(l.cC,{i18nKey:"permission.goToAllowURLDescription",components:{GoToDetailLink:(0,P.jsx)("a",{onClick:He}),InlineCode:(0,P.jsx)(pe.EK,{})}})}),(0,P.jsx)(k.z,{intent:"primary",onClick:He,children:e("permission.goToAllowURLBtn")})]})}function Ge(){return(0,P.jsx)(Me.U,{icon:"info-sign",children:(0,P.jsx)(l.cC,{i18nKey:"permission.noAllowURL",components:{InlineCode:(0,P.jsx)(pe.EK,{})}})})}const Ye=Ke?"站点访问权限":"有权访问的网站";function Je(){const e=Ze(De),[t,n]=(0,c.useState)(!0);return e||null==e?null:(0,P.jsxs)(C.V,{title:"你更改了划词翻译的权限范围",isOpen:t,icon:"warning-sign",onClose:()=>n(!1),children:[(0,P.jsxs)(Ie.a,{children:[(0,P.jsxs)("p",{children:["划词翻译检测到你更改了【",Ye,"】，这会导致划词翻译在所有网站内都无法正常使用，各翻译服务以及登录 / 注册划词翻译账号时均会提示”服务器无响应“。请前往",qe,"，将【",Ye,"】改为【在所有网站上】。"]}),(0,P.jsx)("div",{children:"如果你希望在部分网站内不启用网页划词，你可以点击浏览器地址栏右侧的划词翻译图标，展开【此页面已启用网页划词】，然后选择【在当前网站中禁用】。你还可以在左侧的【网页划词翻译】中勾选【在所有网站中禁用网页划词】，只通过快捷键、辅助键或右键菜单的方式显示翻译结果。"})]}),(0,P.jsx)(Fe.c,{actions:(0,P.jsx)(k.z,{intent:"primary",onClick:He,children:"去修改"})})]})}function Xe(e){return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("li",{className:`${h.kjJ} ${h.Tio}`,style:{marginTop:15,paddingLeft:5},children:e.title}),(0,P.jsx)(u.R,{})]})}function Qe(){(0,m.Z)();const e=(0,o.TH)(),t=(0,c.useContext)(O),{setShowVip:n}=(0,c.useContext)(ge),s=e.pathname;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Je,{}),(0,P.jsx)(_e,{}),(0,P.jsx)(x.Z,{id:"left-nav",children:(0,P.jsxs)(p.v,{large:!0,children:[(0,P.jsx)(Xe,{title:"我的"}),(0,P.jsx)(j.s,{active:"/user"===s,icon:"user",text:t?"个人中心":"登录 / 注册",href:(0,o.oQ)("/user")}),(0,P.jsx)(j.s,{active:"/services"===e.pathname,href:(0,o.oQ)("/services"),icon:"applications",text:"服务申请"}),(0,P.jsx)(j.s,{active:"/stars"===s,href:(0,o.oQ)("/stars"),icon:"folder-open",text:"收藏夹"}),(0,P.jsx)(j.s,{active:"/history"===s,href:(0,o.oQ)("/history"),icon:"history",text:"历史记录"}),(0,P.jsx)(Xe,{title:"通用设置"}),(0,P.jsx)(j.s,{active:"/shortcut"===s,href:(0,o.oQ)("/shortcut"),icon:"key-option",text:"快捷键"}),(0,P.jsx)(j.s,{active:"/appearance"===s,href:(0,o.oQ)("/appearance"),icon:"control",text:"外观"}),(0,P.jsx)(j.s,{active:"/audio"===s,href:(0,o.oQ)("/audio"),icon:"volume-up",text:"语音朗读"}),(0,P.jsx)(j.s,{active:"/notifications"===s,href:(0,o.oQ)("/notifications"),icon:"notifications",text:"通知"}),(0,P.jsx)(j.s,{active:"/services-options"===s,href:(0,o.oQ)("/services-options"),icon:"multi-select",text:"第三方服务"}),(0,P.jsx)(j.s,{active:"/other"===s,href:(0,o.oQ)("/other"),icon:"cog",text:"其它"}),(0,P.jsx)(Xe,{title:"功能设置"}),(0,P.jsx)(j.s,{active:"/panel"===s,href:(0,o.oQ)("/panel"),icon:"th-list",text:"翻译面板"}),(0,P.jsx)(j.s,{active:"/cross"===s,href:(0,o.oQ)("/cross"),icon:"text-highlight",text:"网页划词翻译"}),(0,P.jsx)(j.s,{active:"/fulltext"===s,href:(0,o.oQ)("/fulltext"),icon:"translate",text:"网页全文翻译"}),(0,P.jsx)(j.s,{active:"/standalone"===s,href:(0,o.oQ)("/standalone"),icon:"modal",text:"独立翻译窗口"}),(0,P.jsx)(j.s,{active:"/pdf"===s,href:(0,o.oQ)("/pdf"),icon:"document",text:"PDF"}),(0,P.jsx)(Xe,{title:"其它"}),(0,P.jsx)(j.s,{icon:"crown",text:"开通会员",onClick:()=>{n(!0)}}),(0,P.jsx)(j.s,{icon:"clean",text:"邀请有礼",target:"_blank",href:"https://hcfy.app/docs/invite"}),(0,P.jsx)(j.s,{active:"/about"===e.pathname,href:(0,o.oQ)("/about"),icon:"info-sign",text:"关于"})]})}),(0,P.jsx)("main",{id:"main",children:(0,P.jsx)(o.j3,{})})]})}d.$.onlyShowFocusOnTabs(),Re||(L.L.interceptors.response.use(Ee.Z,(e=>{const t={intent:"danger",message:""},n=(0,Pe.RE)(e);return t.message=n.message,n.link&&(t.action={text:n.link.name,href:n.link.url,target:"_blank"}),Ae.then((e=>{e.show(t)})),Promise.reject(e)})),Re=!0);var et=n(39857),tt=n(99507),nt=n(29597);function st(){const{setShowLogin:e,setShowVip:t,syncOptions:n}=(0,c.useContext)(ge),s=(0,c.useContext)(z),i=(0,o.s0)(),l=(0,c.useRef)(null),[r,a]=(0,c.useState)("login");return(0,c.useEffect)((()=>{var e;"login"===r&&(null===(e=l.current)||void 0===e||e.focus("user"))}),[r]),(0,P.jsxs)(tt.mQ,{id:"login-or-reg-tabs",large:!0,selectedTabId:r,onChange:a,children:[(0,P.jsx)(nt.O,{id:"login",title:"登录",panel:(0,P.jsx)(Z,{ref:l,openType:"login",onLogin:e=>{s(e),n(e)}})}),(0,P.jsx)(nt.O,{id:"reg",title:"注册",panel:(0,P.jsxs)(P.Fragment,{children:["划词翻译无需注册即可免费使用，在",(0,P.jsx)("a",{onClick:()=>{e(!1),t(!0)},children:"开通会员"}),"或",(0,P.jsx)("a",{onClick:()=>{e(!1),i("/services?buy=1")},children:"购买翻译积分"}),"时才能注册账号。"]})})]})}function it(e){const{title:t,children:n}=e;return(0,P.jsxs)("div",{className:"item-list",children:[t&&(0,P.jsx)(pe.H4,{children:t}),n]})}function lt(e){return(0,P.jsxs)("div",{className:"item-list-item",children:[(0,P.jsx)("div",{className:"item-title",children:e.title}),(0,P.jsx)("div",{className:"item-content",children:e.children})]})}n(634);function rt(e){return(0,P.jsxs)("p",{className:"utils-flex",children:[(0,P.jsxs)("span",{children:[(0,P.jsx)("span",{children:e.title}),e.description&&(0,P.jsx)("span",{className:`${h.Tio} ${h.kjJ}`,style:{display:"block"},children:e.description})]}),(0,P.jsx)("span",{className:h.kjJ,children:e.children})]})}function at(e){const{user:t,onVip:n}=e,s=Y(e.user);return(0,P.jsxs)(rt,{title:"会员到期时间",children:[t.forever&&(0,P.jsx)(P.Fragment,{children:"永不过期"}),!s.isOpened&&(0,P.jsx)(P.Fragment,{children:"未开通"}),!t.forever&&t.vipActivated&&s.endTime,s.isOpened&&!t.vipActivated&&(0,P.jsxs)(P.Fragment,{children:[s.endTime,"（已过期）"]}),(0,P.jsx)(k.z,{style:{marginLeft:15},disabled:t.forever,icon:"crown",text:s.text,onClick:n})]})}const ct=(0,E.Z)(N.d6,["optionsSyncAt"]);function ot(){const{setShowVip:e,syncOptions:t}=(0,c.useContext)(ge),n=(0,c.useContext)(O),s=(0,c.useContext)(z),[i]=(0,D.Z)(ct),l=(0,o.s0)(),[r,a]=(0,_.Z)((async()=>{await L.L.post("/logout"),s(null),f().storage.local.remove(["optionsSyncAt","favoritesSyncAt","historiesSyncAt"])}),[]);return(0,c.useEffect)((()=>{L.L.get("/user-info").then((e=>{s(e.data)}))}),[s]),n?(0,P.jsx)(it,{title:"个人中心",children:(0,P.jsxs)(lt,{title:"个人信息",children:[(0,P.jsxs)(rt,{title:"账号",children:[n.email,(0,P.jsx)(k.z,{style:{marginLeft:15},icon:"log-out",loading:r.loading,text:"退出登录",onClick:a})]}),(0,P.jsx)(at,{user:n,onVip:()=>{e(!0)}}),(0,P.jsxs)(rt,{title:"翻译积分",description:(0,P.jsxs)(P.Fragment,{children:["用于支付使用第三方服务时产生的费用。",(0,P.jsx)("a",{target:"_blank",href:"https://hcfy.app/docs/services/tp",rel:"noreferrer",children:"了解更多"})]}),children:[n.points||0,(0,P.jsx)(k.z,{style:{marginLeft:15},icon:"blank",text:"购买积分",onClick:()=>{l("/services?buy=1")}})]}),(0,P.jsxs)(rt,{title:"上次同步设置的时间",children:[i?i.optionsSyncAt?(0,G.Z)(new Date(i.optionsSyncAt),"yyyy 年 M 月 d 日 HH:mm:ss"):"未同步过设置":null,(0,P.jsx)(k.z,{style:{marginLeft:15},icon:"refresh",text:"立即同步",onClick:()=>{t(n)}})]})]})}):null}function dt(){const e=(0,c.useContext)(O);return(0,P.jsxs)("div",{id:"user-center",style:{margin:"15px",width:700},children:[!e&&(0,P.jsx)(st,{}),e&&(0,P.jsx)(ot,{})]})}n(1951);var ht=n(59069),ut=n(8560),xt=n(93561),pt=n(14979),jt=n(4267),mt=n(73058);function gt(){const[e,t]=(0,c.useState)(!1);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("a",{onClick:()=>{t(!0)},children:"查看范例"}),(0,P.jsx)(C.V,{isOpen:e,onClose:()=>{t(!1)},title:"范例",className:"example-dialog",children:(0,P.jsx)("div",{className:h.TmF,children:(0,P.jsxs)(jt.v,{bordered:!0,compact:!0,striped:!0,children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"规则"}),(0,P.jsx)("th",{children:"匹配的网址"}),(0,P.jsx)("th",{children:"不匹配的网址"})]})}),(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"*/*"}),(0,P.jsx)("p",{children:"匹配任意网址。"})]}),(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"limingkai.cn"}),(0,P.jsx)("p",{children:"hcfy.limingkai.cn"}),(0,P.jsx)("p",{children:"baidu.com/search"}),(0,P.jsx)("p",{children:"jd.com/item.html"})]}),(0,P.jsx)("td",{children:(0,P.jsx)("p",{children:"没有不匹配的网址"})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"*.limingkai.cn/*"}),(0,P.jsxs)("p",{children:["匹配 ",(0,P.jsx)(pe.EK,{children:"limingkai.cn"})," 或者所有域名以"," ",(0,P.jsx)(pe.EK,{children:".limingkai.cn"})," 结尾的网址，网址可以有任意路径。"]})]}),(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"limingkai.cn"}),(0,P.jsx)("p",{children:"hcfy.limingkai.cn"}),(0,P.jsx)("p",{children:"hcfy.limingkai.cn/path"}),(0,P.jsx)("p",{children:"aaa.hcfy.limingkai.cn"})]}),(0,P.jsxs)("td",{children:[(0,P.jsxs)("p",{children:["limingkai.org ",(0,P.jsx)(pt.V,{children:"域名不匹配"})]}),(0,P.jsxs)("p",{children:["baidu.com ",(0,P.jsx)(pt.V,{children:"域名不匹配"})]})]})]}),(0,P.jsxs)("tr",{children:[(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"limingkai.cn/*"}),(0,P.jsxs)("p",{children:["匹配域名是 ",(0,P.jsx)(pe.EK,{children:"limingkai.cn"})," 的所有网址。"]})]}),(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"limingkai.cn"}),(0,P.jsx)("p",{children:"limingkai.cn/path"})]}),(0,P.jsx)("td",{children:(0,P.jsxs)("p",{children:["hcfy.limingkai.cn ",(0,P.jsx)(pt.V,{children:"域名不匹配"})]})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"limingkai.cn/"}),(0,P.jsxs)("p",{children:["仅匹配 ",(0,P.jsx)(pe.EK,{children:"limingkai.cn"})," 这一个网址。"]})]}),(0,P.jsx)("td",{children:(0,P.jsx)("p",{children:"limingkai.cn"})}),(0,P.jsxs)("td",{children:[(0,P.jsxs)("p",{children:["hcfy.limingkai.cn ",(0,P.jsx)(pt.V,{children:"域名不匹配"})]}),(0,P.jsxs)("p",{children:["limingkai.cn/path ",(0,P.jsx)(pt.V,{children:"路径不匹配"})]})]})]}),(0,P.jsxs)("tr",{children:[(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"*/path"}),(0,P.jsxs)("p",{children:["匹配任意域名的网址，但路径部分只能是 ",(0,P.jsx)(pe.EK,{children:"path"}),"。"]})]}),(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"hcfy.limingkai.cn/path"}),(0,P.jsx)("p",{children:"baidu.com/path"})]}),(0,P.jsx)("td",{children:(0,P.jsxs)("p",{children:["hcfy.limingkai.cn/a ",(0,P.jsx)(pt.V,{children:"路径不匹配"})]})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"*/path/"}),(0,P.jsxs)("p",{children:["匹配任意域名，但路径部分只能是 ",(0,P.jsx)(pe.EK,{children:"path/"}),"。跟上个例子相比，路径末尾多了一个 ",(0,P.jsx)(pe.EK,{children:"/"}),"。"]})]}),(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"hcfy.limingkai.cn/path/"}),(0,P.jsx)("p",{children:"baidu.com/path/"})]}),(0,P.jsxs)("td",{children:[(0,P.jsxs)("p",{children:["hcfy.limingkai.cn/path ",(0,P.jsx)(pt.V,{children:"路径不匹配"})]}),(0,P.jsxs)("p",{children:["hcfy.limingkai.cn/path/a ",(0,P.jsx)(pt.V,{children:"路径不匹配"})]})]})]}),(0,P.jsxs)("tr",{children:[(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"hcfy.limingkai.cn/*path*"}),(0,P.jsxs)("p",{children:["匹配 ",(0,P.jsx)(pe.EK,{children:"hcfy.limingkai.cn"})," 域名且路径中包含"," ",(0,P.jsx)(pe.EK,{children:"path"})," 的网址。"]})]}),(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"hcfy.limingkai.cn/path"}),(0,P.jsx)("p",{children:"hcfy.limingkai.cn/abcpath"}),(0,P.jsx)("p",{children:"hcfy.limingkai.cn/abc/path"}),(0,P.jsx)("p",{children:"hcfy.limingkai.cn/abc/pathdef"}),(0,P.jsx)("p",{children:"hcfy.limingkai.cn/abc/path/def"})]}),(0,P.jsxs)("td",{children:[(0,P.jsxs)("p",{children:["hcfy.limingkai.cn/paXth ",(0,P.jsx)(pt.V,{children:"路径不匹配"})]}),(0,P.jsxs)("p",{children:["hcfy.limingkai.cn/pa/th ",(0,P.jsx)(pt.V,{children:"路径不匹配"})]})]})]}),(0,P.jsxs)("tr",{children:[(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"limingkai.cn/*/path/*/"}),(0,P.jsxs)("p",{children:["匹配 ",(0,P.jsx)(pe.EK,{children:"limingkai.cn"})," 域名且路径中包含"," ",(0,P.jsx)(pe.EK,{children:"path"}),"、",(0,P.jsx)(pe.EK,{children:"path"})," 左右有路径片段且以"," ",(0,P.jsx)(pe.EK,{children:"/"})," 结尾的网址。"]})]}),(0,P.jsxs)("td",{children:[(0,P.jsx)("p",{children:"limingkai.cn/a/path/b/"}),(0,P.jsx)("p",{children:"limingkai.cn/a/b/path/c/d/"})]}),(0,P.jsxs)("td",{children:[(0,P.jsxs)("p",{children:["limingkai.cn/path/"," ",(0,P.jsxs)(pt.V,{children:[(0,P.jsx)(pe.EK,{children:"path"})," 左右两边没有路径片段"]})]}),(0,P.jsxs)("p",{children:["limingkai.cn/a/path/"," ",(0,P.jsxs)(pt.V,{children:[(0,P.jsx)(pe.EK,{children:"path"})," 右边没有路径片段"]})]}),(0,P.jsxs)("p",{children:["limingkai.cn/path/b/"," ",(0,P.jsxs)(pt.V,{children:[(0,P.jsx)(pe.EK,{children:"path"})," 左边没有路径片段"]})]})]})]})]})]})})})]})}n(17368),n(24471),n(85940);function ft(e){return`${e.host}${e.path}`}function yt(e){const t=e.match(/^(([^:]+):\/\/)?([^/]+)?(\/.*)?$/);if(!t)return;let n=t[3]||"";const s=n.indexOf(":");s>=0&&(n=n.slice(0,s));let i=t[4]||"";const l=i.indexOf("#");if(l>=0&&(i=i.slice(0,l)),!n.startsWith(".")){if(!i){if(!n)return;i="/"}return{host:n,path:i}}}function vt(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".*").replace(/^\.\*\\\./,"(.*\\.)?")+"$").test(t)}function bt(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(t)}function kt(e,t,n){let s,i;s="string"==typeof e?yt(e):e;let l=!1,r=!1;if(s){const e=e=>{const t=function(e,t){let n;if(n="string"==typeof t?yt(t):t,n)return vt(e.host,n.host)&&bt(e.path,n.path)}(e,s);return t&&(i=e),t};l=n.some(e),l||(r=t.some(e))}return{urlParts:s,matchedRule:i,whiteListMatched:l,blackListMatched:r}}const Tt={host:"",path:"/*"};function Ct(e,t){switch(t.type){case"reset":return Tt;case"merge":return{...e,...t.data};default:throw new TypeError("不支持的 action type: "+JSON.stringify(t))}}const St="";function wt(e){const{isOpen:t,setIsOpen:n,onSave:s,isExists:i,name:l}=e,[r,a]=(0,c.useState)(!1),o=(0,c.useRef)(null),d=()=>{n(!1),x({type:"reset"}),g(St)},[u,x]=(0,c.useReducer)(Ct,Tt),p=function(e){const t=e.host;return!!t&&("*"===t||!t.includes("*")||/^\*\.[^*]+$/.test(t))}(u),j=e=>{var t;const n=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text");if(n){const t=yt(n);t&&(e.preventDefault(),x({type:"merge",data:t}))}},[m,g]=(0,c.useState)(St),f=p&&function(e,t){let n;if(n="string"==typeof t?yt(t):t,n)return{isHostMatch:{ruleHost:e.host,urlHost:n.host,matches:vt(e.host,n.host)},isPathMatch:{rulePath:e.path,urlPath:n.path,matches:bt(e.path,n.path)}}}(u,m),y=void 0!==f,v=f&&f.isHostMatch.matches&&f.isPathMatch.matches;return(0,P.jsxs)(C.V,{canEscapeKeyClose:!1,canOutsideClickClose:!1,isOpen:t,onClose:d,onOpening:()=>{var e;null===(e=o.current)||void 0===e||e.focus()},title:"新增"+l+"规则",className:"edit-rule-dialog",children:[(0,P.jsxs)("div",{className:h.TmF,children:[(0,P.jsx)(S.c,{label:"规则的格式",children:(0,P.jsxs)("div",{className:h.foX,children:["规则由“网站”和“页面”两个部分组成，在这两个部分中都可以使用通配符"," ",(0,P.jsx)(pe.EK,{children:"*"}),"。",(0,P.jsxs)(pe.UL,{children:[(0,P.jsxs)("li",{children:["在“网站”中：",(0,P.jsxs)(pe.UL,{children:[(0,P.jsx)("li",{children:"可以有一个或 0 个通配符。如果有，则必须以通配符开头；"}),(0,P.jsx)("li",{children:"如果只填写了通配符，则表示匹配所有域名；"}),(0,P.jsxs)("li",{children:["如果填写了以 ",(0,P.jsx)(pe.EK,{children:"*."})," ","开头的域名，则表示匹配所有以这个域名结尾的域名；"]}),(0,P.jsx)("li",{children:"你也可以不使用通配符来匹配单一的域名。"})]})]}),(0,P.jsxs)("li",{children:["在“页面”中：",(0,P.jsxs)(pe.UL,{children:[(0,P.jsx)("li",{children:"可以使用任意多个通配符，每个通配符表示匹配 0 个或多个任意字符；"}),(0,P.jsxs)("li",{children:["页面必须以 ",(0,P.jsx)(pe.EK,{children:"/"})," 开头；"]}),(0,P.jsxs)("li",{children:["页面部分默认填写了 ",(0,P.jsx)(pe.EK,{children:"/*"}),"，表示匹配任意页面。"]})]})]})]}),(0,P.jsx)(gt,{})]})}),(0,P.jsx)(pe.H5,{children:"填写规则"}),(0,P.jsxs)(S.c,{children:[(0,P.jsxs)(mt.e,{children:[(0,P.jsx)(w.B,{placeholder:"域名",value:u.host,inputRef:o,onChange:e=>{x({type:"merge",data:{host:e.target.value.trim()}})},onPaste:j}),(0,P.jsx)(w.B,{placeholder:"路径",value:u.path,onChange:e=>{let t=e.target.value.trim();"/"!==t[0]&&(t="/"+t),x({type:"merge",data:{path:t}})},onPaste:j})]}),u.host&&!p&&(0,P.jsx)(Me.U,{icon:null,intent:"warning",children:"域名格式不正确"})]}),(0,P.jsxs)(pe.H5,{children:["测试"," ",p&&(0,P.jsx)(pe.EK,{style:{fontWeight:"normal"},children:ft(u)})]}),(0,P.jsxs)(S.c,{children:[(0,P.jsx)(w.B,{value:m,onChange:e=>{g(e.target.value.trim())},placeholder:"你可以填写一个网址来测试是否跟规则匹配"}),m&&!y&&(0,P.jsx)(Me.U,{icon:null,intent:"warning",children:"网址格式不正确"}),f&&y&&v&&(0,P.jsx)(Me.U,{title:"匹配"}),f&&y&&!v&&(0,P.jsxs)(Me.U,{title:"不匹配",children:[f.isHostMatch.matches||(0,P.jsxs)("p",{children:["网址的域名 ",(0,P.jsx)(pe.EK,{children:f.isHostMatch.urlHost})," ","不匹配规则 ",(0,P.jsx)(pe.EK,{children:f.isHostMatch.ruleHost})]}),f.isPathMatch.matches||(0,P.jsxs)("p",{children:["网址的路径 ",(0,P.jsx)(pe.EK,{children:f.isPathMatch.urlPath})," ","不匹配规则 ",(0,P.jsx)(pe.EK,{children:f.isPathMatch.rulePath})]})]})]})]}),(0,P.jsx)("div",{className:h.Alt,children:(0,P.jsxs)("div",{className:h.e$L,children:[(0,P.jsx)(k.z,{onClick:d,children:"取消"}),(0,P.jsx)(k.z,{intent:"primary",onClick:()=>{var e;p?i(u)?a(!0):(s(u),d()):null===(e=o.current)||void 0===e||e.focus()},children:"保存"}),(0,P.jsxs)(xe.b,{confirmButtonText:"我知道了",isOpen:r,onConfirm:()=>{a(!1)},children:["规则 ",(0,P.jsx)(pe.EK,{children:ft(u)})," 已经有了，无需重复添加。"]})]})})]})}function Lt(e){const{rules:t,setRules:n,name:s,disabled:i}=e,[l,r]=(0,c.useState)(!1),a=(0,c.useRef)();const[o,d]=(0,c.useState)(!1),h=()=>{d(!1),a.current=void 0};return(0,P.jsxs)("div",{className:"domain-rules",children:[(0,P.jsxs)("div",{className:"header",children:[(0,P.jsx)(pe.H6,{children:s}),(0,P.jsx)(k.z,{disabled:i,icon:"add",onClick:()=>{r(!0)},minimal:!0})]}),(0,P.jsx)("div",{className:"table-box",children:(0,P.jsx)(jt.v,{bordered:!0,striped:!0,compact:!0,children:(0,P.jsx)("tbody",{children:t.length?t.map((e=>{const t=ft(e);return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t}),(0,P.jsx)("td",{children:(0,P.jsx)(k.z,{disabled:i,minimal:!0,icon:"delete",onClick:()=>function(e){a.current=e,d(!0)}(e)})})]},t)})):(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:2,children:(0,P.jsx)(ke.t,{title:"没有规则",description:"黑名单"===s?(0,P.jsx)(P.Fragment,{children:"命中黑名单的网址会禁用网页划词"}):(0,P.jsx)(P.Fragment,{children:"命中白名单的网址会始终启用网页划词"}),action:(0,P.jsx)(k.z,{disabled:i,onClick:()=>{r(!0)},intent:"primary",children:"添加一条规则"})})})})})})}),(0,P.jsxs)(xe.b,{icon:"trash",intent:"danger",isOpen:o,confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:()=>{if(a.current){const e=t.indexOf(a.current);if(e>=0){const s=[...t];s.splice(e,1),n(s)}}h()},onCancel:h,children:["确定要从",s,"中删除"," ",(0,P.jsx)(pe.EK,{children:a.current?ft(a.current):"这条规则"})," ","吗？"]}),(0,P.jsx)(wt,{isOpen:l,setIsOpen:r,onSave:e=>{const s=[...t];s.push(e),n(s)},isExists:e=>t.some((t=>de()(t,e))),name:s})]})}var _t=n(67067);function Et(){const e=(0,o.s0)();return(0,P.jsx)(we.u,{interactionKind:"hover",hoverCloseDelay:300,content:(0,P.jsxs)(P.Fragment,{children:["此选项支持",(0,P.jsx)("a",{onClick:()=>e("/shortcut"),children:"快捷键"}),"。"]}),children:(0,P.jsx)(pt.V,{style:{fontWeight:"normal"},minimal:!0,children:"快捷键"})})}const Pt=(0,E.Z)(N.qI,["charsLimit"]);function Rt(){const[e,t]=(0,D.Z)(Pt);return(0,P.jsx)(S.c,{label:"限制字符数量",helperText:"如果划选的文本字符数超过这个数量则不会显示翻译按钮或翻译结果。设置为 0 则不做限制。",children:(0,P.jsx)(xt.A,{min:0,minorStepSize:1,stepSize:10,majorStepSize:100,selectAllOnFocus:!0,selectAllOnIncrement:!0,value:e?e.charsLimit:Pt.charsLimit,onValueChange:e=>{t({charsLimit:e})}})})}const At=[{label:"上",value:"top"},{label:"上左",value:"top-end"},{label:"上右",value:"top-start"},{label:"下",value:"bottom"},{label:"下左",value:"bottom-end"},{label:"下右",value:"bottom-start"},{label:"左",value:"left"},{label:"左上",value:"left-end"},{label:"左下",value:"left-start"},{label:"右",value:"right"},{label:"右上",value:"right-end"},{label:"右下",value:"right-start"}],It=(0,E.Z)(N.qI,["width","pin","pinEnhance","pinPos","pinAfterDrag","placement"]);function Ft(){const[e,t]=(0,D.Z)(It);return(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"网页划词面板"}),(0,P.jsx)(S.c,{label:"面板宽度",helperText:"拖动面板的左右边缘可以调整面板的宽度。",children:(0,P.jsx)(w.B,{disabled:!0,value:e?e.width+"px":It.width+"px"})}),(0,P.jsx)(S.c,{helperText:"弹窗会先尝试朝这个方向显示，如果空间不够，它会自动调整方向确保处于可视区域内。",children:(0,P.jsx)(ee.E,{label:"弹窗显示方向",inline:!0,onChange:e=>{t({placement:e.target.value})},selectedValue:e?e.placement:It.placement,className:"placement-group",children:At.map((e=>(0,P.jsx)(ht.Y8,{value:e.value,label:e.label},e.value)))})}),(0,P.jsx)(S.c,{helperText:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("p",{children:"勾选此选项后，固定模式下的翻译面板会新增以下行为："}),(0,P.jsxs)(pe.UL,{children:[(0,P.jsx)("li",{children:"在网页上划词后会立刻显示翻译结果。"}),(0,P.jsx)("li",{children:"点击网页空白处不会关闭翻译面板，只能点击翻译面板的关闭按钮才能关闭。"})]})]}),children:(0,P.jsx)(ht.XZ,{label:"为固定模式添加默认行为",checked:e?e.pinEnhance:It.pinEnhance,onChange:e=>{t({pinEnhance:e.currentTarget.checked})}})}),(0,P.jsx)(S.c,{label:"当前是否固定：",children:(e?e.pin:It.pin)?"是":"否"}),(0,P.jsxs)(S.c,{label:"面板位置",helperText:"固定模式下面板距离浏览器左上角的距离。拖动面板可以改变面板的位置。",children:["左边距：",null!=e&&e.pinPos?e.pinPos.x+"px":"-",(0,P.jsx)("br",{}),"上边距：",null!=e&&e.pinPos?e.pinPos.y+"px":"-"]}),(0,P.jsx)(S.c,{helperText:"勾选后，当你拖动窗口时，弹窗会自动切换为固定模式。",children:(0,P.jsx)(ht.XZ,{labelElement:(0,P.jsx)(P.Fragment,{children:"拖动窗口后自动切换为固定模式"}),checked:e?e.pinAfterDrag:It.pinAfterDrag,onChange:e=>{t({pinAfterDrag:e.target.checked})}})})]})}const Zt=(0,E.Z)(N.qI,["button","buttonAutoClose","buttonOffsetTop","buttonOffsetLeft","disableInTextarea","domainBlackList","domainWhiteList","textList","pin","pinPos","pinIgnoreDomainList","modifierKeys","modifierKeyPressedAction","modifierKeyTranslate","modifierKeyLink"]),Nt={host:"*",path:"/*"};function Dt(){const[e,t]=(0,c.useState)(!1),[n,s]=(0,D.Z)(Zt),i=e=>{s((t=>{const n=t.modifierKeys.indexOf(e);n>=0?t.modifierKeys.splice(n,1):t.modifierKeys.push(e)}))},l=!(null!=n&&n.modifierKeys.length),r=null==n?void 0:n.domainBlackList,a=null==n?void 0:n.domainWhiteList,o=(0,c.useMemo)((()=>!!r&&r.some((e=>e.host===Nt.host&&e.path===Nt.path))),[r]),[d,u]=(0,c.useState)(""),p=(0,c.useMemo)((()=>yt(d)),[d]),{matchedRule:j,whiteListMatched:m,blackListMatched:g}=(0,c.useMemo)((()=>p&&r&&a?kt(p,r,a):{matchedRule:void 0,whiteListMatched:void 0,blackListMatched:void 0}),[r,a,p]),f=!!n;return(0,c.useEffect)((()=>{if(f){const e=decodeURI(window.location.hash.slice(1));e&&(window.location.hash="",window.location.hash=e)}}),[f]),n?(0,P.jsxs)("div",{id:"selection",style:{margin:15},children:[(0,P.jsxs)(Me.U,{title:"关于网页划词翻译功能",style:{marginBottom:15},children:["网页划词翻译功能用于在网页内翻译你选中的文本。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/guides/cross",target:"_blank",rel:"noreferrer noopener",children:"查看网页划词翻译功能介绍"})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{id:"辅助键",children:"辅助键"}),(0,P.jsxs)(S.c,{label:"选择辅助键",helperText:(0,P.jsxs)(P.Fragment,{children:["当选中的辅助键",(0,P.jsx)("b",{children:(0,P.jsx)("i",{children:"全部"})}),"按下不放时会触发下面的操作。"]}),children:[(0,P.jsx)(ht.XZ,{inline:!0,labelElement:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("kbd",{children:"Ctrl"}),"/",(0,P.jsx)("kbd",{children:"⌘"})]}),checked:n.modifierKeys.includes("ctrl"),onChange:()=>{i("ctrl")}}),(0,P.jsx)(ht.XZ,{inline:!0,labelElement:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("kbd",{children:"Alt"}),"/",(0,P.jsx)("kbd",{children:"⌥"})]}),checked:n.modifierKeys.includes("alt"),onChange:()=>{i("alt")}}),(0,P.jsx)(ht.XZ,{inline:!0,labelElement:(0,P.jsx)("kbd",{children:"Shift"}),checked:n.modifierKeys.includes("shift"),onChange:()=>{i("shift")}})]}),(0,P.jsxs)(S.c,{children:[(0,P.jsxs)(ee.E,{inline:!0,disabled:l,label:"在按住辅助键不放的情况下：",selectedValue:n.modifierKeyPressedAction,onChange:e=>{s({modifierKeyPressedAction:e.currentTarget.value})},children:[(0,P.jsx)(ht.Y8,{label:"不选择",value:""}),(0,P.jsx)(ht.Y8,{label:"划词后直接弹出翻译结果",value:"selection"}),(0,P.jsx)(ht.Y8,{label:"开启鼠标悬浮取词",value:"hover"}),1===n.modifierKeys.length&&"ctrl"===n.modifierKeys[0]&&"selection"===n.modifierKeyPressedAction&&(0,P.jsxs)(Me.U,{intent:"warning",children:["单独使用",(0,P.jsx)("kbd",{children:"Ctrl"}),"/",(0,P.jsx)("kbd",{children:"⌘"}),"作为辅助键时，选择“划词后直接弹出翻译结果”可能会导致你用",(0,P.jsx)("kbd",{children:"Ctrl"}),"/",(0,P.jsx)("kbd",{children:"⌘"}),"+",(0,P.jsx)("kbd",{children:"C"}),"复制文本时误触翻译。如果你遇到了这个问题，请替换或添加其它辅助键。"]})]}),(0,P.jsx)(ht.XZ,{disabled:l,label:"松开辅助键后，翻译页面中选中的文本",checked:n.modifierKeyTranslate,onChange:e=>{s({modifierKeyTranslate:e.target.checked})}}),1===n.modifierKeys.length&&"ctrl"===n.modifierKeys[0]&&n.modifierKeyTranslate&&(0,P.jsxs)(Me.U,{intent:"warning",children:["单独使用",(0,P.jsx)("kbd",{children:"Ctrl"}),"/",(0,P.jsx)("kbd",{children:"⌘"}),"作为辅助键时，启用此选项会导致你在文本框中选中文本后，用",(0,P.jsx)("kbd",{children:"Ctrl"}),"/",(0,P.jsx)("kbd",{children:"⌘"}),"+",(0,P.jsx)("kbd",{children:"Space"}),"切换输入法时误触翻译。如果你想避免这个问题，请替换或添加其它辅助键。"]}),(0,P.jsx)(ht.XZ,{disabled:l,label:"按住辅助键不放时，让页面中的链接可被选中",checked:n.modifierKeyLink,onChange:e=>{s({modifierKeyLink:e.target.checked})}})]})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{id:"网址筛选",children:"网址筛选"}),(0,P.jsx)("p",{className:`${h.kjJ} ${h.Tio}`,children:"划词翻译支持用黑 / 白名单规则控制在某些网址下是否启用网页划词。禁用了网页划词的页面在用鼠标划词后不会显示翻译按钮或翻译窗口，而且扩展图标会变为灰色，但你仍然可以使用辅助键、快捷键和右键菜单获取翻译结果。"}),(0,P.jsx)(S.c,{helperText:"勾选后，划词翻译在所有网站中划词后都不会显示翻译按钮 / 结果。",children:(0,P.jsx)(ht.XZ,{labelElement:(0,P.jsxs)(P.Fragment,{children:["在所有网站中禁用网页划词 ",(0,P.jsx)(Et,{})]}),checked:o,onChange:e=>{const t=e.target.checked;s((e=>{const n=e.domainBlackList,s=n.findIndex((e=>e.host===Nt.host&&e.path===Nt.path));t&&s>=0||!t&&s<0||(t?n.unshift(Nt):n.splice(s,1))}))}})}),(0,P.jsx)("p",{children:(0,P.jsxs)(k.z,{onClick:()=>{t((e=>!e))},children:[e?"隐藏":"显示","黑 / 白名单规则"]})}),(0,P.jsx)("p",{className:`${h.kjJ} ${h.Tio}`,children:"通常情况下，你不需要手动修改黑 / 白名单规则，因为你可以在点击扩展图标后出现的弹窗中便捷的禁用 / 启用网页划词。"}),(0,P.jsxs)(ut.U,{isOpen:e,keepChildrenMounted:!0,children:[(0,P.jsxs)("div",{className:"list",children:[(0,P.jsx)(Lt,{disabled:o,rules:n.domainBlackList,setRules:e=>{s({domainBlackList:e})},name:"黑名单"}),(0,P.jsx)(Lt,{disabled:o,rules:n.domainWhiteList,setRules:e=>{s({domainWhiteList:e})},name:"白名单"})]}),(0,P.jsx)(pe.H6,{children:"测试黑 / 白名单"}),(0,P.jsxs)(S.c,{children:[(0,P.jsx)(w.B,{value:d,onChange:e=>{u(e.target.value.trim())},placeholder:"你可以填写一个网址来测试是否命中了黑名单或白名单"}),d&&!p&&(0,P.jsx)(Me.U,{intent:"warning",children:"网址格式不正确"}),j&&(0,P.jsxs)(Me.U,{children:[g&&"没有命中白名单且","命中了",(0,P.jsxs)("b",{children:[m?"白":"黑","名单"]}),"中的"," ",(0,P.jsx)(pe.EK,{children:ft(j)})," 规则，此网址下会",(0,P.jsx)("b",{children:m?"开启":"关闭"}),"网页划词功能。"]}),p&&!g&&!m&&(0,P.jsx)(Me.U,{children:"既没有命中白名单，也没有命中黑名单，此网址下会开启网页划词功能。"})]})]}),(0,P.jsx)(S.c,{helperText:"勾选后，在固定模式下，无论当前页面是否处于黑 / 白名单中，划词后都会立刻显示翻译结果。",children:(0,P.jsx)(ht.XZ,{label:"固定模式下忽略黑 / 白名单规则",checked:n?n.pinIgnoreDomainList:Zt.pinIgnoreDomainList,onChange:()=>{s((e=>{e.pinIgnoreDomainList=!e.pinIgnoreDomainList}))}})})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"文本筛选"}),(0,P.jsx)(S.c,{children:n.textList.map((e=>(0,P.jsxs)("div",{children:[(0,P.jsx)(ht.XZ,{disabled:o,label:e.name,checked:e.enabled,onChange:()=>{return t=e,void s((e=>{const n=e.textList,s=(0,_t.Js)(n).indexOf(t);if(s>=0){const e=n[s];e.enabled=!e.enabled}}));var t}}),(0,P.jsx)("p",{className:`${h.kjJ} ${h.Tio}`,children:e.description})]},e.name)))})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"其它筛选"}),(0,P.jsxs)(S.c,{children:[(0,P.jsx)(ht.XZ,{label:"在文本框内划词后不触发翻译",checked:n.disableInTextarea,onChange:e=>{s({disableInTextarea:e.target.checked})}}),(0,P.jsx)("p",{className:`${h.kjJ} ${h.Tio}`,children:"勾选后，当你在文本框内划词时不会显示翻译按钮或翻译结果，也不会在固定模式时触发翻译。"})]}),(0,P.jsx)(Rt,{})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"翻译按钮"}),(0,P.jsxs)(S.c,{label:"翻译按钮",children:[(0,P.jsx)(ht.XZ,{disabled:o,label:"划词后先显示翻译按钮",checked:n.button,onChange:e=>{s({button:e.target.checked})}}),(0,P.jsx)("p",{className:`${h.kjJ} ${h.Tio}`,children:"勾选后，划词之后会先显示翻译按钮，点击按钮后才会弹出翻译结果；如果不勾选，那么划词后会直接弹出翻译结果。"})]}),(0,P.jsx)(S.c,{label:"按钮显示位置",helperText:"如果翻译按钮遮挡了其它扩展程序的按钮，你可以调整它的位置。设置为负数可以让按钮向下 / 向右偏移。",children:(0,P.jsxs)("div",{className:"btn-offset-option",children:["向上偏移：",(0,P.jsx)(xt.A,{disabled:o||!n.button,value:n.buttonOffsetTop,onValueChange:e=>{s({buttonOffsetTop:e})},rightElement:(0,P.jsx)(pt.V,{children:"像素"})}),"向左偏移：",(0,P.jsx)(xt.A,{disabled:o||!n.button,value:n.buttonOffsetLeft,onValueChange:e=>{s({buttonOffsetLeft:e})},rightElement:(0,P.jsx)(pt.V,{children:"像素"})})]})}),(0,P.jsxs)(S.c,{children:[(0,P.jsx)(ht.XZ,{disabled:o||!n.button,label:"自动隐藏",checked:n.buttonAutoClose,onChange:e=>{s({buttonAutoClose:e.target.checked})}}),(0,P.jsx)("p",{className:`${h.kjJ} ${h.Tio}`,children:"勾选后，翻译按钮会在 2 秒后自动隐藏。"})]})]}),(0,P.jsx)(Ft,{})]}):null}var Ot=n(89933),zt=n(97276);const Kt=(0,E.Z)(N.qI,["pageTrsApiOptions","pageTrsEditable","pageTrsSource","pageTrsDest","pageTrsPanelPos"]);function Ut(){const[e,t]=(0,D.Z)(Kt);return(0,P.jsxs)("div",{style:{margin:15},children:[(0,P.jsxs)(Me.U,{title:"关于网页全文翻译功能",style:{marginBottom:15},children:["网页全文翻译功能可以一次性翻译整个网页内的文本。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/guides/page",target:"_blank",rel:"noreferrer noopener",children:"查看网页全文翻译功能介绍"})]}),(0,P.jsx)(x.Z,{children:(0,P.jsx)(S.c,{label:"突出显示译文",helperText:(0,P.jsxs)(P.Fragment,{children:["此选项已被",(0,P.jsx)("a",{href:(0,o.oQ)("/appearance"),children:"外观 - 网页全文翻译 - 译文样式"}),"替代。"]})})}),(0,P.jsx)(x.Z,{children:(0,P.jsx)(S.c,{inline:!0,children:(0,P.jsx)(ht.XZ,{label:"让译文可编辑",checked:e?e.pageTrsEditable:Kt.pageTrsEditable,onChange:e=>{t({pageTrsEditable:e.target.checked})}})})}),(0,P.jsx)(x.Z,{children:(0,P.jsx)(S.c,{label:"可供选择的翻译服务",helperText:"注意：此设置项只是用来减少切换翻译服务时的下拉框选项个数的。如果你是想切换网页全文翻译使用的翻译服务，请在开启全文翻译后，将鼠标移动到网页右下角的划词翻译图标上。",children:(0,P.jsx)(Ot.f,{noBingDict:!0,selectedAPIs:(null==e?void 0:e.pageTrsApiOptions)||[],onChange:e=>{t({pageTrsApiOptions:e})}})})}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(S.c,{label:"源语种",inline:!0,children:(0,P.jsx)(zt.Z,{size:"middle",addAuto:!0,lang:e?e.pageTrsSource:Kt.pageTrsSource,setLang:e=>{t({pageTrsSource:e})}})}),(0,P.jsx)(S.c,{label:"目标语种",inline:!0,children:(0,P.jsx)(zt.Z,{size:"middle",lang:e?e.pageTrsDest[0]:Kt.pageTrsDest[0],setLang:e=>{t({pageTrsDest:[e]})}})})]}),(0,P.jsx)(x.Z,{children:(0,P.jsx)(S.c,{label:"控制面板位置",inline:!0,children:(0,P.jsxs)(ee.E,{inline:!0,onChange:e=>{t({pageTrsPanelPos:e.target.value})},selectedValue:e?e.pageTrsPanelPos:Kt.pageTrsPanelPos,children:[(0,P.jsx)(ht.Y8,{label:"右下",value:"bottom-right"}),(0,P.jsx)(ht.Y8,{label:"左下",value:"bottom-left"})]})})})]})}function Vt(){const{t:e}=(0,l.$G)(),t=(0,B.Z)((()=>f().extension.isAllowedIncognitoAccess()),[]);return t.loading||!t.value||t.error?null:(0,P.jsx)(Me.U,{icon:"info-sign",title:e("permission.incognitoTipTitle"),children:(0,P.jsx)("p",{children:e("permission.incognitoTip")})})}const Bt=(0,E.Z)(N.qI,["pdfStandalone"]);function Mt(){const[e,t]=(0,D.Z)(Bt);return(0,P.jsx)(S.c,{helperText:"默认情况下，划词翻译会在新标签页中打开内置 PDF 阅读器，勾选此选项后则会在一个单独的窗口中打开，此窗口是类似于独立翻译窗口那种没有工具栏的窗口。",children:(0,P.jsx)(ht.XZ,{inline:!0,label:"在单独的窗口中打开",checked:e?e.pdfStandalone:Bt.pdfStandalone,onChange:e=>{t({pdfStandalone:e.target.checked})}})})}const $t=(0,E.Z)(N.qI,["pdfAuto","pdfSnifferEnable"]);function Ht(){const[e,t]=(0,D.Z)($t);return(0,P.jsxs)("div",{style:{margin:15},children:[(0,P.jsxs)(Me.U,{title:"关于内置 PDF 阅读器",style:{marginBottom:15},children:["在内置 PDF 阅读器中打开的 PDF 文件能正常使用网页划词 / 截图翻译等功能。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/guides/pdf",target:"_blank",rel:"noreferrer noopener",children:"查看 PDF 翻译功能介绍"})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(S.c,{helperText:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("p",{children:"开启后，点击一个 PDF 文件链接或将 PDF 文件拖放到浏览器中时，会自动跳转到划词翻译的内置 PDF 阅读器。"}),(0,P.jsx)("div",{children:"小提示：如果你希望打开划词翻译内置 PDF 阅读器的同时可以保留浏览器的原生 PDF 页面，那么你可以关闭此选项，并开启下方的“检测网页中的 PDF”。这样一来，划词翻译会在浏览器的原生 PDF 页面中提示你是否要在内置 PDF 阅读器中打开，打开之后原生 PDF 页面仍然会保留。"})]}),children:(0,P.jsx)(ht.XZ,{label:"自动打开 PDF",checked:e?e.pdfAuto:$t.pdfAuto,onChange:e=>{t({pdfAuto:e.target.checked})}})}),Ve?(0,P.jsx)(Ge,{}):(0,P.jsx)(We,{}),(0,P.jsx)(Vt,{}),(0,P.jsx)(Mt,{})]}),(0,P.jsx)(x.Z,{children:(0,P.jsx)(S.c,{helperText:"开启后，当网页里有 PDF 文件时，划词翻译会弹出在内置 PDF 阅读器里打开的提示。",children:(0,P.jsx)(ht.XZ,{label:"检测网页中的 PDF",checked:e?e.pdfSnifferEnable:$t.pdfSnifferEnable,onChange:e=>{t({pdfSnifferEnable:e.target.checked})}})})})]})}function qt(e){const{service:t}=e,[n,s]=(0,c.useState)(!1),[i,l]=(0,c.useState)(!0);if((0,c.useEffect)((()=>{t.pointsEnable&&(s(!0),t.pointsEnable.get().then((e=>{s(!1),l(e)})))}),[t]),!t.points)return(0,P.jsxs)("div",{children:[t.name,"暂不支持通过翻译积分使用。"]});const r=!t.secretKeys&&!t.free;return(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:[t.name,"支持购买翻译积分直接使用。"]}),(0,P.jsx)(we.u,{interactionKind:"hover-target",lazy:!0,content:(0,P.jsx)("div",{style:{width:250},children:r?`${t.name}只能通过翻译积分使用，无法停用。`:i?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("b",{children:"停用后"}),"，当你未配置密钥、或密钥免费额度用完后，划词翻译",(0,P.jsx)("b",{children:"不会"}),"自动消耗翻译积分使用",t.name,"。"]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("b",{children:"启用后"}),"，当你未配置密钥、或密钥免费额度用完后，划词翻译",(0,P.jsx)("b",{children:"会"}),"自动消耗翻译积分使用",t.name,"。"]})}),children:(0,P.jsx)(k.A,{loading:n,disabled:r,text:i?"停用":"启用",onClick:()=>{t.pointsEnable?(s(!0),t.pointsEnable.set(!i).then((()=>{l(!i),s(!1)}))):alert(`划词翻译内部错误：未给${t.name}声明启用 / 停用翻译积分的方法。`)}})}),(0,P.jsx)("a",{href:"https://hcfy.app/docs/services/tp#detail-prices",target:"_blank",rel:"noreferrer",style:{marginLeft:15},children:"查看价格"})]})}var Wt=n(99853);function Gt(e){const{secretKeys:t,onChange:n,info:s}=e;if(!s)return(0,P.jsx)("div",{children:"此服务暂不支持自行申请密钥使用。"});const i=function(e){let t=null;return e.some(((n,s)=>e.some(((e,i)=>{if(s!==i)return n.key===e.key?(t=[s,i],!0):void 0})))),t}(t),l=!!s.idLabel,r=!!s.deeplProLabel,a=3+(l?1:0)+(r?1:0);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:{textAlign:"right"},children:(0,P.jsx)(k.z,{icon:"add",intent:"primary",text:"添加密钥",onClick:()=>{n((0,_t.Uy)(t,(e=>{const t={key:""};l&&(t.id=""),r&&(t.deeplPro=!1),e.push(t)})))}})}),i&&(0,P.jsxs)(Me.U,{intent:"warning",children:["重复的",s.keyLabel,"：第 ",i[0]+1," 个跟第"," ",i[1]+1," 个"]}),(0,P.jsxs)(jt.v,{compact:!0,bordered:!0,striped:!0,style:{width:"100%"},children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{}),l&&(0,P.jsx)("th",{children:s.idLabel}),(0,P.jsx)("th",{children:s.keyLabel}),r&&(0,P.jsx)("th",{children:s.deeplProLabel}),(0,P.jsx)("th",{})]})}),(0,P.jsxs)("tbody",{children:[!t.length&&(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:a,style:{textAlign:"center"},children:"未配置过密钥"})}),t.map(((e,s)=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:s+1}),l&&(0,P.jsx)("td",{children:(0,P.jsx)(w.B,{value:e.id,onChange:e=>{const i=e.target.value.trim();n((0,_t.Uy)(t,(e=>{e[s].id=i})))}})}),(0,P.jsx)("td",{children:(0,P.jsx)(R,{value:e.key,onChange:e=>{const i=e.target.value.trim();n((0,_t.Uy)(t,(e=>{e[s].key=i})))}})}),r&&(0,P.jsx)("td",{children:(0,P.jsxs)(ee.E,{onChange:e=>{const i=e.target.value;n((0,_t.Uy)(t,(e=>{e[s].deeplPro="Pro"===i})))},selectedValue:e.deeplPro?"Pro":"Free",children:[(0,P.jsx)(ht.Y8,{label:"Free",value:"Free"}),(0,P.jsx)(ht.Y8,{label:"Pro",value:"Pro"})]})}),(0,P.jsx)("td",{children:(0,P.jsx)(k.z,{icon:"delete",onClick:()=>{n((0,_t.Uy)(t,(e=>{e.splice(s,1)})))}})})]},s)))]})]})]})}const Yt={[Wt.nV.ChatGPT]:{keyDocLink:"https://hcfy.app/docs/services/chatgpt",keyLabel:"Secret Key"},[Wt.nV.DeepL]:{keyDocLink:"https://hcfy.app/docs/services/deepl",keyLabel:"Authentication Key",deeplProLabel:"接口类型"},[Wt.nV.YouDao]:{keyDocLink:"https://hcfy.app/docs/services/youdao-api",idLabel:"应用 ID",keyLabel:"应用密钥"},[Wt.nV.QQ]:{keyDocLink:"https://hcfy.app/docs/services/qq-api",idLabel:"SecretId",keyLabel:"SecretKey"},[Wt.nV.BaiDu]:{keyDocLink:"https://hcfy.app/docs/services/baidu-api",idLabel:"APP ID",keyLabel:"密钥"},[Wt.nV.BaiDuPro]:{keyDocLink:"https://hcfy.app/docs/services/baidu-pro-api",idLabel:"APP ID",keyLabel:"密钥"},[Wt.nV.ALi]:{keyDocLink:"https://hcfy.app/docs/services/ali-api",idLabel:"AccessKey ID",keyLabel:"AccessKey Secret"},[Wt.nV.ALiPro]:{keyDocLink:"https://hcfy.app/docs/services/ali-pro-api",idLabel:"AccessKey ID",keyLabel:"AccessKey Secret"},[Wt.nV.CaiYun]:{keyDocLink:"https://hcfy.app/docs/services/caiyun-api",keyLabel:"Token"},[Wt.nV.HuoShan]:{keyDocLink:"https://hcfy.app/docs/services/hs-api",idLabel:"Access Key ID",keyLabel:"Secret Access Key"},[Wt.gu.BaiDu]:{keyDocLink:"https://hcfy.app/docs/services/baidu-ocr",idLabel:"API Key",keyLabel:"Secret Key"}};function Jt(e){const{service:t,summary:n}=e,[s,i]=(0,c.useState)(!1),[l,r]=(0,c.useState)([]),a=Yt[t.id];if((0,c.useEffect)((()=>{t.secretKeys&&t.secretKeys.get().then(r)}),[t]),!t.secretKeys)return(0,P.jsxs)("div",{children:[t.name,"暂不支持自行申请密钥使用。"]});const o=l.filter(t.secretKeys.isComplete).length;return(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:[o?(0,P.jsxs)(P.Fragment,{children:["已配置了"," ",(0,P.jsx)(pt.V,{round:!0,style:{fontSize:12},children:o})," ","个密钥。"]}):"未配置密钥。",n]}),(0,P.jsxs)("div",{children:[(0,P.jsx)(k.z,{onClick:()=>{t.id!==Wt.nV.ALiPro?t.id!==Wt.nV.BaiDuPro?i(!0):window.alert("百度翻译（专业版）与百度翻译的密钥是共用的，你只需要管理百度翻译的密钥即可。"):window.alert("阿里翻译（专业版）与阿里翻译的密钥是共用的，你只需要管理阿里翻译的密钥即可。")},children:"管理密钥"}),(null==a?void 0:a.keyDocLink)&&(0,P.jsx)("a",{href:a.keyDocLink,target:"_blank",rel:"noreferrer",style:{marginLeft:15},children:"查看申请步骤"})]}),(0,P.jsxs)(C.V,{title:`管理${t.name}的密钥`,isOpen:s,onClose:()=>{i(!1)},children:[(0,P.jsx)(Ie.a,{useOverflowScrollContainer:!0,children:(0,P.jsx)(Gt,{info:a,secretKeys:l,onChange:e=>{r(e),t.secretKeys?t.secretKeys.set(e):window.alert(`划词翻译内部错误：${t.name}不支持通过密钥使用，却给用户显示了填写密钥的弹窗。`)}})}),(0,P.jsx)(Fe.c,{minimal:!0,children:(0,P.jsx)("a",{href:"https://hcfy.app/docs/faqs/mutli-keys",target:"_blank",rel:"noreferrer",children:"填写多个密钥时，划词翻译是按照什么规则使用的？"})})]})]})}function Xt(e){const{service:t,onClick:n,active:s,summary:i,secretKeySummary:l}=e,[r,a]=(0,c.useState)("secretKey");return(0,c.useEffect)((()=>{t.secretKeys||(t.points?a("points"):t.free&&a("free"))}),[t]),(0,P.jsxs)(x.Z,{className:s?"active":void 0,children:[(0,P.jsxs)("div",{className:"utils-flex",style:{marginBottom:10},children:[(0,P.jsx)(pe.H4,{style:{marginBottom:0},children:t.name}),n&&(s?(0,P.jsx)(pt.V,{children:"已选择此服务"}):(0,P.jsx)(k.z,{small:!0,onClick:n,text:"选择此服务"}))]}),i&&(0,P.jsx)("div",{className:h.kjJ,children:i}),t.id!==Wt.gu.Tesseract&&(t.secretKeys||t.points||t.free)&&(0,P.jsxs)(tt.mQ,{id:t.id,selectedTabId:r,onChange:e=>a(e),children:[(0,P.jsx)(nt.O,{id:"secretKey",title:"免费申请",panel:(0,P.jsx)(Jt,{service:t,summary:l})}),(0,P.jsx)(nt.O,{id:"points",title:"翻译积分",panel:(0,P.jsx)(qt,{service:t})}),t.free&&(0,P.jsx)(nt.O,{id:"free",title:"免费试用",panel:(0,P.jsxs)("div",{children:[t.name,"支持",(0,P.jsx)("a",{href:"https://hcfy.app/docs/services/free/",target:"_blank",rel:"noreferrer",children:"免费试用"}),"。"]})})]})]})}function Qt(e){const{name:t,description:n,services:s,summaryMap:i,selectedStorageKey:l}=e,r=(0,c.useMemo)((()=>{if(l)return{[l]:N.qI[l]}}),[l]),[a,o]=(0,D.Z)(r),d=l?null==a?void 0:a[l]:void 0,h=(0,c.useCallback)((e=>{l&&o({[l]:e})}),[l,o]);return(0,P.jsxs)("div",{children:[(0,P.jsx)(pe.H2,{children:t}),n&&(0,P.jsx)("p",{children:n}),(0,P.jsx)("div",{className:"services-box",children:s.map((e=>{const t=e.id;return(0,P.jsx)(Xt,{service:e,summary:i.common[t],secretKeySummary:i.secretKey[t],active:d?d===t:void 0,onClick:l?()=>{h(t)}:void 0},t)}))})]})}var en=n(12244),tn=n(36023),nn=n(7279);const sn=["baiDuAppKey","baiDuOCRKey","youDaoAppKey","aLiApiKey","qqApiKey","cyApiToken","deeplKey","hsApiKey","chatGPTKey"],ln="3ehd39ehd";function rn(e){return"string"==typeof e?!e:"secret"in e?!e.secret&&!e.key:null==e.id?!e.key:!e.key&&!e.id}async function an(){const e=await f().storage.local.get(sn);if(t=e,Object.keys(t).every((e=>{const n=t[e];return(Array.isArray(n)?n:[n]).every(rn)})))throw new Error("未配置过服务，无需导出。");var t;const n=JSON.stringify(e);if(!await f().runtime.sendMessage({action:"write to clipboard",text:tn.AES.encrypt(n,ln).toString()}))throw new Error("复制进剪切板失败。")}const cn=(0,A.RN)(),on=()=>{an().then((()=>{cn.then((e=>{e.show({intent:"success",message:"已将配置信息复制进剪切板。"})}))}),(e=>{cn.then((t=>{t.show({intent:"warning",message:e.message})}))}))};function dn(e){const{onImported:t}=e,[n,s]=(0,c.useState)(!1),[i,l]=(0,c.useState)(""),[r,a]=(0,c.useState)((()=>!!localStorage.getItem("exportkeystip"))),[o,d]=(0,c.useState)(!1);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(k.z,{icon:"export",onClick:()=>{r?on():d(!0)},style:{marginRight:10},children:"导出"}),(0,P.jsxs)(xe.b,{intent:"primary",confirmButtonText:"继续",isOpen:o,onConfirm:()=>{a(!0),localStorage.setItem("exportkeystip","1"),d(!1),on()},children:[(0,P.jsxs)("p",{children:["你可以将你的服务配置导出并导入进另一个浏览器的划词翻译里，",(0,P.jsx)("b",{children:"请不要将配置信息发送给其他人！"})]}),(0,P.jsxs)("p",{children:["另外，",(0,P.jsx)("b",{children:"不要将划词翻译 v8.7.0 及以上版本的配置导入到低于 v8.7.0 版本的划词翻译当中。"})]})]}),(0,P.jsx)(k.z,{icon:"import",onClick:()=>{s(!0)},children:"导入"}),(0,P.jsx)(C.V,{title:"导入服务配置",isOpen:n,onClose:()=>{s(!1)},onClosed:()=>{l("")},children:(0,P.jsxs)("form",{onSubmit:e=>{e.preventDefault(),async function(e){const t=tn.AES.decrypt(e,ln).toString(tn.enc.Utf8);let n;try{n=(0,E.Z)(JSON.parse(t),sn)}catch(e){throw new Error("配置信息有误，无法导入。Code 1")}if((0,nn.Z)(n))throw new Error("配置信息有误，无法导入。Code 2");await f().storage.local.set(n)}(i).then((()=>{cn.then((e=>{e.show({intent:"success",message:"导入成功。"})})),s(!1),null==t||t()}),(e=>{cn.then((t=>{t.show({intent:"danger",message:e.message})}))}))},children:[(0,P.jsx)("div",{className:h.TmF,children:(0,P.jsx)(en.K,{placeholder:"请将配置信息粘贴到这里。",fill:!0,required:!0,value:i,onChange:e=>{l(e.target.value)},autoFocus:!0})}),(0,P.jsx)("div",{className:h.Alt,children:(0,P.jsx)("div",{className:h.e$L,children:(0,P.jsx)(k.z,{intent:"primary",type:"submit",text:"导入"})})})]})})]})}var hn=n(51813),un=n(80432),xn=n(25130),pn=n.n(xn),jn=n(65366);const mn=pn()("web-speech"),gn=window.SpeechRecognition||window.webkitSpeechRecognition,fn=!!gn;var yn=function(e){return e.zh="cnm-Hans-CN",e.enUS="en-US",e.ja="ja-JP",e.ko="ko-KR",e.fr="fr-FR",e.de="de-DE",e.ru="ru-RU",e}(yn||{});const vn={[yn.zh]:"中文(简体)",[yn.enUS]:"英语(美国)",[yn.ja]:"日语",[yn.ko]:"韩语",[yn.fr]:"法语",[yn.de]:"德语",[yn.ru]:"俄语"},bn={"audio-capture":"你的电脑没有连接麦克风。","no-speech":"没有检测到语音。","not-allowed":"请在浏览器询问是否允许使用麦克风时选择“允许”。如果你之前选择过“禁止”，请点击浏览器地址栏左侧的锁或感叹号图标，然后将“麦克风”改为“允许”。如果浏览器从未询问过，则说明当前页面由于未知的原因不允许使用麦克风。","service-not-allowed":"你的浏览器当前不允许使用划词翻译的内置语音识别服务。",network:"网络出错，请检查你的网络连接。注意：划词翻译内置的语音转文字服务需要能连接外网才可使用。","language-not-supported":"你的浏览器不支持识别此语种。",aborted:"识别过程被中断了。","bad-grammar":"语法错误。"},kn=/\S/;const Tn={id:Wt.of.WebSpeech,name:"划词翻译内置语音转文字",realtime:!0,defaultLang:yn.zh};class Cn extends jn.Z{constructor(){super(Tn)}async microphone(e){const{lang:t,options:n}=e;if(!fn)throw new Error("划词翻译的内置语音转文字服务不支持在 Firefox 上使用，请选用腾讯云语音转文字服务。");let s=!1,i=!1;const l=new gn;l.lang=t,l.interimResults=!!n.onInterim,l.continuous=!n.stopOnFirstSentence,l.addEventListener("error",(e=>{var t;mn("error 事件",e),"aborted"===e.error&&s||(s=!0,null===(t=n.onError)||void 0===t||t.call(n,new Error(`${bn[e.error]||e.error+". "}${e.message||""}`)))}));const r=[];return l.addEventListener("result",(e=>{const t=e.results[e.resultIndex],s=t[0].transcript;if(t.isFinal){var i;const e=s.replace(kn,(function(e){return e.toUpperCase()}));mn("识别到一句完整的话：",e),null===(i=n.onSentence)||void 0===i||i.call(n,e),r.push(e)}else{var l;mn("识别到一句话的临时结果：",s),null===(l=n.onInterim)||void 0===l||l.call(n,s)}})),l.addEventListener("nomatch",(e=>{var t;mn("nomatch 事件",e),i=!0,null===(t=n.onError)||void 0===t||t.call(n,new Error(`${this.service.name}无法准确识别你的语音，请确保在安静的环境中，并吐字清晰。`))})),l.addEventListener("end",(e=>{var t;mn("end 事件",e,"识别出来的文本：",r,`是否已经中断：${s}`,`是否已经 nomatch：${i}`),s||i||null===(t=n.onStop)||void 0===t||t.call(n,r)})),l.start(),{stop:()=>{mn("调用 stop 方法"),l.stop()},abort:()=>{mn("调用 abort 方法"),s=!0,l.abort()}}}mediaStream(e){return Promise.reject(new Error("划词翻译的内置语音转文字服务只支持通过麦克风使用。"))}}const Sn=new Cn,wn=[Tn,un.Ty];Wt.of.WebSpeech,Wt.of.TencentRealtime,un.Uz,Wt.of.WebSpeech,Wt.of.TencentRealtime,un.PK;var Ln=n(40048),_n=n(24370),En=n(88120);const Pn={workerPath:"worker.min.js",corePath:"tesseract-core.js",langPath:"https://tessdata.projectnaptha.com/4.0.0_best",workerBlobURL:!1},Rn={id:Wt.gu.Tesseract,name:"Tesseract OCR",free:!0};class An extends En.E{constructor(){super(Rn)}async callByFree(e){const t=await(0,_n.createWorker)(Pn);await t.loadLanguage(e.lang),await t.initialize(e.lang),await t.setParameters({tessjs_create_hocr:"0",tessjs_create_tsv:"0",preserve_interword_spaces:"1"});const n=await t.recognize(e.image);return t.terminate(),n.data}transform(e){return e.paragraphs.map((e=>e.text.trim().replace(/\r?\n/g," "))).join("\n")}}new An;const In=[Rn,Ln.FC],Fn=(0,E.Z)(N.d6,["tipForServicesUpdateClosed"]);function Zn(){const[e,t]=(0,c.useState)(!1);return(0,c.useEffect)((()=>{f().storage.local.get(Fn).then((({tipForServicesUpdateClosed:e})=>{e||t(!0)}))}),[]),(0,P.jsxs)(C.V,{title:"从 v8.7.0 起，划词翻译对第三方服务做了一些改进",isOpen:e,canEscapeKeyClose:!1,canOutsideClickClose:!1,isCloseButtonShown:!1,children:[(0,P.jsx)("div",{className:h.TmF,children:(0,P.jsxs)(pe.UL,{children:[(0,P.jsx)("li",{children:"现已支持填写多组密钥。"}),(0,P.jsxs)("li",{children:[(0,P.jsx)("p",{children:"当一个服务的所有密钥都报错之后（例如密钥填写有误、免费额度用完了等错误），划词翻译会自动消耗翻译积分使用此服务。如果你不希望这样，你可以停用某个服务的翻译积分。"}),(0,P.jsx)("div",{className:h.kjJ,children:"每个服务的翻译积分都是默认启用的，但如果你在上个版本中给某个服务填写过密钥，那么划词翻译会停用此服务的翻译积分，避免在你不知情的情况下消耗你的积分。你可以给这些服务重新启用翻译积分。"})]})]})}),(0,P.jsx)("div",{className:h.Alt,children:(0,P.jsx)("div",{className:h.e$L,children:(0,P.jsx)(k.z,{intent:"primary",onClick:()=>{t(!1),f().storage.local.set({tipForServicesUpdateClosed:!0})},children:"我知道了"})})})]})}const Nn={[Wt.nV.BaiDuPro]:(0,P.jsx)("p",{children:"支持五个专业领域：网络文学、金融财经、科技电子、水利机械、生物医药。"}),[Wt.nV.BingDict]:(0,P.jsx)("p",{children:"仅有词典，无法用于翻译句子。"}),[Wt.nV.ALiPro]:(0,P.jsx)("p",{children:"支持六个专业领域：电商 - 商品标题、电商 - 商品详情、电商 - 买卖家沟通、医疗、社交、金融。"}),[Wt.nV.YouDao]:(0,P.jsx)("p",{children:"支持中文词组翻译为英语词组（带拼音）；支持英语词典（带音标）。"}),[Wt.nV.SouGou]:(0,P.jsxs)("p",{children:["搜狗翻译已下线。",(0,P.jsx)("a",{href:"https://hcfy.app/blog/2021/11/23/sougou-off",target:"_blank",rel:"noreferrer",children:"查看公告"})]}),[Wt.gu.Tesseract]:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("p",{children:[(0,P.jsx)("a",{href:"https://github.com/tesseract-ocr/tesseract#readme",target:"_blank",rel:"noreferrer",children:"Tesseract OCR"})," ","无需翻译积分或密钥即可免费使用，但是："]}),(0,P.jsxs)(pe.UL,{children:[(0,P.jsx)("li",{children:"识别时间较长，大约需要 2 ~ 8 秒。"}),(0,P.jsx)("li",{children:"准确率相对较低。"}),(0,P.jsx)("li",{children:"不能自动判断图片里的语种，识别前需要手动指定。"}),(0,P.jsx)("li",{children:"会占用一定的系统资源，偶尔会导致电脑卡顿。"})]})]}),[Wt.gu.BaiDu]:(0,P.jsxs)(pe.UL,{children:[(0,P.jsx)("li",{children:"识别时间只需 1 秒不到。"}),(0,P.jsx)("li",{children:"准确率高。"}),(0,P.jsx)("li",{children:"能自动判断图片里的语种，无需手动指定。"}),(0,P.jsx)("li",{children:"不占用系统资源。"})]}),[Wt.of.WebSpeech]:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("p",{children:"划词翻译内置的语音转文字服务无需翻译积分或密钥即可免费使用，但是："}),(0,P.jsxs)(pe.UL,{children:[(0,P.jsx)("li",{children:"需要能连接外网才能使用。"}),(0,P.jsx)("li",{children:"只能通过麦克风使用，不能用于音视频翻译功能。"}),(0,P.jsx)("li",{children:"不支持 Firefox 浏览器。"})]})]}),[Wt.of.TencentRealtime]:(0,P.jsxs)(pe.UL,{children:[(0,P.jsx)("li",{children:"无需连接外网即可使用。"}),(0,P.jsx)("li",{children:"既可以通过麦克风使用，也可以用于音视频翻译功能。"}),(0,P.jsx)("li",{children:"支持 Firefox 浏览器。"})]})};function Dn(){const{setShowBuyPoints:e}=(0,c.useContext)(ge),[t]=(0,et.lr)(),n=t.get("buy");(0,c.useEffect)((()=>{n&&e(!0)}),[e,n]);const[s,i]=(0,c.useState)({common:Nn,secretKey:{}});(0,c.useEffect)((()=>{M.get("/summaryv2.json").then((e=>{i((0,_t.Uy)((t=>{t.secretKey=e.data.secretKey})))}))}),[]);const[l,r]=(0,c.useState)(!0),a=(0,c.useCallback)((()=>{r(!1),setTimeout((()=>{r(!0)}))}),[]);return(0,P.jsxs)("div",{id:"services",children:[(0,P.jsx)(Zn,{}),(0,P.jsxs)(Me.U,{title:"关于第三方服务",children:[(0,P.jsxs)("p",{children:["划词翻译的部分功能依赖下面这些第三方服务，你需要自行申请之后才能使用它们（免费）。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/faqs/why-apply",target:"_blank",rel:"noreferrer noopener",children:"为什么这些服务需要自行申请之后才能使用？"})]}),(0,P.jsxs)("p",{children:["你也可以",(0,P.jsx)(k.z,{style:{margin:"0 5px"},intent:"primary",small:!0,onClick:()=>{e(!0)},children:"购买翻译积分"}),"直接使用这些服务，但这不是必须的。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/services/tp",target:"_blank",rel:"noreferrer",children:"查看翻译积分的介绍"})]}),(0,P.jsxs)("div",{children:["部分服务支持免费试用。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/services/free",target:"_blank",rel:"noreferrer",children:"查看免费试用的说明"})]})]}),(0,P.jsxs)(Me.U,{intent:"primary",icon:null,style:{margin:"15px 0"},children:["密钥配置信息：",(0,P.jsx)(dn,{onImported:a}),(0,P.jsx)("span",{className:`${h.Tio} ${h.kjJ}`,style:{marginLeft:15},children:"你可以将你配置的密钥导出并导入到另一个浏览器的划词翻译中。"})]}),l&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Qt,{name:"翻译服务",services:hn.Y,summaryMap:s}),(0,P.jsx)(Qt,{name:"图片转文字（OCR）服务",description:"截图翻译和图片翻译功能会使用你选择的服务将图片转为文字。",services:In,summaryMap:s,selectedStorageKey:"ocrService"}),(0,P.jsx)(Qt,{name:"语音转文字服务",description:"语音翻译和音视频翻译功能会使用这些服务将语音转为文字。",services:wn,summaryMap:s})]})]})}var On=n(14488),zn=n(59085);class Kn extends zn.ZP{constructor(){super("hcfy"),this.version(3).stores({historyRecords:"id,date,_id,syncStatus",favorites:"id,date,text,_id,syncStatus"}),this.historyRecords=this.table("historyRecords"),this.favorites=this.table("favorites")}}const Un=new Kn;n(43108);var Vn=n(23882),Bn=n(22168);const Mn=(e,t)=>{e._id?(e.deleted=!0,e.syncStatus=$n.Pending):delete t.value};let $n=function(e){return e.Pending="Pending",e}({});class Hn{constructor(e,t,n,s,i,l,r,a){this.table=e,this.syncKeys=t.concat("date"),this.getDataFromServer=n,this.syncTimeStorageKey=s,this.deleteData=i,this.commitChanges=l,this.pullChanges=r,this.deleteLogsFn=a}async add(e,t){const n={...e},s=Date.now();n.id=(0,Vn.Z)(s+"-"),n.date=s,n.syncStatus=$n.Pending,await this.table.add(n),t&&this.commit().catch(Bn.Z)}async deleteById(e,t){await this.table.where("id").anyOf(e).modify(Mn),t&&this.commit().catch(Bn.Z)}async deleteAll(e){let t;e&&(t=await this.deleteData()),await this.table.clear(),t&&await this.setSyncTime(t)}async deleteByKey(e,t,n){await this.table.where(e).equalsIgnoreCase(t).modify(Mn),n&&this.commit().catch(Bn.Z)}async hasByKey(e,t){return await this.table.where(e).equalsIgnoreCase(t).and((e=>!e.deleted)).count()>0}query(e,t,n){const s=t?this.table.where("date").below(t).reverse():this.table.orderBy("date").reverse();return s.filter(n?e=>!e.deleted&&n(e):e=>!e.deleted),s.limit(e).toArray()}async getSyncChanges(){const e=await this.table.where("syncStatus").equals($n.Pending).toArray(),t=[],n=[],s=[];return e.forEach((e=>{e._id?e.deleted&&s.push(e._id):(t.push((0,E.Z)(e,this.syncKeys)),n.push(e.id))})),{changes:{added:(0,nn.Z)(t)?void 0:t,deleted:(0,nn.Z)(s)?void 0:s},addedLocalIds:n}}addServerData(e){return Un.transaction("rw",this.table,(async()=>{const t=Date.now()+"-",n=e.map((e=>(e.id=(0,Vn.Z)(t),e._id)));await this.table.where("_id").anyOf(n).delete(),await this.table.bulkAdd(e)}))}async downloadData(e){const t=await this.getDataFromServer(e),n=t.list;return Array.isArray(n)&&n.length&&await this.addServerData(n),t.date}setSyncTime(e){return f().storage.local.set({[this.syncTimeStorageKey]:e})}async commit(){const{changes:e,addedLocalIds:t}=await this.getSyncChanges(),n=await this.commitChanges(e);(0,nn.Z)(n)||await this.table.where("id").anyOf(t).modify((e=>{const s=t.indexOf(e.id);s>=0&&(e._id=n[s],delete e.syncStatus)}))}async pull(e){const t=(await f().storage.local.get(this.syncTimeStorageKey))[this.syncTimeStorageKey];if(!t){const e=await this.downloadData();return await this.setSyncTime(e),this.deleteLogsFn(e).catch(Bn.Z),!0}if(!e)return!1;const{changes:n,date:s}=await this.pullChanges(t);let i;const l=n.reduce(((e,t)=>{var n,s;return t.deleteAll?(e.added.clear(),e.deleted.clear(),i=!0,e):(null===(n=t.added)||void 0===n||n.forEach((t=>{e.added.add(t)})),null===(s=t.deleted)||void 0===s||s.forEach((t=>{e.added.has(t)?e.added.delete(t):e.deleted.add(t)})),e)}),{added:new Set,deleted:new Set});let r,a=[];const c=!!l.added.size;l.added.size&&(a=await this.table.where("_id").anyOf(Array.from(l.added)).toArray(),a.forEach((e=>{l.added.delete(e._id)})),l.added.size&&(r=(await this.getDataFromServer(Array.from(l.added))).list));const o=i||!!r||!!l.deleted.size;return o&&await Un.transaction("rw",this.table,(async()=>{i&&(await this.table.clear(),!(0,nn.Z)(a)&&await this.table.bulkAdd(a));const e=[];return r&&e.push(this.addServerData(r)),l.deleted.size&&e.push(this.table.where("_id").anyOf(Array.from(l.deleted)).delete()),Promise.all(e)})),await this.setSyncTime(s),(o||c)&&this.deleteLogsFn(s).catch(Bn.Z),o}}const qn=new Hn(Un.favorites,["text","dir"],(async e=>(await L.L.post("/favorites",e)).data),"favoritesSyncAt",(async()=>(await L.L.delete("/favorites")).data),(async e=>(await L.L.put("/favorites",e)).data),(async e=>(await L.L.get("/favorites?lastCheck="+e)).data),(e=>L.L.delete("/favorites/logs?date="+e)));function Wn(e,t,n){let s;if(n){const e=n.toLocaleLowerCase();s=t=>{if(t.text.toLocaleLowerCase().includes(e))return!0;const n=t.results;return!!n&&Object.keys(n).some((t=>{var s,i;const l=n[t];return!!l&&(!(null===(s=l.dict)||void 0===s||!s.some((t=>t.terms.some((t=>t.includes(e))))))||!(null===(i=l.result)||void 0===i||!i.some((t=>t.includes(e)))))}))}}return qn.query(e,t,s)}var Gn=n(82228);const Yn=100,Jn={end:!0,rows:[],loading:!1,selectedRows:[],searchText:"",latestDate:void 0},Xn=(e,t)=>(0,_t.Uy)(e,(e=>{switch(t.type){case"reset":return Jn;case"set":return void t.cb(e);case"set latestDate":const n=(0,Gn.Z)(e.rows);return n?void(e.latestDate=n.date):void(e.latestDate=void 0);case"append data":if(e.end=t.data.length<Yn,!t.data.length)return;return void e.rows.push(...t.data);case"switch-check":const s=e.selectedRows.indexOf(t.id);return void(s>=0?e.selectedRows.splice(s,1):e.selectedRows.push(t.id))}}));function Qn(e,t,n){const[s,i]=(0,c.useState)(0),[l,r]=(0,c.useReducer)(Xn,Jn),a=(0,c.useCallback)((()=>{r({type:"set latestDate"})}),[]);(0,c.useEffect)((()=>{if(l.end)return;const e=()=>{document.documentElement.scrollTop+window.innerHeight===document.documentElement.scrollHeight&&a()};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[a,l.end]),(0,c.useEffect)((()=>{let t=!1;return r({type:"set",cb(e){e.loading=!0}}),e(Yn,l.latestDate,l.searchText).then((e=>{t||(r({type:"set",cb(e){e.loading=!1}}),r({type:"append data",data:e}))})),()=>{t=!0}}),[l.searchText,l.latestDate,s,e]);return(0,c.useEffect)((()=>{t&&n.pull(t.vipActivated).then((e=>{e&&(r({type:"reset"}),i((e=>e+1)))}))}),[n,t]),{tableData:l,queryNextPage:a,deleteSelected:()=>n.deleteById(l.selectedRows,!!t&&t.vipActivated).then((()=>{r({type:"set",cb(e){e.rows=e.rows.filter((e=>!l.selectedRows.includes(e.id))),e.selectedRows=[]}})})),clearData:()=>n.deleteAll(!!t).then((()=>{r({type:"set",cb(e){e.selectedRows=[],e.end=!0,e.rows=[],e.latestDate=void 0,e.searchText=""}})})),setSearchText:e=>{r({type:"set",cb(t){e!==t.searchText&&(t.end=!0,t.rows=[],t.searchText=e.trim(),t.latestDate=void 0)}})},cancelSelected:()=>{r({type:"set",cb(e){e.selectedRows=[]}})},switchCheck:e=>{r({type:"switch-check",id:e})}}}var es=n(72779),ts=n.n(es),ns=(n(96920),n(29671)),ss=n(853),is=n(48655);async function ls(e){f().runtime.sendMessage({action:"audio",url:e}).catch((e=>{window.alert("朗读时出错："+(null==e?void 0:e.message))}))}function rs(e){const t=e.uri,n=e.size,s=e.style;return(0,P.jsx)(k.z,{style:s,icon:(0,P.jsx)(J.I,{icon:"volume-up",size:hs[n]}),small:"small"===n,large:"large"===n,minimal:!0,disabled:!t,onClick:t?()=>ls(t):void 0,title:t?"朗读":"不支持此语种"})}function as(e,t){const n="GoogleWeb"===t,s=[];return!e.phonetic||n&&!e.dict||s.push(e.phonetic.map((e=>`${e.name?e.name+" ":""}/${e.value}/`))),e.dict?s.push(...e.dict.map((e=>`${e.pos?e.pos+(n?": ":" "):""}${e.terms.join(", ")}`))):e.result&&s.push(...e.result),f().runtime.sendMessage({action:"write to clipboard",text:s.join("\n")})}function cs(e){e.stopPropagation()}const os=/\b[A-Z\s\-'a-z]+\b/g;function ds(e,t){const n=Array.from(e.matchAll(os)),s=e.split(os);return(0,P.jsx)(P.Fragment,{children:s.map(((e,s)=>{const i=n[s];return(0,P.jsxs)(c.Fragment,{children:[e,i?(0,P.jsx)("a",{onClick:()=>t(i[0]),children:i[0]}):""]},s)}))})}const hs={small:12,middle:16,large:20};function us(e){switch(e){case"美":return"英语(美国)";case"英":return"英语(英国)";default:return}}const xs={...(0,E.Z)(N.qI,"googleHidePhonetic"),...(0,E.Z)(N.d6,["tipForGoogleTranslateClosed","tipForDeepLLimitClosed"])};function ps(e){var t;const{apiId:n,result:{loading:s,result:i}={loading:!1,result:null},queryResult:l,autoCopy:r=!1,autoPlay:a=!1,wordClickable:o=!0,setQuery:d=Bn.Z,size:u="small",collapse:p,onCollapseChange:j,portalContainer:m}=e,[g,f]=(0,D.Z)(xs),y=hs[u],v="small"===u,b="large"===u,[T,C]=(0,c.useState)("duplicate"),[S,w]=(0,c.useState)(),L=hn.Y.find((e=>e.id===n))||{name:n,id:n},_="GoogleWeb"===n&&!(null==g||!g.googleHidePhonetic),E=()=>{C("tick"),w("success"),window.setTimeout((()=>{C("duplicate"),w(void 0)}),1e3)};(0,c.useEffect)((()=>{var e;i&&(a&&i.text.length<30&&ls({apiId:n,source:i.from,text:i.text,ttsURI:(null===(e=i.phonetic)||void 0===e?void 0:e[0].ttsURI)||i.ttsURI}))}),[n,a,i]),(0,c.useEffect)((()=>{i&&r&&as(i,n).then((e=>{e?E():window.alert("自动复制翻译结果失败，请稍后重试。")}),(e=>{window.alert(`自动复制翻译结果时发生了一个错误：${null==e?void 0:e.message}`)}))}),[i,r,n]);const R=ss.q[n];return(0,P.jsxs)(x.Z,{className:"result-block",onClick:cs,children:["GoogleWeb"===n&&!(null!=g&&g.tipForGoogleTranslateClosed)&&(0,P.jsxs)(Me.U,{intent:"warning",icon:null,children:[(0,P.jsx)("p",{children:"谷歌翻译可能需要额外配置才能使用。"}),(0,P.jsx)(k.A,{small:!0,style:{visibility:"visible"},intent:"primary",href:"https://hcfy.app/blog/2022/09/28/ggg",target:"_blank",children:"查看详情"}),(0,P.jsx)("a",{style:{marginLeft:15},onClick:()=>{f({tipForGoogleTranslateClosed:!0})},children:"不再提示"})]}),"DeepLWeb"===n&&!(null!=g&&g.tipForDeepLLimitClosed)&&(0,P.jsxs)(Me.U,{intent:"warning",icon:null,children:[(0,P.jsx)("p",{children:"DeepL 首次翻译速度较慢，请耐心等待。若遇到问题（报错、翻译结果不全等）请点击下方按钮。"}),(0,P.jsx)(k.A,{small:!0,style:{visibility:"visible"},intent:"primary",href:"https://hcfy.app/docs/services/free/#deepl",target:"_blank",children:"查看解决方案"}),(0,P.jsx)("a",{style:{marginLeft:15},onClick:()=>{f({tipForDeepLLimitClosed:!0})},children:"不再提示"})]}),(0,P.jsxs)("div",{className:"legend",children:[(0,P.jsxs)("div",{className:"legend-left",children:[(0,P.jsx)("span",{className:"api-ico",style:R?{backgroundImage:`url(${R})`}:void 0}),(0,P.jsx)(pe.H6,{children:L.name}),i&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(zt.Z,{lang:i.from,setLang:l,size:"small",maxHeight:212,portalContainer:m,children:(0,P.jsxs)("span",{className:"source",children:[(0,P.jsx)("span",{className:"source-text",children:i.from}),(0,P.jsx)(J.I,{icon:"caret-down",size:12})]})}),(0,P.jsx)(rs,{uri:{apiId:n,source:i.from,text:i.text,ttsURI:(null===(t=i.phonetic)||void 0===t?void 0:t[0].ttsURI)||i.ttsURI},size:u})]})]}),(0,P.jsxs)("div",{style:{flexShrink:0},children:[void 0!==p&&(0,P.jsx)(k.z,{minimal:!0,small:v,large:b,title:p?"展开":"收起",onClick:()=>{j&&j(!p)},icon:(0,P.jsx)(J.I,{icon:p?"chevron-down":"chevron-up",size:y+2})}),(0,P.jsx)(k.z,{onClick:()=>{i&&as(i,n).then((e=>{e?E():window.alert("复制翻译结果失败，请稍后重试。")}),(e=>{window.alert(`复制翻译结果时发生了一个错误：${null==e?void 0:e.message}`)}))},disabled:!i||!!i.error,icon:(0,P.jsx)(J.I,{icon:T,size:y}),minimal:!0,small:v,large:b,intent:S,title:"复制翻译结果"}),(0,P.jsx)(k.A,{disabled:!(null!=i&&i.link),target:"_blank",href:(null==i?void 0:i.link)||"",icon:(0,P.jsx)(J.I,{icon:"share",size:y}),minimal:!0,small:v,large:b,title:"查看详细结果"})]})]}),(0,P.jsxs)(ut.U,{isOpen:!p,children:[(0,P.jsxs)("div",{style:{display:s?"block":"none"},children:[(0,P.jsx)("p",{className:ts()({[h.Ms1]:s}),children:"1"}),(0,P.jsx)("p",{className:ts()({[h.Ms1]:s}),style:{width:"150px"},children:"1"})]}),(null==i?void 0:i.error)&&(0,P.jsx)("div",{className:"error",children:(0,P.jsx)(is.i,{error:i.error,onRetry:()=>l()})}),(null==i?void 0:i.phonetic)&&!_&&(0,P.jsx)("div",{className:"phonetic",children:i.phonetic.map(((e,t)=>(0,P.jsxs)("div",{className:"phonetic-item",style:{maxWidth:"100%"},children:[e.name&&(0,P.jsx)("span",{style:{flexShrink:0,marginRight:5},children:e.name}),e.value&&(0,P.jsxs)(ns.Z,{children:["/",e.value,"/"]}),e.ttsURI&&(0,P.jsx)(rs,{style:{flexShrink:0},uri:{apiId:n,source:us(e.name)||i.from,text:i.text,ttsURI:e.ttsURI},size:u})]},t)))}),i&&(0,P.jsxs)("div",{className:"common-result",children:[i.dict&&(0,P.jsx)("div",{className:"dict",children:i.dict.map(((e,t)=>{const s=e.terms.join(", ");return(0,P.jsxs)("p",{children:[e.pos&&(0,P.jsxs)("span",{className:"dict-pos",children:[e.pos,"GoogleWeb"===n?": ":""]}),o?ds(s,d):s]},t)}))}),!i.dict&&i.result&&(0,P.jsx)("div",{className:"general-result",children:i.result.map(((e,t)=>(0,P.jsxs)("p",{children:[e,(0,P.jsx)(rs,{uri:{text:e,apiId:n,source:null==i?void 0:i.to},size:u})]},t)))})]})]})]})}const js=["GoogleWeb","BingDictWeb"],ms=async(e,t,n,s)=>{try{return await f().runtime.sendMessage({action:"translate",data:{apiCode:t,text:e,source:n,destinations:[s]}})}catch(e){}};function gs(e){const{item:t,selected:n,switchSelected:s}=e,[i,l]=(0,c.useState)({});return(0,c.useEffect)((()=>{t.results&&l(t.results)}),[t]),(0,c.useEffect)((()=>{if(t.results)return;const e=t.dir;if(e){const n={};Promise.all(js.map((s=>ms(t.text,s,e.from,e.to).then((e=>{e&&(n[s]=e)}))))).then((()=>{l(n),qn.table.update(t.id,{results:n})}))}}),[t]),(0,P.jsxs)(x.Z,{className:ts()("favorite-item",{active:n}),interactive:!0,onClick:()=>{s(t.id)},children:[(0,P.jsx)(pe.H4,{children:t.text}),Object.keys(i).map((e=>(0,P.jsx)(ps,{apiId:e,result:{loading:!1,result:i[e]||null},queryResult:Bn.Z,wordClickable:!1},e)))]})}const fs=(0,E.Z)(N.qI,["favoritesEnabled"]);function ys(){const[e,t]=(0,D.Z)(fs),n=e||fs,{setShowVip:s}=(0,c.useContext)(ge),i=(0,c.useContext)(O),[l,r]=(0,c.useState)(!1),[a,o]=(0,c.useState)(!1),{tableData:d,queryNextPage:h,deleteSelected:u,clearData:x,setSearchText:p,cancelSelected:j,switchCheck:m}=Qn(Wn,i,qn);return(0,P.jsxs)("div",{id:"favorites",children:[(0,P.jsx)(xe.b,{cancelButtonText:"取消",confirmButtonText:"确定",intent:"danger",isOpen:l,icon:"trash",onClose:e=>{e&&u(),r(!1)},children:(0,P.jsx)("p",{children:"确定要删除吗？"})}),(0,P.jsx)(xe.b,{cancelButtonText:"取消",confirmButtonText:"确定",icon:"trash",intent:"danger",isOpen:a,onClose:e=>{e&&x(),o(!1)},children:(0,P.jsx)("p",{children:"确定要清空收藏夹吗？"})}),(0,P.jsxs)("div",{className:"actions",children:[(0,P.jsxs)("div",{className:"actions-left",children:[(0,P.jsx)(w.B,{className:"search-input",placeholder:"搜索收藏夹",rightElement:d.searchText?(0,P.jsx)(k.z,{icon:"cross",minimal:!0,onClick:()=>{p("")}}):void 0,value:d.searchText,onChange:e=>{const t=e.target.value;p(t)}}),d.selectedRows.length?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(k.z,{text:`删除选中的收藏（${d.selectedRows.length}）`,intent:"primary",style:{marginLeft:"10px"},onClick:()=>{r(!0)}}),(0,P.jsx)(k.z,{style:{margin:"0 10px"},text:"取消选择",onClick:j}),(0,P.jsx)(k.z,{intent:"danger",text:"清空收藏夹",onClick:()=>{o(!0)}})]}):void 0]}),(0,P.jsxs)("div",{className:"actions-right",children:[!(null!=i&&i.vipActivated)&&(0,P.jsx)("a",{style:{marginRight:15},onClick:()=>s(!0),children:"将收藏夹同步到云端"}),(0,P.jsx)(ht.XZ,{label:"启用收藏功能",inline:!0,checked:n.favoritesEnabled,onChange:e=>{t({favoritesEnabled:e.target.checked})}})]})]}),(0,P.jsx)("div",{className:"actions-bg",style:{height:"60px"}}),(0,P.jsx)("div",{className:"favorite-list",children:d.rows.map((e=>(0,P.jsx)(gs,{item:e,selected:d.selectedRows.includes(e.id),switchSelected:m},e.id)))}),!d.loading&&!d.end&&(0,P.jsx)(k.z,{onClick:h,text:"加载更多"}),d.loading&&(0,P.jsx)(On.$,{}),!d.loading&&!d.rows.length&&(0,P.jsx)(ke.t,{icon:"blank",title:d.searchText?"没有搜索结果":"无收藏",description:n.favoritesEnabled?"如果你不需要收藏功能，可以取消勾选上方的“启用收藏功能”，这样翻译面板上的收藏图标就会消失。":""})]})}const vs=ze?Ke?"https://microsoftedge.microsoft.com/addons/detail/oikmahiipjniocckomdccmplodldodja":"https://chrome.google.com/webstore/detail/ikhdkkncnoglghljlkmcimlnlhkeamad":"https://addons.mozilla.org/zh-CN/firefox/addon/hcfy/";function bs(){return(0,P.jsxs)("div",{style:{margin:"15px"},children:[(0,P.jsx)(pe.H2,{id:"关于",children:"关于划词翻译"}),(0,P.jsx)("p",{children:"划词翻译是一款简单好用的翻译软件，支持桌面端的 Chrome、Edge 和 Firefox 浏览器。"}),(0,P.jsxs)("p",{children:["划词翻译由我个人创建于 2013 年，并持续维护至今。",(0,P.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://hcfy.app/docs/histroy",children:"查看划词翻译大事记"})]}),(0,P.jsx)("p",{children:"如果你觉得划词翻译很好用，请给它一个五星好评！"}),(0,P.jsx)("p",{children:(0,P.jsx)(k.A,{text:"给划词翻译一个五星好评",href:vs,target:"_blank",rel:"noreferrer"})})]})}function ks(e){const{setShowVip:t}=(0,c.useContext)(ge),n=(0,c.useContext)(O),s=e.forever?"永久":"";return(e.forever?null==n?void 0:n.forever:null==n?void 0:n.vipActivated)?(0,P.jsxs)(P.Fragment,{children:["你已经是",s,"会员了，可以使用此功能。",!(null!=n&&n.forever)&&(0,P.jsx)("a",{onClick:()=>t(!0),children:"续费会员"})]}):(0,P.jsxs)(P.Fragment,{children:["这是一个",s,"会员功能，请在",(0,P.jsxs)("a",{onClick:()=>t(!0),children:["成为",s,"会员"]}),"后使用。"]})}const Ts=(0,P.jsx)(we.u,{interactionKind:"hover",hoverCloseDelay:300,content:(0,P.jsx)(ks,{}),children:(0,P.jsx)(pt.V,{style:{top:"3px"},icon:"crown",children:"会员功能"})});we.u,pt.V;n(90103);var Cs=n(62084),Ss=function(e){return e.g="g",e.i="i",e.m="m",e}(Ss||{});const ws=[Ss.g,Ss.i,Ss.m],Ls={[Ss.g]:"全局匹配",[Ss.i]:"忽略大小写",[Ss.m]:"多行匹配"},_s=e=>Ls[e];function Es(e){const{selected:t,setSelected:n}=e,s=(0,c.useCallback)((e=>{n((t=>{const n=t.indexOf(e);return n<0?t:t.slice(0,n)+t.slice(n+1)}))}),[n]),i=(0,c.useCallback)(((e,{handleClick:n,modifiers:s})=>(0,P.jsx)(j.s,{icon:t.includes(e)?"tick":"blank",onClick:n,active:s.active,text:Ls[e]},e)),[t]);return(0,P.jsx)(Cs.N,{tagRenderer:_s,tagInputProps:{inputProps:{readOnly:!0}},items:ws,onRemove:s,itemRenderer:i,onItemSelect:e=>{n((t=>{const n=t.indexOf(e);return n<0?t+e:t.slice(0,n)+t.slice(n+1)}))},selectedItems:t.split("")})}const Ps={pattern:"",flags:"gi",replaceTo:""};function Rs(e){const{show:t,hideDialog:n,onAdd:s}=e,[i,l]=(0,c.useState)(Ps),r=(0,c.useCallback)((e=>{l((t=>({...t,flags:e(t.flags)})))}),[]),a=(0,c.useRef)(null),[o,d]=(0,c.useState)(""),[u,x]=(0,c.useState)(""),[p,j]=(0,c.useState)(null),[m,g]=(0,c.useState)(!1);(0,c.useEffect)((()=>{let e;try{e=new RegExp(i.pattern,i.flags),g(!1)}catch(e){return g(!0),void j(null)}j(i.pattern?e:null)}),[i.flags,i.pattern]),(0,c.useEffect)((()=>{x(p&&o?o.replace(p,i.replaceTo):"")}),[p,i.replaceTo,o]);return(0,P.jsx)(C.V,{title:"添加源文本替换正则",canOutsideClickClose:!1,isOpen:t,onClose:n,onClosed:()=>{l(Ps),d("")},onOpened:()=>{var e;null===(e=a.current)||void 0===e||e.focus()},children:(0,P.jsxs)("form",{onSubmit:e=>{e.preventDefault(),!m&&i.pattern&&(n(),s(i))},children:[(0,P.jsxs)("div",{className:h.TmF,children:[(0,P.jsx)(S.c,{label:"正则",labelFor:"input-pattern",children:(0,P.jsx)("input",{id:"input-pattern",className:`${h.O4S} ${h.ur0}`,ref:a,value:i.pattern,required:!0,onChange:e=>{const t=e.target.value;l((e=>({...e,pattern:t})))}})}),(0,P.jsx)(S.c,{label:"标识",children:(0,P.jsx)(Es,{selected:i.flags,setSelected:r})}),(0,P.jsx)(S.c,{label:"替换为",labelFor:"input-replace-to",children:(0,P.jsx)("input",{id:"input-replace-to",className:`${h.O4S} ${h.ur0}`,value:i.replaceTo,onChange:e=>{const t=e.target.value;l((e=>({...e,replaceTo:t})))}})}),m&&(0,P.jsx)(Me.U,{intent:"danger",title:"正则有误",style:{marginBottom:10}}),(0,P.jsxs)("div",{className:`${h.kjJ} ${h.Tio}`,children:[(0,P.jsx)("p",{children:"以上配置等同于下面这行 JavaScript 代码："}),(0,P.jsxs)(pe.SU,{style:{whiteSpace:"break-spaces"},children:['"',o.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'".replace(new RegExp("',i.pattern.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),'", "',i.flags,'"), "',i.replaceTo.replace(/"/g,'\\"'),'")']}),(0,P.jsxs)("p",{children:["相关文档：",(0,P.jsx)("a",{href:"https://developer.mozilla.org/zh-CN/docs/web/javascript/reference/global_objects/regexp/regexp",target:"_blank",rel:"noreferrer noopener",children:"RegExp 构造函数"})," ","|"," ",(0,P.jsx)("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace",target:"_blank",rel:"noreferrer noopener",children:"String.prototype.replace() 方法"})]})]}),(0,P.jsx)("p",{children:(0,P.jsx)(en.K,{fill:!0,placeholder:"在此输入文本可以测试正则",value:o,onChange:e=>{d(e.target.value)}})}),o&&p&&(0,P.jsxs)("div",{className:`${h.kjJ} ${h.Tio}`,children:[(0,P.jsx)("p",{children:"以上文本会被替换为："}),(0,P.jsx)(pe.SU,{style:{whiteSpace:"break-spaces"},children:u})]})]}),(0,P.jsx)("div",{className:h.Alt,children:(0,P.jsxs)("div",{className:h.e$L,children:[(0,P.jsx)(k.z,{onClick:n,children:"取消"}),(0,P.jsx)(k.z,{type:"submit",intent:"primary",children:"添加"})]})})]})})}function As(e){const{regexps:t,setRegexps:n}=e,s=(0,c.useContext)(O),[i,l]=(0,c.useState)(!1);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("p",{className:h.foX,children:["除了使用上面预定义的替换功能，你还可以使用",(0,P.jsx)("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions",target:"_blank",rel:"noreferrer noopener",children:"正则表达式"}),"自行添加源文本替换逻辑。",(0,P.jsx)(k.z,{intent:"primary",icon:"add",small:!0,onClick:()=>l(!0),disabled:!(null!=s&&s.vipActivated),children:"添加正则表达式"})]}),(0,P.jsxs)(jt.v,{compact:!0,bordered:!0,striped:!0,style:{width:"100%"},children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"正则表达式"}),(0,P.jsx)("th",{children:"替换为"}),(0,P.jsx)("th",{})]})}),(0,P.jsxs)("tbody",{children:[t.map(((e,s)=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,P.jsx)(pe.EK,{children:(0,P.jsxs)("pre",{style:{display:"inline"},children:["/",e.pattern,"/",e.flags]})})}),(0,P.jsx)("td",{children:e.replaceTo?(0,P.jsx)(pe.EK,{children:e.replaceTo}):"从源文本中删除"}),(0,P.jsx)("td",{children:(0,P.jsx)(k.z,{icon:"delete",small:!0,onClick:()=>{n((0,_t.Uy)(t,(e=>{e.splice(s,1)})))},children:"删除"})})]},s))),!t.length&&(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:3,style:{textAlign:"center"},children:"未添加正则表达式"})})]})]}),(0,P.jsx)(Rs,{show:i,hideDialog:()=>l(!1),onAdd:e=>{n((0,_t.Uy)(t,(t=>{t.push(e)})))}})]})}const Is=(0,E.Z)(N.qI,["sourceTransformNoBr","sourceTransformNCaml","sourceTransformNoComment","sourceTransformRegExps"]);function Fs(){const e=(0,c.useContext)(O),[t,n]=(0,D.Z)(Is);return(0,P.jsxs)(S.c,{className:"inline-form-group-label",children:[(0,P.jsx)(ht.XZ,{labelElement:(0,P.jsxs)(P.Fragment,{children:["将换行符替换成空格",(0,P.jsxs)(Le,{children:["部分网站如"," ",(0,P.jsx)("a",{href:"https://www.rfc-editor.org/rfc/rfc6633.txt",target:"_blank",rel:"noreferrer",children:"RFCs 文档站"}),"在文本中自行加入了换行符，这导致翻译结果不是按照完整的句子翻译的，勾选此选项即可将源文本里的所有换行符替换成空格。"]})]}),inline:!0,disabled:!(null!=e&&e.vipActivated),checked:t?t.sourceTransformNoBr:Is.sourceTransformNoBr,onChange:e=>{n({sourceTransformNoBr:e.target.checked})}}),(0,P.jsx)(ht.XZ,{labelElement:(0,P.jsxs)(P.Fragment,{children:["将双斜线（//）替换成空格",(0,P.jsx)(Le,{children:"部分代码使用双斜线 // 作为代码注释，勾选此选项即可去掉文本中的所有双斜线。如果同时勾选了“将换行符替换成空格”，则可以正常翻译多行注释。"})]}),inline:!0,disabled:!(null!=e&&e.vipActivated),checked:t?t.sourceTransformNoComment:Is.sourceTransformNoComment,onChange:e=>{n({sourceTransformNoComment:e.target.checked})}}),(0,P.jsx)(ht.XZ,{labelElement:(0,P.jsxs)(P.Fragment,{children:["转换驼峰式和下划线式词组",(0,P.jsx)(Le,{children:"部分网站如 GitHub 里查看代码时，有很多驼峰式或下划线式的词组如“someData”、“click_by_someone”，勾选此选项后则会转换成“some data”、“click by someone”这类形式。"})]}),inline:!0,disabled:!(null!=e&&e.vipActivated),checked:t?t.sourceTransformNCaml:Is.sourceTransformNCaml,onChange:e=>{n({sourceTransformNCaml:e.target.checked})}}),(0,P.jsx)(As,{regexps:t?t.sourceTransformRegExps:[],setRegexps:e=>{n({sourceTransformRegExps:e})}})]})}var Zs=n(79802),Ns=n(73827);function Ds(e){const{selected:t,onChange:n}=e;return(0,P.jsx)(Zs.C,{items:Ns.F,selected:t,onChange:n,labelKey:"name",valueKey:"id",itemRenderer:(e,t,n,s,i)=>(0,P.jsxs)("div",{children:[(0,P.jsx)(ht.XZ,{inline:!0,labelElement:t,checked:s,onChange:e=>{i(e.target.checked)}}),(0,P.jsx)(k.A,{minimal:!0,small:!0,icon:(0,P.jsx)(J.I,{icon:"share",size:12}),target:"_blank",href:e.home})]},n)})}(0,E.Z)(N.qI,["quickLinks"]);const Os={name:"",link:"",menu:!1,panel:!1},zs=[{name:"谷歌搜索",link:"https://www.google.com/search?q=%s",menu:!0,panel:!0},{name:"百度搜索",link:"https://www.baidu.com/s?wd=%s",menu:!0,panel:!0},{name:"维基百科",link:"https://zh.wikipedia.org/w/index.php?search=%s",menu:!0,panel:!0},{name:"剑桥词典",link:"https://dictionary.cambridge.org/dictionary/english-chinese-simplified/%s",menu:!0,panel:!0}],Ks=3,Us=(0,A.RN)({position:"bottom",maxToasts:1});function Vs(e){var t;const{setShowVip:n}=(0,c.useContext)(ge),s=(0,c.useContext)(O),{options:i,setOptions:l}=e,[r,a]=(0,c.useState)(!1),[o,d]=(0,c.useState)(-1),[u,x]=(0,c.useState)(!1),[p,j]=(0,c.useState)(-1),[m,g]=(0,c.useState)(Os),[f,y]=(0,c.useState)(!1),v=(0,c.useRef)(null);return(0,P.jsxs)(S.c,{helperText:(0,P.jsxs)(P.Fragment,{children:["快捷链接是基于你所划选的文本生成的链接。",(0,P.jsx)("a",{style:{marginRight:10},onClick:()=>y((e=>!e)),children:"查看教程"}),(0,P.jsx)("a",{href:"https://github.com/lmk123/crx-selection-translate/discussions/945",target:"_blank",rel:"noreferrer",children:"分享你的或查看其他人的快捷链接"})]}),children:[(0,P.jsx)(C.V,{isOpen:f,title:"如何配置快捷链接",onClose:()=>y(!1),children:(0,P.jsxs)("div",{className:h.TmF,children:[(0,P.jsx)("p",{children:"以百度搜索为例："}),(0,P.jsxs)(pe.OL,{children:[(0,P.jsxs)("li",{children:["打开",(0,P.jsx)("a",{href:"https://www.baidu.com",target:"_blank",rel:"noreferrer",children:"百度搜索"}),"并搜索 ",(0,P.jsx)(pe.EK,{children:"test"}),"，百度搜索会跳转到一个新的网址：",(0,P.jsx)("a",{href:"https://www.baidu.com/s?wd=test&ie=utf-8&tn=baiduhome_pg",target:"_blank",rel:"noreferrer",children:"https://www.baidu.com/s?wd=test&ie=utf-8&tn=baiduhome_pg"})]}),(0,P.jsxs)("li",{children:["这个网址中包含我们刚才搜索的关键词 ",(0,P.jsx)(pe.EK,{children:"test"}),"，我们只需要将 ",(0,P.jsx)(pe.EK,{children:"test"})," 替换成 ",(0,P.jsx)(pe.EK,{children:"%s"})," ","填写进快捷链接即可，也就是"," ",(0,P.jsx)(pe.EK,{children:"https://www.baidu.com/s?wd=%s&ie=utf-8&tn=baiduhome_pg"})]}),(0,P.jsxs)("li",{children:["最后，这个网址中其实有很多不需要的参数，例如"," ",(0,P.jsx)(pe.EK,{children:"&ie=utf-8&tn=baiduhome_pg"}),"，也可以将它们去掉之后再填进划词翻译中。"]})]}),(0,P.jsxs)("div",{children:["配置好了之后，假设你在网页上划选了“划词翻译”，那么百度搜索的快捷链接就会指向"," ",(0,P.jsx)("a",{href:"https://www.baidu.com/s?wd=%E5%88%92%E8%AF%8D%E7%BF%BB%E8%AF%91",target:"_blank",rel:"noreferrer",children:"https://www.baidu.com/s?wd=划词翻译"}),"，点击之后就能看到用百度搜索“划词翻译”的搜索结果。"]})]})}),(0,P.jsxs)(xe.b,{isOpen:o>=0,cancelButtonText:"取消",confirmButtonText:"确定",intent:"danger",icon:"trash",onClose:e=>{var t;e&&(t=o,l((e=>{e.quickLinks.splice(t,1)}))),d(-1)},children:["确定要删除“",null==i||null===(t=i.quickLinks[o])||void 0===t?void 0:t.name,"”吗？"]}),(0,P.jsx)(C.V,{isOpen:r,title:(u?"修改":"新增")+"快捷链接",onClose:()=>{a(!1),g(Os)},onOpened:()=>{var e;null===(e=v.current)||void 0===e||e.focus()},children:(0,P.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),u){var t,n,s;if(null!=i&&i.quickLinks.find(((e,t)=>e.name===m.name&&t!==p)))return null===(t=v.current)||void 0===t||t.setCustomValidity("快捷链接的名称不能重复。"),void(null===(n=v.current)||void 0===n||n.reportValidity());null===(s=v.current)||void 0===s||s.setCustomValidity(""),d=m,h=p,l((e=>{e.quickLinks.splice(h,1,d)}))}else{var r,c,o;if(null!=i&&i.quickLinks.find((e=>e.name===m.name)))return null===(r=v.current)||void 0===r||r.setCustomValidity("快捷链接的名称不能重复。"),void(null===(c=v.current)||void 0===c||c.reportValidity());null===(o=v.current)||void 0===o||o.setCustomValidity(""),(e=>{l((t=>{t.quickLinks.push(e)}))})(m)}var d,h;a(!1),g(Os)},children:[(0,P.jsxs)("div",{className:h.TmF,children:[(0,P.jsxs)("p",{children:["示例：",zs.map((e=>(0,P.jsx)("a",{style:{marginRight:"5px"},onClick:()=>g(e),children:e.name},e.name)))]}),(0,P.jsx)(S.c,{label:"名称：",children:(0,P.jsx)(w.B,{required:!0,inputRef:v,value:m.name,onChange:e=>{g((0,_t.Uy)((t=>{t.name=e.target.value})))}})}),(0,P.jsx)(S.c,{label:"链接：",helperText:"可以在链接中使用“%s”表示划选的文本。",children:(0,P.jsx)(w.B,{required:!0,type:"url",value:m.link,onChange:e=>{g((0,_t.Uy)((t=>{t.link=e.target.value})))}})}),(0,P.jsxs)(S.c,{label:"显示在：",inline:!0,children:[(0,P.jsx)(ht.XZ,{inline:!0,label:"右键菜单",checked:m.menu,onChange:()=>{g((0,_t.Uy)((e=>{e.menu=!e.menu})))}}),(0,P.jsx)(ht.XZ,{inline:!0,label:"翻译面板",checked:m.panel,onChange:()=>{g((0,_t.Uy)((e=>{e.panel=!e.panel})))}})]})]}),(0,P.jsx)("div",{className:h.Alt,children:(0,P.jsxs)("div",{className:h.e$L,children:[(0,P.jsx)(k.z,{onClick:()=>{a(!1),g(Os)},children:"取消"}),(0,P.jsx)(k.z,{type:"submit",intent:"primary",children:"确定"})]})})]})}),(0,P.jsxs)(jt.v,{className:"quick-links-table",compact:!0,striped:!0,bordered:!0,style:{width:"100%"},children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"名称"}),(0,P.jsx)("th",{children:"在翻译面板中显示"}),(0,P.jsx)("th",{children:"在右键菜单中显示"}),(0,P.jsx)("th",{children:"操作"})]})}),(0,P.jsxs)("tbody",{children:[!(null!=i&&i.quickLinks.length)&&(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:4,children:(0,P.jsx)(ke.t,{title:"没有快捷链接",description:"你还没有添加任何快捷链接，点击下方按钮即可添加。"})})}),null==i?void 0:i.quickLinks.map(((e,t)=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,P.jsx)("a",{href:e.link.replace("%s",encodeURIComponent("划词翻译")),target:"_blank",rel:"noreferrer",children:e.name})}),(0,P.jsx)("td",{children:e.panel?"是":"否"}),(0,P.jsx)("td",{children:e.menu?"是":"否"}),(0,P.jsxs)("td",{children:[(0,P.jsx)(k.z,{minimal:!0,icon:"edit",onClick:()=>{i&&(null!=s&&s.vipActivated||!(i.quickLinks.length>Ks)?(x(!0),j(t),g(e),a(!0)):Us.then((e=>{e.show({timeout:0,intent:"primary",action:{text:"开通会员",onClick:()=>{n(!0)}},message:`非会员用户最多添加 ${Ks} 个快捷链接，在修改快捷链接之前，请先将快捷链接删除至 ${Ks} 个。成为会员即可解除此限制。`})})))},children:"修改"}),(0,P.jsx)(k.z,{minimal:!0,icon:"delete",onClick:()=>d(t),children:"删除"})]})]},t))),(0,P.jsx)("tr",{children:(0,P.jsx)("td",{colSpan:4,style:{textAlign:"center"},children:(0,P.jsx)(k.z,{onClick:()=>{i&&(null!=s&&s.vipActivated||!(i.quickLinks.length>=Ks)?(x(!1),a(!0)):Us.then((e=>{e.show({timeout:0,intent:"primary",action:{text:"开通会员",onClick:()=>{n(!0)}},message:`非会员用户最多添加 ${Ks} 个快捷链接。成为会员即可解除此限制。`})})))},children:"新增快捷链接"})})})]})]})]})}var Bs=n(52665);const Ms=(0,E.Z)(N.qI,["source","destination","secondDestination","secondDestinationLatestSource","showTextArea","autoClipboard","autoClipboardImage","autoPlay","autoCopy","recentUseLangFrom","recentUseLangTo","panelSize","panelCustomStyle","textAreaAuto","textAreaShortKey","selectedAPIs","selectedExternalLinks","quickLinks","autoPaste"]),$s=(0,P.jsx)(pt.V,{htmlTitle:"此选项可以直接在翻译面板的快捷设置中调整。",minimal:!0,children:"快捷选项"});function Hs(){const e=(0,c.useContext)(O),[t,n]=(0,D.Z)(Ms),s=t?t.autoClipboard:Ms.autoClipboard,i="string"==typeof s?s:JSON.stringify(s),l=t?t.autoClipboardImage:Ms.autoClipboardImage,r="string"==typeof l?l:JSON.stringify(l);return(0,P.jsxs)("div",{style:{margin:15},children:[(0,P.jsxs)(Me.U,{title:"关于翻译面板",style:{marginBottom:15},children:[(0,P.jsx)("p",{children:"翻译面板被内嵌进了三个地方：网页划词后的翻译弹窗、独立翻译窗口、点击浏览器地址栏右侧的扩展按钮后的弹出页。"}),(0,P.jsxs)("div",{children:["这里的设置对这三个地方中的翻译面板均会生效。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/guides/panel",target:"_blank",rel:"noreferrer noopener",children:"查看翻译面板介绍"})]})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{id:"启用翻译源",children:"启用翻译源"}),(0,P.jsx)(S.c,{label:"直接显示结果",labelInfo:$s,helperText:"这些翻译源的结果会直接在翻译面板上显示出来。",children:(0,P.jsx)(Ot.f,{selectedAPIs:(null==t?void 0:t.selectedAPIs)||[],onChange:e=>{n({selectedAPIs:e})}})}),(0,P.jsxs)("div",{style:{marginBottom:15},children:["阿里翻译（专业版）与百度翻译（专业版）的选项已转移至",(0,P.jsx)("a",{href:(0,o.oQ)("/services-options"),children:"通用 - 第三方服务"}),"。"]}),(0,P.jsxs)(S.c,{label:"显示顺序",helperText:"翻译源的显示顺序跟你勾选的顺序一致。如果你想完全重新排序，可以取消勾选所有翻译源后重新勾选。",children:[!(null!=t&&t.selectedAPIs.length)&&"-",null==t?void 0:t.selectedAPIs.map(((e,t,n)=>{const s=hn.Y.find((t=>t.id===e)),i=t===n.length-1;return s?(0,P.jsxs)("span",{style:i?void 0:{marginRight:3},children:[s.name,!i&&" >"]},s.id):null}))]}),(0,P.jsx)(S.c,{label:"跳转链接",helperText:"你可以在翻译面板上添加这些翻译服务的跳转链接，点击之后会打开在线翻译结果地址。",children:(0,P.jsx)("div",{className:"external-translators",children:(0,P.jsx)(Ds,{selected:(null==t?void 0:t.selectedExternalLinks)||[],onChange:e=>{n({selectedExternalLinks:e})}})})})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"语种"}),(0,P.jsx)(S.c,{label:"源语种",labelInfo:$s,helperText:"当自动检测的语种不正确时，你可以指定源语种。",children:(0,P.jsx)(zt.Z,{addAuto:!0,lang:t?t.source:Ms.source,setLang:e=>{n({source:e})}})}),(0,P.jsxs)(S.c,{label:"目标语种",labelInfo:$s,helperText:"划词翻译会优先将文本翻译为首要目标语种，如果文本的语种与首要目标语种相同，则会翻译为次要目标语种。",children:[(0,P.jsxs)("div",{children:["首要：",(0,P.jsx)(zt.Z,{lang:t?t.destination:Ms.destination,setLang:e=>{n({destination:e})}})]}),"次要：固定为",(0,P.jsx)(zt.Z,{disabled:t?t.secondDestinationLatestSource:Ms.secondDestinationLatestSource,lang:t?t.secondDestination:Ms.secondDestination,setLang:e=>{n({secondDestination:e})}}),(0,P.jsx)("span",{style:{margin:"0 10px"},children:"或者"}),(0,P.jsx)(ht.XZ,{style:{margin:0},inline:!0,disabled:!(null!=e&&e.vipActivated),labelElement:(0,P.jsxs)(P.Fragment,{children:["动态的设置为上次翻译的文本的语种 ",Ts]}),checked:t?t.secondDestinationLatestSource:Ms.secondDestinationLatestSource,onChange:e=>{n({secondDestinationLatestSource:e.target.checked})}})," ",(0,P.jsx)("a",{href:"https://hcfy.app/docs/guides/talk/#latest-source",target:"_blank",rel:"noreferrer",children:"查看说明"})]})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"自动化"}),(0,P.jsxs)(S.c,{helperText:"点击扩展图标或使用全局快捷键打开独立窗口时，自动读取剪切板的文本或图片并翻译。",children:[(0,P.jsx)(ee.E,{inline:!0,label:(0,P.jsxs)(P.Fragment,{children:["打开面板时自动翻译剪切板里的文本 ",$s]}),options:[{label:"询问",value:"null"},{label:"不翻译",value:"false"},{label:"写入文本框但不翻译",value:"write-only"},{label:"翻译",value:"true"}],selectedValue:i,onChange:e=>{n({autoClipboard:(0,Bs.i4)(e.currentTarget.value)})}}),(0,P.jsx)(ee.E,{inline:!0,label:(0,P.jsx)(P.Fragment,{children:"打开面板时自动翻译剪切板里的图片"}),options:[{label:"询问",value:"null"},{label:"不翻译",value:"false"},{label:"写入文本框但不翻译",value:"write-only"},{label:"翻译",value:"true"}],selectedValue:r,onChange:e=>{n({autoClipboardImage:(0,Bs.i4)(e.currentTarget.value)})}})]}),(0,P.jsx)(S.c,{helperText:"翻译后如果第一个翻译源可以朗读，则自动朗读被翻译的文本。为避免朗读时间过长，如果被翻译的文本超过了 30 个字符则不会朗读。",children:(0,P.jsx)(ht.rs,{labelElement:(0,P.jsxs)(P.Fragment,{children:["自动朗读 ",$s]}),checked:t?t.autoPlay:Ms.autoPlay,onChange:e=>{n({autoPlay:e.target.checked})}})}),(0,P.jsx)(S.c,{helperText:"翻译后如果第一个翻译源有翻译结果，则自动将翻译结果复制进剪切板。",children:(0,P.jsx)(ht.rs,{labelElement:(0,P.jsxs)(P.Fragment,{children:["自动复制 ",$s," ",Ts]}),disabled:!(null!=e&&e.vipActivated),checked:t?t.autoCopy:Ms.autoCopy,onChange:e=>{n({autoCopy:e.target.checked})}})})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{id:"快捷链接",children:"快捷链接"}),(0,P.jsx)(Vs,{options:t,setOptions:n})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"文本框"}),(0,P.jsx)(S.c,{helperText:"是否要在网页划词面板中显示文本框。在独立翻译窗口和扩展图标窗口中将始终显示文本框。",children:(0,P.jsx)(ht.XZ,{labelElement:(0,P.jsxs)(P.Fragment,{children:["显示文本框 ",$s]}),checked:t?t.showTextArea:Ms.showTextArea,onChange:e=>{n({showTextArea:e.target.checked})}})}),(0,P.jsx)(S.c,{children:(0,P.jsx)(ht.XZ,{label:"粘贴文本后立刻翻译",checked:t?t.autoPaste:Ms.autoPaste,onChange:e=>{n({autoPaste:e.target.checked})}})}),(0,P.jsx)(S.c,{helperText:"勾选后，你在文本框内停止输入超过 1 秒后会自动翻译文本框中的文本。如果你经常在文本框内输入大段的文本，建议不要启用此选项，因为这会导致输入过程中触发多次翻译，造成字符数的浪费。",children:(0,P.jsx)(ht.XZ,{label:"自动翻译文本框",checked:t?t.textAreaAuto:Ms.textAreaAuto,onChange:e=>{n({textAreaAuto:e.target.checked})}})}),(0,P.jsx)(S.c,{children:(0,P.jsx)(ee.E,{inline:!0,label:"翻译快捷键",selectedValue:t?t.textAreaShortKey:Ms.textAreaShortKey,onChange:e=>{const t=e.currentTarget.value;n({textAreaShortKey:t})},options:[{label:"Ctrl / ⌘ + Enter",value:N.VH.ctrlEnter},{label:"Enter",value:N.VH.enter}]})})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsxs)(pe.H4,{children:["源文本处理",Ts]}),(0,P.jsx)(Fs,{})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"自定义界面"}),"此设置已转移到",(0,P.jsx)("a",{href:(0,o.oQ)("/appearance"),children:"通用 - 外观 - 翻译面板"}),"当中。"]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"网页划词面板"}),"此设置已转移到",(0,P.jsx)("a",{href:(0,o.oQ)("/cross"),children:"功能设置 - 网页划词翻译"}),"当中。"]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"独立翻译窗口"}),"此设置已转移到",(0,P.jsx)("a",{href:(0,o.oQ)("/standalone"),children:"功能设置 - 独立翻译窗口"}),"当中。"]})]})}n(14121),n(60523),n(43673),n(40753),n(28399);var qs=n(82236),Ws=n(26130),Gs=n(42598),Ys=n(10405),Js=n(91492);const Xs=new Hn(Un.historyRecords,["text","url","favicon","title"],(async e=>(await L.L.post("/histories",e)).data),"historiesSyncAt",(async()=>(await L.L.delete("/histories")).data),(async e=>(await L.L.put("/histories",e)).data),(async e=>(await L.L.get("/histories?lastCheck="+e)).data),(e=>L.L.delete("/histories/logs?date="+e)));function Qs(e,t,n){let s;if(n){const e=n.toLocaleLowerCase();s=t=>t.title.toLocaleLowerCase().includes(e)||t.url.toLocaleLowerCase().includes(e)||t.text.toLocaleLowerCase().includes(e)}return Xs.query(e,t,s)}const ei=(0,E.Z)(N.qI,["historyEnabled","historySyncEnabled"]);function ti(e){const t=new Date(e);return(0,W.Z)(t)?(0,G.Z)(t,"b K:mm",{locale:Js.Z}):""}function ni(e){if(!(0,W.Z)(e))return"";let t="";return(0,qs.Z)(e)?t="今天 - ":(0,Ws.Z)(e)&&(t="昨天 - "),t+(0,G.Z)(e,"yyyy 年 M 月 d 日 EEEE",{locale:Js.Z})}function si(e){return new URL(e).hostname}function ii(){const[e,t]=(0,D.Z)(ei),n=e||ei,{setShowVip:s}=(0,c.useContext)(ge),i=(0,c.useContext)(O),[l,r]=(0,c.useState)(!1),[a,o]=(0,c.useState)(!1),{tableData:d,queryNextPage:u,deleteSelected:p,clearData:j,setSearchText:m,cancelSelected:g,switchCheck:f}=Qn(Qs,i,Xs),y=(0,c.useMemo)((()=>{const e=[];let t,n;return d.rows.forEach((s=>{!t||(0,Gs.Z)(t,s.date)?(t=(0,Ys.Z)(s.date),n=[s],e.push({date:t,items:n})):n.push(s)})),e}),[d.rows]);return(0,P.jsxs)("div",{id:"history-records",children:[(0,P.jsx)(xe.b,{cancelButtonText:"取消",confirmButtonText:"确定",intent:"danger",isOpen:l,icon:"trash",onClose:e=>{e&&p(),r(!1)},children:(0,P.jsx)("p",{children:"确定要删除这些记录吗？"})}),(0,P.jsx)(xe.b,{cancelButtonText:"取消",confirmButtonText:"确定",icon:"trash",intent:"danger",isOpen:a,onClose:e=>{e&&j(),o(!1)},children:(0,P.jsx)("p",{children:"确定要清空历史记录吗？"})}),(0,P.jsxs)("div",{className:"actions",children:[(0,P.jsxs)("div",{className:"actions-left",children:[(0,P.jsx)(w.B,{className:"search-input",placeholder:"搜索历史记录",rightElement:d.searchText?(0,P.jsx)(k.z,{icon:"cross",minimal:!0,onClick:()=>{m("")}}):void 0,value:d.searchText,onChange:e=>{const t=e.target.value;m(t)}}),d.selectedRows.length?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(k.z,{text:`删除选中的记录（${d.selectedRows.length}）`,intent:"primary",style:{marginLeft:"10px"},onClick:()=>{r(!0)}}),(0,P.jsx)(k.z,{text:"取消选择",style:{margin:"0 10px"},onClick:g}),(0,P.jsx)(k.z,{intent:"danger",text:"清空历史记录",onClick:()=>{o(!0)}})]}):void 0]}),(0,P.jsxs)("div",{className:"actions-right",children:[!(null!=i&&i.vipActivated)&&(0,P.jsx)("a",{style:{marginRight:15},onClick:()=>s(!0),children:"将历史记录同步到云端"}),(0,P.jsx)(ht.XZ,{label:"启用历史记录",inline:!0,checked:n.historyEnabled,onChange:e=>{t({historyEnabled:e.target.checked})}})]})]}),(0,P.jsx)("div",{className:"actions-bg",style:{height:"60px"}}),(0,P.jsxs)("div",{style:{padding:"0 15px 15px 15px"},children:[y.map((({date:e,items:t})=>(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H3,{children:ni(e)}),t.map((e=>{return(0,P.jsxs)("p",{className:"history-item",children:[(0,P.jsx)("span",{className:"date",children:(0,P.jsx)(ht.XZ,{checked:d.selectedRows.includes(e.id),labelElement:(0,P.jsx)("span",{className:h.kjJ,children:ti(e.date)}),onChange:()=>{f(e.id)}})}),(0,P.jsx)("span",{className:"text",children:e.text}),(t=e.url,t.startsWith("chrome-extension://")||t.startsWith("moz-extension://")?(0,P.jsx)("span",{className:`${h.Tio} ${h.kjJ} hostname`,onClick:()=>{m("划词翻译")},children:e.title}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("img",{src:e.favicon,width:"12px",height:"12px",alt:""}),(0,P.jsx)("a",{className:h.J4_,href:e.url,target:"_blank",rel:"noreferrer",title:e.title||e.url,children:e.title||e.url}),(0,P.jsx)("span",{className:`${h.Tio} ${h.kjJ} hostname`,onClick:()=>{const t=si(e.url);m(t)},children:si(e.url)})]}))]},e.id);var t}))]},e.getTime()))),!d.loading&&!d.end&&(0,P.jsx)(k.z,{onClick:u,text:"加载更多"}),d.loading&&(0,P.jsx)(On.$,{}),!d.loading&&!d.rows.length&&(0,P.jsx)(ke.t,{icon:"blank",title:d.searchText?"没有搜索结果":"无历史记录",description:n.historyEnabled?"":"若要记录翻译历史，请勾选上方的“启用历史记录”。"})]})]})}function li(e){return(0,P.jsx)(U,{children:(0,P.jsx)(ve,{children:e.children})})}const ri=(0,E.Z)(N.qI,["pageTrsJumpTwo"]);function ai(){const[e,t]=(0,D.Z)(ri);return(0,P.jsx)(ht.XZ,{inline:!0,style:{marginBottom:0},label:"跳过【双语】",checked:e?e.pageTrsJumpTwo:ri.pageTrsJumpTwo,onChange:e=>{t({pageTrsJumpTwo:e.target.checked})}})}const ci="chrome://extensions/shortcuts";function oi(){f().tabs.create({url:ci})}const di={_execute_browser_action:"等同于点击位于浏览器地址栏右侧的划词翻译扩展图标。",switchWeb:"切换【在所有网站中禁用网页划词】选项。",play:"等同于点击第一个翻译服务的播放按钮。",pageSwitchMode:(0,P.jsxs)(P.Fragment,{children:["可选项：",(0,P.jsx)(ai,{})]}),panel:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:Ve?{textDecoration:"line-through"}:void 0,children:"这是一个全局快捷键，你可以在浏览器以外的地方使用此快捷键来打开独立窗口翻译剪切板内的文本或图片。在修改此快捷键时，请确保作用域为“全局”。"}),Ve&&(0,P.jsx)("b",{children:"由于 Firefox 不支持全局快捷键，所以无法在浏览器以外的地方使用此快捷键。"})]})};function hi(e){const t=e.split(e.includes("+")?"+":"");return(0,P.jsx)(P.Fragment,{children:t.map(((e,t)=>{const n=0===t;return(0,P.jsx)("kbd",{style:n?{marginLeft:0}:void 0,children:e},e)}))})}function ui(){var e;const t=(0,B.Z)((()=>f().commands.getAll()),[]);return(0,P.jsx)("div",{style:{margin:15},children:(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"快捷键"}),(0,P.jsxs)("p",{children:[ze&&(0,P.jsxs)(P.Fragment,{children:["请前往",(0,P.jsx)("a",{onClick:oi,children:"键盘快捷键页面"}),"修改这些快捷键。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/faqs/edit-shortcut-key",target:"_blank",rel:"noreferrer",children:"修改后没有生效？"})]}),Ve&&"请打开附加组件管理器（about:addons），点击“管理扩展程序”右侧的设置按钮，选择“管理扩展快捷键”来修改这些快捷键。"]}),(0,P.jsxs)(jt.v,{compact:!0,striped:!0,bordered:!0,children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{style:{width:160},children:"名称"}),(0,P.jsx)("th",{style:{width:170},children:"快捷键"}),(0,P.jsx)("th",{children:"简介"})]})}),(0,P.jsx)("tbody",{children:null===(e=t.value)||void 0===e?void 0:e.map((e=>{const t=e.name;return t?(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:e.description||"激活该扩展程序"}),(0,P.jsx)("td",{children:e.shortcut?hi(e.shortcut):"未设置"}),(0,P.jsx)("td",{children:di[t]})]},t):null}))})]})]})})}var xi=n(4253),pi=n(69961),ji=n(36215);const mi=[{label:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(J.I,{icon:"cut",style:{marginRight:4}}),"截图翻译按钮"]}),value:"cut"},{label:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(J.I,{icon:"translate",style:{marginRight:4}}),"网页全文翻译按钮"]}),value:"translate"},{label:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(J.I,{icon:"video",style:{marginRight:4}}),"音视频翻译按钮"]}),value:"video"},{label:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(J.I,{icon:"media",style:{marginRight:4}}),"图片翻译按钮"]}),value:"media"},{label:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(J.I,{icon:(0,P.jsx)(ji.R,{iconSize:14}),style:{marginRight:4}}),"麦克风翻译按钮"]}),value:"microphone"},{label:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(J.I,{icon:"folder-open",style:{marginRight:4}}),"收藏夹按钮"]}),value:"folder-open"},{label:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(J.I,{icon:"history",style:{marginRight:4}}),"历史记录按钮"]}),value:"history"}],gi=(0,E.Z)(N.qI,["panelButtons"]);function fi(){const[e,t]=(0,D.Z)(gi);return(0,P.jsx)(S.c,{label:"面板上的按钮",children:(0,P.jsx)(Zs.C,{items:mi,selected:e?e.panelButtons:gi.panelButtons,onChange:e=>{t({panelButtons:e})}})})}var yi=n(32728);const vi=(0,E.Z)(N.qI,["contextMenus"]);function bi(){const[e,t]=(0,D.Z)(vi);return(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"右键菜单"}),(0,P.jsx)(S.c,{helperText:(0,P.jsxs)(P.Fragment,{children:["你可以移除你不想要的右键菜单。右键菜单里的快捷链接请在",(0,P.jsx)("a",{href:(0,o.oQ)("/panel"),children:"通用设置 - 翻译面板"}),"内移除。"]}),children:(0,P.jsx)(Zs.C,{items:yi.I,selected:e?e.contextMenus:vi.contextMenus,onChange:e=>{t({contextMenus:e})}})})]})}var ki=n(64643),Ti=n(28909),Ci=n(13888),Si=n.n(Ci);const wi={STYLE_NONE:ki.Yx,STYLE_DOTTED_CLASSIC:ki.l,STYLE_DOTTED:ki.Su,STYLE_WAVY:ki.HQ,STYLE_LINE:ki.pZ,STYLE_BACKGROUND:ki.kw,STYLE_QUOTE:ki.Xi};let Li;function _i(){if(Li)return;Li=document.createElement("style"),Li.dataset.title="这是由划词翻译创建的节点，用于控制全文翻译的译文样式。",document.head.appendChild(Li);const e=Si()(N.qI,["pageTrsResultStyleId","pageTrsResultStyleMainColor","pageTrsResultStyleTextColor","pageTrsResultStyleTextSize","pageTrsResultStyleTextWeight","pageTrsResultStyleCustom"]);(0,Ti.Z)(e,(t=>{t.pageTrsResultStyleId&&(e.pageTrsResultStyleId=t.pageTrsResultStyleId),void 0!==t.pageTrsResultStyleCustom&&(e.pageTrsResultStyleCustom=t.pageTrsResultStyleCustom),void 0!==t.pageTrsResultStyleMainColor&&(e.pageTrsResultStyleMainColor=t.pageTrsResultStyleMainColor),void 0!==t.pageTrsResultStyleTextColor&&(e.pageTrsResultStyleTextColor=t.pageTrsResultStyleTextColor),void 0!==t.pageTrsResultStyleTextSize&&(e.pageTrsResultStyleTextSize=t.pageTrsResultStyleTextSize),void 0!==t.pageTrsResultStyleTextWeight&&(e.pageTrsResultStyleTextWeight=t.pageTrsResultStyleTextWeight),function(){if(!Li)return;let t="hcfy-result{";e.pageTrsResultStyleMainColor&&(t+=`--hcfy-result-main-color:${e.pageTrsResultStyleMainColor};`),e.pageTrsResultStyleTextColor&&(t+=`--hcfy-result-text-color:${e.pageTrsResultStyleTextColor};`),e.pageTrsResultStyleTextSize&&(t+=`--hcfy-result-text-size:${e.pageTrsResultStyleTextSize}em;`),e.pageTrsResultStyleTextWeight&&(t+=`--hcfy-result-text-weight:${e.pageTrsResultStyleTextWeight};`),t+="}","STYLE_CUSTOM"===e.pageTrsResultStyleId?t+=e.pageTrsResultStyleCustom:t+=wi[e.pageTrsResultStyleId]||"",Li.textContent=t}()}))}function Ei(e){const{value:t,defaultValue:n="#000000",onChange:s}=e,i=(0,c.useRef)(null);return(0,P.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[(0,P.jsx)("input",{ref:i,style:null==t?{display:"none"}:void 0,type:"color",value:t||n,onChange:e=>{s(e.target.value)}}),null!=t&&(0,P.jsx)(k.z,{style:{marginLeft:10},text:"重置为默认颜色",onClick:()=>{s(null)}}),!t&&(0,P.jsx)(k.z,{text:"点击修改",onClick:()=>{s(n),setTimeout((()=>{i.current.click()}))}})]})}const Pi=(0,E.Z)(N.qI,["panelSize","panelCustomStyle","pageTrsResultStyleId","pageTrsResultStyleMainColor","pageTrsResultStyleTextColor","pageTrsResultStyleTextSize","pageTrsResultStyleTextWeight","pageTrsResultStyleCustom"]);function Ri(){var e,t,n,s,i,l;const{darkMode:r,setDarkMode:a}=(0,m.Z)(),[o,d]=(0,D.Z)(Pi);return(0,c.useEffect)(_i,[]),(0,P.jsxs)("div",{style:{margin:15},children:[(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"深色模式"}),(0,P.jsx)(S.c,{children:(0,P.jsxs)(ee.E,{inline:!0,onChange:e=>{a(e.target.value)},selectedValue:r,children:[(0,P.jsx)(ht.Y8,{label:"开",value:"open"}),(0,P.jsx)(ht.Y8,{label:"关",value:"close"}),(0,P.jsx)(ht.Y8,{label:"跟随系统",value:"system"})]})})]}),(0,P.jsx)(bi,{}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"翻译面板"}),(0,P.jsx)(S.c,{label:"字体和按钮大小",labelInfo:$s,children:(0,P.jsx)(pi.l,{value:(null==o?void 0:o.panelSize)||Pi.panelSize,onChange:e=>{d({panelSize:e})}})}),(0,P.jsx)(fi,{}),(0,P.jsx)(S.c,{label:"自定义面板样式",helperText:(0,P.jsxs)(P.Fragment,{children:["使用"," ",(0,P.jsx)("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS",target:"_blank",rel:"noreferrer",children:"CSS"})," ","自定义面板样式。",(0,P.jsx)("a",{href:"https://github.com/hcfyapp/crx-selection-translate/discussions/950",target:"_blank",rel:"noreferrer",children:"分享你的或查看其他人的自定义样式"})]}),children:(0,P.jsx)(en.K,{growVertically:!0,large:!0,fill:!0,onChange:e=>{d({panelCustomStyle:e.target.value})},value:(o?o.panelCustomStyle:Pi.panelCustomStyle)||"#translate-panel {\n  /* 浅色模式下的面板样式 */\n}\n.bp5-dark #translate-panel {\n  /* 深色模式下的面板样式 */\n}",placeholder:"#translate-panel {\n  /* 浅色模式下的面板样式 */\n}\n.bp5-dark #translate-panel {\n  /* 深色模式下的面板样式 */\n}"})})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"网页全文翻译"}),(0,P.jsx)(S.c,{label:"译文样式",inline:!0,children:(0,P.jsx)(xi.L,{options:[{label:"自定义…",value:"STYLE_CUSTOM"},{label:"无",value:"STYLE_NONE"},{label:"虚线边框（经典）",value:"STYLE_DOTTED_CLASSIC"},{label:"虚线边框",value:"STYLE_DOTTED"},{label:"直线",value:"STYLE_LINE"},{label:"波浪线",value:"STYLE_WAVY"},{label:"深色背景",value:"STYLE_BACKGROUND"},{label:"引用",value:"STYLE_QUOTE"}],value:(null==o?void 0:o.pageTrsResultStyleId)||Pi.pageTrsResultStyleId,onChange:e=>{d({pageTrsResultStyleId:e.target.value})}})}),"STYLE_CUSTOM"!==(null==o?void 0:o.pageTrsResultStyleId)&&"STYLE_DOTTED_CLASSIC"!==(null==o?void 0:o.pageTrsResultStyleId)&&"STYLE_NONE"!==(null==o?void 0:o.pageTrsResultStyleId)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(S.c,{label:"主要颜色",inline:!0,children:(0,P.jsx)(Ei,{value:(null==o?void 0:o.pageTrsResultStyleMainColor)||Pi.pageTrsResultStyleMainColor,onChange:e=>{d({pageTrsResultStyleMainColor:e})}})}),(0,P.jsx)(S.c,{label:"文字颜色",inline:!0,children:(0,P.jsx)(Ei,{value:(null==o?void 0:o.pageTrsResultStyleTextColor)||Pi.pageTrsResultStyleTextColor,onChange:e=>{d({pageTrsResultStyleTextColor:e})}})}),(0,P.jsx)(S.c,{label:"文字大小",inline:!0,helperText:(0,P.jsxs)(P.Fragment,{children:["这是相对大小，即 ",(0,P.jsx)(pe.EK,{children:"0.5"})," 表示为原本的一半大小、",(0,P.jsx)(pe.EK,{children:"1"})," 表示跟原本的一样大、",(0,P.jsx)(pe.EK,{children:"2"})," ","表示为原本的两倍大。"]}),children:(0,P.jsx)(xt.A,{style:{width:150},min:0,stepSize:.1,majorStepSize:null,minorStepSize:null,placeholder:"不填则为默认大小",rightElement:(null!==(e=null==o?void 0:o.pageTrsResultStyleTextSize)&&void 0!==e?e:Pi.pageTrsResultStyleTextSize)?(0,P.jsx)(k.z,{icon:"cross-circle",minimal:!0,onClick:()=>{d({pageTrsResultStyleTextSize:null})}}):void 0,value:null!==(t=null!==(n=null==o?void 0:o.pageTrsResultStyleTextSize)&&void 0!==n?n:Pi.pageTrsResultStyleTextSize)&&void 0!==t?t:"",onValueChange:(e,t)=>{d({pageTrsResultStyleTextSize:t||null})}})}),(0,P.jsx)(S.c,{label:"文字粗细",inline:!0,children:(0,P.jsx)(xt.A,{style:{width:150},min:100,max:1e3,stepSize:100,majorStepSize:null,minorStepSize:null,placeholder:"不填则为默认粗细",rightElement:(null!==(s=null==o?void 0:o.pageTrsResultStyleTextWeight)&&void 0!==s?s:Pi.pageTrsResultStyleTextWeight)?(0,P.jsx)(k.z,{icon:"cross-circle",minimal:!0,onClick:()=>{d({pageTrsResultStyleTextWeight:null})}}):void 0,value:null!==(i=null!==(l=null==o?void 0:o.pageTrsResultStyleTextWeight)&&void 0!==l?l:Pi.pageTrsResultStyleTextWeight)&&void 0!==i?i:"",onValueChange:(e,t)=>{d({pageTrsResultStyleTextWeight:t||null})}})})]}),"STYLE_CUSTOM"===(null==o?void 0:o.pageTrsResultStyleId)&&(0,P.jsx)(S.c,{label:"自定义译文样式",helperText:(0,P.jsxs)(P.Fragment,{children:["使用"," ",(0,P.jsx)("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS",target:"_blank",rel:"noreferrer",children:"CSS"})," ","自定义译文样式。",(0,P.jsx)("a",{href:"https://github.com/hcfyapp/crx-selection-translate/discussions/1686",target:"_blank",rel:"noreferrer",children:"分享你的或查看其他人的自定义样式"})]}),children:(0,P.jsx)(en.K,{growVertically:!0,large:!0,fill:!0,placeholder:".__hcfy-result-comparison__ {\n  /* 译文外框样式 */\n}\n.__hcfy-result-comparison__ hcfy-result-content {\n  /* 译文内容样式 */\n}\n.__hcfy-result-editing__ {\n  /* 译文处于编辑状态时的样式 */\n}\n.__hcfy-result-comparison-block__ {\n  /* 译文跟原文是换行显示时的样式 */\n}\n.__hcfy-result-comparison-inline__ {\n  /* 译文跟原文是同一行显示时的样式 */\n}",onChange:e=>{d({pageTrsResultStyleCustom:e.target.value})},value:(o?o.pageTrsResultStyleCustom:Pi.pageTrsResultStyleCustom)||".__hcfy-result-comparison__ {\n  /* 译文外框样式 */\n}\n.__hcfy-result-comparison__ hcfy-result-content {\n  /* 译文内容样式 */\n}\n.__hcfy-result-editing__ {\n  /* 译文处于编辑状态时的样式 */\n}\n.__hcfy-result-comparison-block__ {\n  /* 译文跟原文是换行显示时的样式 */\n}\n.__hcfy-result-comparison-inline__ {\n  /* 译文跟原文是同一行显示时的样式 */\n}"})}),(0,P.jsx)(S.c,{label:"-",labelInfo:"原文跟译文换行显示：",children:(0,P.jsxs)("div",{style:{fontSize:"2em"},children:["How are you? I'm fine, thanks. And you? I'm fine, too.",(0,P.jsxs)("hcfy-result",{class:"__hcfy-result-comparison__ __hcfy-result-comparison-block__",style:{display:"block"},children:[(0,P.jsx)("hcfy-result-content",{children:"你好吗？我很好，谢谢。你呢？我也很好。"}),(0,P.jsx)("hcfy-result-actions",{})]})]})}),(0,P.jsx)(S.c,{label:"-",labelInfo:"原文跟译文在同一行：",children:(0,P.jsxs)("div",{style:{fontSize:"2em"},children:["I love you babe.",(0,P.jsxs)("hcfy-result",{class:"__hcfy-result-comparison__ __hcfy-result-comparison-inline__",style:{display:"inline-block"},children:[(0,P.jsx)("hcfy-result-content",{children:"我爱你，宝贝。"}),(0,P.jsx)("hcfy-result-actions",{})]})]})}),(0,P.jsx)(S.c,{label:"-",labelInfo:"译文处于编辑状态：",children:(0,P.jsxs)("div",{style:{fontSize:"2em"},children:["How are you? I'm fine, thanks. And you? I'm fine, too.",(0,P.jsxs)("hcfy-result",{class:"__hcfy-result-comparison__ __hcfy-result-comparison-block__ __hcfy-result-editing__",style:{display:"block"},children:[(0,P.jsx)("hcfy-result-content",{contentEditable:"true",children:"你好吗？我很好，谢谢。你呢？我也很好。"}),(0,P.jsx)("hcfy-result-actions",{})]})]})})]})]})}var Ai=n(1363),Ii=n(64443),Fi=n(83736),Zi=n(15833);let Ni;const Di=()=>Ni||(Ni=(0,Ii.X)((()=>new Promise(((e,t)=>{const n=window.speechSynthesis.getVoices();n.length?e(n):t(new Error("无法获取系统支持的语音列表，请稍后重试。"))}))),{delay:500,count:10}).then((e=>{const t={},n={};e.forEach((e=>{const s=e.lang;t[s]?t[s].push(e):t[s]=[e];const i=s.slice(0,s.indexOf("-"));n[i]?n[i].indexOf(s)<0&&n[i].push(s):n[i]=[s]}));const s=[],i={};return(0,Fi.Z)(t,((e,n)=>{1===e.length&&(s.push(n),i[n]=e[0],delete t[n])})),(0,Fi.Z)(n,((e,t)=>{1===e.length&&delete n[t]})),{singleVoiceMap:i,singleList:s,voicesGroup:t,multipleLang:n}}))),Oi=(0,Zi.Z)({"中文(简体)":"zh-CN","中文(粤语)":"zh-HK","中文(繁体)":"zh-TW",英语:"en","英语(英国)":"en-GB","英语(美国)":"en-US","英语(加拿大)":"en-CA","英语(澳大利亚)":"en-AU","英语(印度)":"en-IN","英语(爱尔兰)":"en-IE","英语(南非)":"en-ZA",德语:"de-DE",西班牙语:"es-ES","西班牙语(墨西哥)":"es-MX","西班牙语(美国)":"es-US","西班牙语(阿根廷)":"es-AR",法语:"fr-FR","法语(加拿大)":"fr-CA",印地语:"hi-IN",印尼语:"id-ID",意大利语:"it-IT",日语:"ja-JP",韩语:"ko-KR",荷兰语:"nl-NL","荷兰语(比利时)":"nl-BE",波兰语:"pl-PL",葡萄牙语:"pt-PT","葡萄牙语(巴西)":"pt-BR",俄语:"ru-RU",土耳其语:"tr-TR",瑞典语:"sv-SE",希伯来语:"he-IL",罗马尼亚语:"ro-RO",泰语:"th-TH",斯洛伐克语:"sk-SK",阿拉伯语:"ar-SA",匈牙利语:"hu-HU",希腊语:"el-GR",挪威语:"nb-NO",丹麦语:"da-DK",芬兰语:"fi-FI",捷克语:"cs-CZ"}),zi=(0,Zi.Z)({"中文(简体)":"zh",英语:"en",法语:"fr",西班牙语:"es",荷兰语:"nl",葡萄牙语:"pt"});zi.zh="中文";const Ki={...(0,E.Z)(N.qI,["audioVolume","audioRate","systemTTS","systemTTSVoice","systemTTSAccent"]),...(0,E.Z)(N.d6,["user"])};function Ui(){const[e,t]=(0,D.Z)(Ki),n=(0,B.Z)(Di),{setShowVip:s}=(0,c.useContext)(ge);return e?(0,P.jsxs)("div",{style:{margin:15},children:[(0,P.jsxs)(x.Z,{children:[(0,P.jsxs)(pe.H4,{id:"系统语音",children:[(0,P.jsx)("span",{style:{marginRight:10},children:"系统语音"}),(0,P.jsxs)(Le,{children:[(0,P.jsx)("p",{children:"系统语音是由你的浏览器和操作系统提供的语音，划词翻译支持使用系统语音来朗读文本。"}),(0,P.jsxs)("p",{children:["系统语音有两种类型：本地语音和网络语音。本地语音在电脑没有联网时也能使用；网络语音需要电脑联网才能使用，网络不好的情况下可能无法发声。",Ue&&(0,P.jsx)("b",{children:"由谷歌提供的网络语音需要能连接外网才可使用。"})]}),(0,P.jsx)("div",{children:"建议在 Microsoft Edge 浏览器或 macOS 操作系统上使用系统语音设置，因为它们提供的语音最丰富多样。"})]})]}),(0,P.jsx)(S.c,{label:"何时使用系统语音",helperText:"部分操作系统或浏览器在使用系统语音后可能会出现浏览器崩溃、视频音画不同步或杂音问题，如果你遇到了这些问题，请选择“不使用系统语音”。",children:(0,P.jsxs)(ee.E,{selectedValue:e.systemTTS,onChange:e=>{t({systemTTS:e.currentTarget.value})},children:[(0,P.jsx)(ht.Y8,{label:"先使用翻译源自己的语音朗读，如果翻译源无法朗读，再使用系统语音",value:"aid"}),(0,P.jsx)(ht.Y8,{label:"始终使用系统语音朗读",value:"prior"}),(0,P.jsx)(ht.Y8,{label:"不使用系统语音",value:"none"})]})}),n.loading?(0,P.jsx)("div",{children:"正在读取系统语音列表，请稍候……"}):n.error?(0,P.jsx)("div",{children:n.error.message}):n.value&&(0,P.jsxs)(S.c,{children:[(0,P.jsx)(S.c,{className:"inline-form-group-label",label:(0,P.jsxs)(P.Fragment,{children:["选择口音",Ts]}),helperText:Object.keys(n.value.multipleLang).length?"你的浏览器对以上语言支持多种口音，你可以选择一个你喜欢的口音来朗读这些语言。":"你的浏览器没有提供多个口音，因此无法选择。",children:Object.keys(n.value.multipleLang).map((i=>{var l,r;const a=null===(l=n.value)||void 0===l?void 0:l.multipleLang[i];return(0,P.jsxs)("div",{children:[zi[i]||i,"：",(0,P.jsxs)(xi.L,{value:null!=e&&null!==(r=e.user)&&void 0!==r&&r.vipActivated?e.systemTTSAccent[i]:i,onChange:n=>{var l;null!=e&&null!==(l=e.user)&&void 0!==l&&l.vipActivated?t((e=>{const t=n.target.value;t?e.systemTTSAccent[i]=t:delete e.systemTTSAccent[i]})):s(!0)},children:[(0,P.jsx)("option",{value:"",children:"自动"}),a.map((e=>(0,P.jsx)("option",{value:e,children:Oi[e]||e},e)))]})]},i)}))}),(0,P.jsx)(S.c,{className:"inline-form-group-label",label:(0,P.jsxs)(P.Fragment,{children:["选择系统语音",Ts]}),helperText:Object.keys(n.value.voicesGroup).length?"你的浏览器对以上语言支持多个系统语音，你可以选择一个你喜欢的系统语音用来朗读这些语言。":"你的浏览器没有提供多个系统语音，因此无法选择。",children:Object.keys(n.value.voicesGroup).map((i=>{var l;const r=n.value.voicesGroup[i];return(0,P.jsxs)("div",{children:[Oi[i]||i,"：",(0,P.jsxs)(xi.L,{value:null!=e&&null!==(l=e.user)&&void 0!==l&&l.vipActivated?e.systemTTSVoice[i]:i,onChange:n=>{var l;null!=e&&null!==(l=e.user)&&void 0!==l&&l.vipActivated?t((e=>{const t=n.target.value;t?e.systemTTSVoice[i]=t:delete e.systemTTSVoice[i]})):s(!0)},children:[(0,P.jsx)("option",{value:"",children:"自动"}),r.map((e=>(0,P.jsx)("option",{value:e.name,children:e.name+(e.localService?" - 本地语音":" - 网络语音")},e.name)))]})]},i)}))}),(0,P.jsx)(be.J,{interactionKind:"click",content:(0,P.jsx)("div",{style:{padding:10,maxHeight:400,overflowY:"auto",overscrollBehavior:"contain"},children:(0,P.jsxs)(jt.v,{bordered:!0,compact:!0,striped:!0,children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"语言"}),(0,P.jsx)("th",{children:"系统语音名称"}),(0,P.jsx)("th",{children:"类型"})]})}),(0,P.jsx)("tbody",{children:n.value.singleList.map((e=>{var t;const s=null===(t=n.value)||void 0===t?void 0:t.singleVoiceMap[e];return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:Oi[e]||e}),(0,P.jsx)("td",{children:null==s?void 0:s.name}),(0,P.jsx)("td",{children:null!=s&&s.localService?"本地语音":"网络语音"})]},e)}))})]})}),children:(0,P.jsx)("a",{children:"查看你的浏览器和操作系统支持的其它语音"})})]})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{id:"音量和语速",children:"音量和语速"}),(0,P.jsx)(S.c,{label:"音量",children:(0,P.jsx)(Ai.i,{min:0,max:100,stepSize:1,labelStepSize:20,value:e.audioVolume,onChange:e=>{t({audioVolume:e})}})}),(0,P.jsx)(S.c,{label:"语速",children:(0,P.jsx)(Ai.i,{min:0,max:8,stepSize:.01,labelStepSize:1,value:e.audioRate,onChange:e=>{t({audioRate:e})}})})]})]}):null}const Vi=(0,E.Z)(N.qI,["notifySyncOptions"]);function Bi(){const{hasNotifications:e,requestNotifications:t}={hasNotifications:Ze(Ne),requestNotifications:(0,c.useCallback)((()=>f().permissions.request(Ne)),[])},[n,s]=(0,D.Z)(Vi);return(0,P.jsx)("div",{style:{margin:15},children:(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{id:"通知",children:"通知"}),!e&&(0,P.jsxs)(Me.U,{icon:"info-sign",title:"划词翻译需要获得你的授权才能显示桌面通知",children:[(0,P.jsx)("p",{children:"如果你希望划词翻译给你发送这些桌面通知，请先授权。"}),(0,P.jsx)(k.z,{intent:"primary",onClick:t,text:"允许划词翻译显示通知"})]}),(0,P.jsx)(S.c,{inline:!0,children:(0,P.jsx)(ht.XZ,{label:"在后台同步设置之后显示通知",checked:n?n.notifySyncOptions:Vi.notifySyncOptions,onChange:e=>{s({notifySyncOptions:e.target.checked})},disabled:!e})})]})})}var Mi=n(7906);const $i=[{label:"显示弹出页面",value:"show-popup"},{label:"开启网页全文翻译",value:"open-webpage-trs"}],Hi=(0,E.Z)(N.qI,["popupAction"]);function qi(){const[e,t]=(0,D.Z)(Hi);return(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"扩展按钮"}),(0,P.jsx)(S.c,{label:"点击扩展按钮时",inline:!0,children:(0,P.jsx)(ee.E,{inline:!0,options:$i,selectedValue:e?e.popupAction:Hi.popupAction,onChange:e=>{t({popupAction:e.currentTarget.value})}})})]})}const Wi=(0,E.Z)(N.qI,["customAPI","customAPINames"]);function Gi(){const[e,t]=(0,D.Z)(Wi),[n,s]=(0,c.useState)(!1);return(0,P.jsxs)("div",{style:{margin:15},children:[(0,P.jsx)(qi,{}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{id:"自定义翻译源",children:"自定义翻译源"}),(0,P.jsx)(S.c,{label:"接口地址",helperText:(0,P.jsxs)(P.Fragment,{children:["划词翻译会从这个接口地址获取自定义翻译源的翻译结果。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/services/custom-api",target:"_blank",rel:"noreferrer",children:"查看示例"})]}),children:(0,P.jsx)(w.B,{value:e?e.customAPI:Wi.customAPI,onChange:e=>{t({customAPI:e.target.value})}})}),(0,P.jsx)(S.c,{label:"翻译源名称",helperText:"按下回车键添加翻译源名称，可输入多个。翻译面板会显示这些翻译源的翻译结果，另外，翻译源也会显示在网页全文翻译的选项中。",children:(0,P.jsx)(Mi.E,{values:e?e.customAPINames:Wi.customAPINames,onChange:e=>{t({customAPINames:e})}})}),(0,P.jsx)(k.z,{loading:n,onClick:()=>{const t=null==e?void 0:e.customAPINames[0];t?(s(!0),f().runtime.sendMessage({action:"translate",data:{apiCode:t,text:"划词翻译自定义翻译源测试"}}).then((e=>{s(!1),e.error?window.alert("接口报错了。错误消息：\n"+JSON.stringify(e.error,null,2)):window.alert("调用成功，返回的数据为：\n"+JSON.stringify(e,null,2))}),(e=>{s(!1),window.alert("接口报错了。错误消息："+(null==e?void 0:e.message))}))):window.alert("请至少添加一个翻译源名称")},children:"测试"})]})]})}const Yi=(0,E.Z)(N.qI,["googleType","googleRegion","googleMirror","googleHidePhonetic"]);function Ji(){const[e,t]=(0,D.Z)(Yi);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(S.c,{inline:!0,label:"镜像地址",children:(0,P.jsx)(w.B,{style:{width:500},placeholder:"默认使用官方地址 https://translate.googleapis.com",value:e?e.googleMirror:Yi.googleMirror,onChange:e=>{t({googleMirror:e.currentTarget.value.trim()})}})}),(0,P.jsx)(S.c,{inline:!0,style:{marginBottom:0},label:(0,P.jsxs)(P.Fragment,{children:["接口类型"," ",(0,P.jsx)(Le,{inline:!0,children:(0,P.jsxs)(pe.UL,{children:[(0,P.jsxs)("li",{children:["速度快、准确率低：0.1 ~ 0.8 秒就有翻译结果，但是跟",(0,P.jsx)("a",{href:"https://translate.google.cn",target:"_blank",rel:"noreferrer noopener",children:"谷歌翻译网站"}),"的翻译结果可能不一样，特别是专业领域的翻译"]}),(0,P.jsxs)("li",{children:["速度慢、准确率高：0.8 ~ 1.2 秒才有翻译结果，但是跟",(0,P.jsx)("a",{href:"https://translate.google.cn",target:"_blank",rel:"noreferrer noopener",children:"谷歌翻译网站"}),"的翻译结果一样"]})]})})]}),children:(0,P.jsxs)(ee.E,{inline:!0,selectedValue:e?e.googleType:Yi.googleType,onChange:e=>{t({googleType:e.currentTarget.value})},children:[(0,P.jsx)(ht.Y8,{label:"速度快、准确率低",value:"fast"}),(0,P.jsx)(ht.Y8,{label:"速度慢、准确率高",value:"accuracy"})]})}),(0,P.jsx)(S.c,{label:"地区",inline:!0,helperText:(0,P.jsxs)(P.Fragment,{children:["谷歌翻译已退出中国市场，无法再选择“国内（.cn）”。",(0,P.jsx)("a",{href:"https://hcfy.app/blog/2022/09/28/ggg",target:"_blank",rel:"noreferrer",children:"查看详情"})]}),children:(0,P.jsxs)(ee.E,{inline:!0,selectedValue:e?e.googleRegion:Yi.googleRegion,onChange:e=>{t({googleRegion:e.currentTarget.value})},children:[(0,P.jsx)(ht.Y8,{label:"国内（.cn）",disabled:!0,value:"cn"}),(0,P.jsx)(ht.Y8,{label:"国外（.com）",value:"com"})]})}),(0,P.jsx)(S.c,{inline:!0,children:(0,P.jsx)(ht.XZ,{label:"隐藏音标",checked:e?e.googleHidePhonetic:Yi.googleHidePhonetic,onChange:e=>{t({googleHidePhonetic:e.currentTarget.checked})}})})]})}const Xi=[{label:"电子科技",value:N.gz.electronics},{label:"金融财经",value:N.gz.finance},{label:"水利机械",value:N.gz.mechanics},{label:"生物医药",value:N.gz.medicine},{label:"网络文学",value:N.gz.novel}],Qi=(0,P.jsx)(P.Fragment,{children:Xi.map((e=>(0,P.jsx)("option",{value:e.value,children:e.label},e.value)))}),el=[N.gz.electronics,N.gz.mechanics,N.gz.novel];function tl(e){return(0,P.jsxs)(xi.L,{value:e.value||"",onChange:t=>{e.onChange(t.currentTarget.value||null)},children:[(0,P.jsx)("option",{value:"",children:"请选择"}),Qi]})}const nl=[{label:"电商 - 商品标题",value:N.jd.title},{label:"电商 - 商品描述",value:N.jd.description},{label:"电商 - 买卖家沟通",value:N.jd.communication},{label:"医疗",value:N.jd.medical},{label:"社交",value:N.jd.social},{label:"金融",value:N.jd.finance}],sl=(0,P.jsx)(P.Fragment,{children:nl.map((e=>(0,P.jsx)("option",{value:e.value,children:e.label},e.value)))});function il(e){return(0,P.jsxs)(xi.L,{value:e.value||"",onChange:t=>{e.onChange(t.currentTarget.value||null)},children:[(0,P.jsx)("option",{value:"",children:"请选择"}),sl]})}const ll=(0,E.Z)(N.qI,["aliDomain","baiduDomain","chatGPTPrompt","chatGPTEndpoint","chatGPTModel"]);function rl(){const[e,t]=(0,D.Z)(ll);return(0,P.jsxs)("div",{style:{margin:15},children:[(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"谷歌翻译"}),(0,P.jsx)(Ji,{})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"ChatGPT"}),(0,P.jsx)(S.c,{label:"翻译命令",helperText:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("code",{children:["{{","text","}}"]})," ","会被替换为你划选 / 输入的文本。",(0,P.jsx)("b",{children:"此参数必须要包含进翻译命令中"}),(0,P.jsx)("br",{}),(0,P.jsxs)("code",{children:["{{","target","}}"]})," ","会被替换为目标语种，例如”中文(简体)”"]}),children:(0,P.jsx)(en.K,{fill:!0,placeholder:"将下面的文本翻译为{{target}}：\n{{text}}",value:e?e.chatGPTPrompt:ll.chatGPTPrompt,onChange:e=>{t({chatGPTPrompt:e.target.value})}})}),(0,P.jsx)(S.c,{label:"镜像地址",inline:!0,helperText:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("span",{style:{color:"red"},children:"注意："}),"你的 ChatGPT Secret Key 将发送给你填写的镜像地址，请一定要确保此镜像地址是绝对可信的！如果你不清楚自己在做什么，请不要修改此选项！"]}),children:(0,P.jsx)(w.B,{placeholder:"默认使用官方地址 https://api.openai.com",value:e?e.chatGPTEndpoint:ll.chatGPTEndpoint,onChange:e=>{t({chatGPTEndpoint:e.target.value.trim()})}})}),(0,P.jsx)(S.c,{label:"模型",inline:!0,helperText:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{style:{marginBottom:4},children:["常用模型：",(0,P.jsx)("a",{onClick:()=>{t({chatGPTModel:"gpt-3.5-turbo"})},children:"gpt-3.5-turbo"}),"、",(0,P.jsx)("a",{onClick:()=>{t({chatGPTModel:"gpt-3.5-turbo-16k"})},children:"gpt-3.5-turbo-16k"}),"、",(0,P.jsx)("a",{onClick:()=>{t({chatGPTModel:"gpt-4"})},children:"gpt-4"}),"、",(0,P.jsx)("a",{onClick:()=>{t({chatGPTModel:"gpt-4-32k"})},children:"gpt-4-32k"})]}),(0,P.jsxs)("div",{children:["划词翻译使用的 API Endpoint 是 ",(0,P.jsx)(pe.EK,{children:"/v1/chat/completions"}),"，你可以在",(0,P.jsx)("a",{href:"https://platform.openai.com/docs/models/model-endpoint-compatibility",target:"_blank",rel:"noreferrer",children:"这里"}),"找到它支持的所有模型。"]})]}),children:(0,P.jsx)(w.B,{value:e?e.chatGPTModel:ll.chatGPTModel,onChange:e=>{t({chatGPTModel:e.target.value})}})}),(0,P.jsx)(S.c,{label:"Secret Key",helperText:(0,P.jsxs)(P.Fragment,{children:["请前往",(0,P.jsx)("a",{href:(0,o.oQ)("/services"),children:"服务申请"}),"找到 ChatGPT，然后点击【管理密钥】按钮填写 ChatGPT 的 Secret Key。"]})})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"百度翻译（专业版）"}),(0,P.jsx)(S.c,{label:"专业领域",inline:!0,helperText:(null==e?void 0:e.baiduDomain)&&el.includes(e.baiduDomain)&&"百度翻译（专业版）的电子科技、水利机械、网络文学三个领域仅支持从中文翻译为英文，如果将英文翻译为中文，会默认显示普通的百度翻译结果。",children:(0,P.jsx)(tl,{value:null==e?void 0:e.baiduDomain,onChange:e=>{t({baiduDomain:e})}})})]}),(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"阿里翻译（专业版）"}),(0,P.jsx)(S.c,{label:"专业领域",inline:!0,children:(0,P.jsx)(il,{value:null==e?void 0:e.aliDomain,onChange:e=>{t({aliDomain:e})}})})]})]})}const al=(0,E.Z)(N.qI,["panelPos","panelFocus"]);function cl(){const[e,t]=(0,D.Z)(al);return(0,P.jsxs)("div",{style:{margin:15},children:[(0,P.jsxs)(Me.U,{title:"关于独立翻译窗口",style:{marginBottom:15},children:["独立翻译窗口是独立于浏览器而存在的一个翻译面板，它的主要作用是配合全局快捷键翻译浏览器外的内容。",(0,P.jsx)("a",{href:"https://hcfy.app/docs/guides/extra",target:"_blank",rel:"noreferrer noopener",children:"查看独立翻译窗口介绍"})]}),e&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(pe.H4,{children:"位置和宽高"}),(0,P.jsxs)(S.c,{helperText:"每当你对独立窗口进行调整后都会自动保存位置和宽高。",children:[(0,P.jsxs)("p",{children:["上边距：",e.panelPos.top,"px 左边距：",e.panelPos.left,"px",(0,P.jsx)("br",{}),"宽度：",e.panelPos.width,"px 高度：",e.panelPos.height,"px"]}),(0,P.jsx)(k.z,{onClick:()=>{t({panelPos:al.panelPos}),f().runtime.sendMessage({action:"update panel pos"})},children:"重置位置与大小"})]})]}),(0,P.jsx)(x.Z,{children:(0,P.jsx)(S.c,{children:(0,P.jsx)(ht.XZ,{labelElement:(0,P.jsxs)(P.Fragment,{children:["不要获取焦点"," ",(0,P.jsxs)(Le,{children:["勾选此选项后，若独立翻译窗口已经存在，那么使用“打开独立翻译窗口”的快捷键时它将不会获取到焦点。焦点将始终处于你正在使用的软件中，不需要你额外点击一下。",(0,P.jsx)("b",{children:"注意：这会导致独立翻译窗口无法出现在屏幕最前方，"}),"你需要确保独立翻译窗口不被其它窗口遮挡，或者",(0,P.jsx)("a",{href:"https://hcfy.app/docs/guides/extra#always-on-top",target:"_blank",rel:"noreferrer",children:"使用第三方软件将独立翻译窗口置顶"}),"。"]})]}),checked:!(e?e.panelFocus:al.panelFocus),onChange:e=>{t({panelFocus:!e.currentTarget.checked})}})})})]})]})}const ol=document.getElementById("app");if(!ol)throw new Error("DOM 里没有 #app 元素。");(0,s.s)(ol).render((0,P.jsx)(et.UT,{children:(0,P.jsx)(li,{children:(0,P.jsx)(o.Z5,{children:(0,P.jsxs)(o.AW,{path:"/",element:(0,P.jsx)(Qe,{}),children:[(0,P.jsx)(o.AW,{index:!0,element:(0,P.jsx)(o.Fg,{to:"/shortcut"})}),(0,P.jsx)(o.AW,{path:"shortcut",element:(0,P.jsx)(ui,{})}),(0,P.jsx)(o.AW,{path:"appearance",element:(0,P.jsx)(Ri,{})}),(0,P.jsx)(o.AW,{path:"audio",element:(0,P.jsx)(Ui,{})}),(0,P.jsx)(o.AW,{path:"notifications",element:(0,P.jsx)(Bi,{})}),(0,P.jsx)(o.AW,{path:"services-options",element:(0,P.jsx)(rl,{})}),(0,P.jsx)(o.AW,{path:"other",element:(0,P.jsx)(Gi,{})}),(0,P.jsx)(o.AW,{path:"user",element:(0,P.jsx)(dt,{})}),(0,P.jsx)(o.AW,{path:"cross",element:(0,P.jsx)(Dt,{})}),(0,P.jsx)(o.AW,{path:"fulltext",element:(0,P.jsx)(Ut,{})}),(0,P.jsx)(o.AW,{path:"pdf",element:(0,P.jsx)(Ht,{})}),(0,P.jsx)(o.AW,{path:"services",element:(0,P.jsx)(Dn,{})}),(0,P.jsx)(o.AW,{path:"history",element:(0,P.jsx)(ii,{})}),(0,P.jsx)(o.AW,{path:"stars",element:(0,P.jsx)(ys,{})}),(0,P.jsx)(o.AW,{path:"about",element:(0,P.jsx)(bs,{})}),(0,P.jsx)(o.AW,{path:"panel",element:(0,P.jsx)(Hs,{})}),(0,P.jsx)(o.AW,{path:"standalone",element:(0,P.jsx)(cl,{})})]})})})}))},32728:(e,t,n)=>{n.d(t,{I:()=>s,n:()=>i});const s=[{value:"translate",label:"翻译这段文本"},{value:"open-link-in-viewer",label:"在划词翻译中打开此 PDF"},{value:"screen-translate",label:"截图翻译"},{value:"page-translate",label:"网页全文翻译"},{value:"video-translate",label:"音视频翻译"}],i=s.map((e=>e.value))},40448:(e,t,n)=>{n.d(t,{m:()=>l});n(85371),n(71372);var s=n(21591),i=n(48194);class l extends Error{constructor(e,t){super(e),null!==(null==t?void 0:t.type)&&(this.type=(null==t?void 0:t.type)||s.c.OTHER),this.link=null==t?void 0:t.link,this.context=null==t?void 0:t.context,this.errors=null==t?void 0:t.errors,this.noRetry=null==t?void 0:t.noRetry}toJSON(){var e;return{type:this.type,message:this.message,link:this.link,errors:null===(e=this.errors)||void 0===e?void 0:e.map((e=>(0,i.R)(e).toJSON()))}}clone(){return new l(this.message,{context:this.context,type:this.type,link:this.link,errors:this.errors,noRetry:this.noRetry})}}},69548:(e,t,n)=>{n.d(t,{D:()=>i});n(71372);var s=n(40448);function i(e){return e instanceof s.m?e:e instanceof Error?new s.m(e.message,{type:null}):new s.m("划词翻译内部出现了一个预期之外的错误，如果你看到了这条消息，请反馈给我。",{type:null})}},48194:(e,t,n)=>{n.d(t,{R:()=>c});n(15735),n(6886),n(14121),n(60523),n(43673),n(40753),n(28399),n(39529);var s=n(1327),i=n(40448),l=n(21591),r=n(69548);const a={401:"登录状态已失效，请重新登录。"};function c(e){if(s.Z.isAxiosError(e)){const t=function(e={}){var t;const{url:n,baseURL:s}=e;let i;try{i=new URL(n||"",s)}catch(e){return"远程服务器"}const{host:l}=i;return null!==(t="https://hs-api.limingkai.cn/")&&t.includes(l)?"划词翻译服务器":"远程服务器"}(e.config),n="划词翻译服务器"===t;if(e.response){const s=e.response.status;return new i.m(n?a[s]||`划词翻译服务器内部产生了一个错误，请稍后重试。HTTP 响应码：${s}。`:`${t}返回了错误的 HTTP 响应码：${s}。`,{type:l.c.API_SERVER_ERROR})}return e.request?new i.m(`${t}没有响应。`,{type:l.c.NETWORK_ERROR,link:{name:"查看解决方案",url:"划词翻译服务器"===t?"https://hcfy.app/docs/faqs/server-no-response":"https://hcfy.app/docs/faqs/why-services-always-loading"}}):new i.m(`向${t}发起请求时发生了一个错误：“${e.message}”`,{type:null})}return(0,r.D)(e)}},93784:(e,t,n)=>{n(43108),n(15735),n(6886)},99687:(e,t,n)=>{n.d(t,{HQ:()=>r,Su:()=>l,Xi:()=>o,Yx:()=>s,kw:()=>c,l:()=>i,pZ:()=>a});const s="",i=".__hcfy-result-comparison__ {\n  outline: 1px dotted;\n}\n\n.__hcfy-result-editing__ {\n  outline: 2px solid #2d72d2;\n  border-radius: 2px;\n}\n\nhcfy-result-content:focus {\n  outline: none;\n}",l=".__hcfy-result-comparison__ {\n  outline: 1px dotted var(--hcfy-result-main-color, #008B45);\n}\n\n.__hcfy-result-comparison__ hcfy-result-content {\n  color: var(--hcfy-result-text-color, unset);\n  font-size: var(--hcfy-result-text-size, unset);\n  font-weight: var(--hcfy-result-text-weight, unset);\n}\n\n.__hcfy-result-editing__ {\n  outline: 2px solid #2d72d2;\n  border-radius: 2px;\n}\n\nhcfy-result-content:focus {\n  outline: none;\n}\n\n.__hcfy-result-comparison-inline__ {\n  margin-left: 0.4em;\n}",r=".__hcfy-result-comparison__ hcfy-result-content {\n  text-decoration: var(--hcfy-result-main-color, #008B45) wavy underline;\n  text-underline-offset: 0.2em;\n  color: var(--hcfy-result-text-color, unset);\n  font-size: var(--hcfy-result-text-size, unset);\n  font-weight: var(--hcfy-result-text-weight, unset);\n}\n\n.__hcfy-result-editing__ hcfy-result-content {\n  text-decoration: none;\n}\n\n.__hcfy-result-editing__ {\n  outline: 2px solid #2d72d2;\n  border-radius: 2px;\n}\n\nhcfy-result-content:focus {\n  outline: none;\n}\n\n.__hcfy-result-comparison-inline__ hcfy-result-content {\n  margin-left: 0.4em;\n}",a=".__hcfy-result-comparison__ hcfy-result-content {\n  text-decoration: var(--hcfy-result-main-color, #008B45) underline;\n  text-underline-offset: 0.2em;\n  color: var(--hcfy-result-text-color, unset);\n  font-size: var(--hcfy-result-text-size, unset);\n  font-weight: var(--hcfy-result-text-weight, unset);\n}\n\n.__hcfy-result-editing__ hcfy-result-content {\n  text-decoration: none;\n}\n\n.__hcfy-result-editing__ {\n  outline: 2px solid #2d72d2;\n  border-radius: 2px;\n}\n\nhcfy-result-content:focus {\n  outline: none;\n}\n\n.__hcfy-result-comparison-inline__ hcfy-result-content {\n  margin-left: 0.4em;\n}",c=".__hcfy-result-comparison__ hcfy-result-content {\n  background-color: var(--hcfy-result-main-color, #008B45);\n  color: var(--hcfy-result-text-color, white);\n  font-size: var(--hcfy-result-text-size, unset);\n  font-weight: var(--hcfy-result-text-weight, unset);\n}\n\n.__hcfy-result-editing__ hcfy-result-content {\n  background: unset;\n  color: unset;\n}\n\n.__hcfy-result-editing__ {\n  outline: 2px solid #2d72d2;\n  border-radius: 2px;\n}\n\nhcfy-result-content:focus {\n  outline: none;\n}\n\n.__hcfy-result-comparison-inline__ hcfy-result-content {\n  margin-left: 0.4em;\n}",o=".__hcfy-result-comparison__ {\n  border-left: 3px solid var(--hcfy-result-main-color, #008B45);\n  padding-left: 6px;\n}\n\n.__hcfy-result-comparison__ hcfy-result-content {\n  color: var(--hcfy-result-text-color, unset);\n  font-size: var(--hcfy-result-text-size, unset);\n  font-weight: var(--hcfy-result-text-weight, unset);\n}\n\n.__hcfy-result-comparison-block__ {\n  padding: 6px 0 6px 12px;\n}\n\n.__hcfy-result-comparison-inline__ {\n  margin-left: 0.4em;\n}\n\n.__hcfy-result-editing__ {\n  border-left-color: transparent;\n  outline: 2px solid #2d72d2;\n  border-radius: 2px;\n}\n\nhcfy-result-content:focus {\n  outline: none;\n}"},64643:(e,t,n)=>{n.d(t,{kw:()=>s.kw,Su:()=>s.Su,l:()=>s.l,pZ:()=>s.pZ,Yx:()=>s.Yx,Xi:()=>s.Xi,HQ:()=>s.HQ});n(74584);var s=n(99687)}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,loaded:!1,exports:{}};return l[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=l,e=[],a.O=(t,n,s,i)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,s,i]=e[d],r=!0,c=0;c<n.length;c++)(!1&i||l>=i)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(r=!1,i<l&&(l=i));if(r){e.splice(d--,1);var o=s();void 0!==o&&(t=o)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var i=Object.create(null);a.r(i);var l={};t=t||[null,n({}),n([]),n(n)];for(var r=2&s&&e;"object"==typeof r&&!~t.indexOf(r);r=n(r))Object.getOwnPropertyNames(r).forEach((t=>l[t]=()=>e[t]));return l.default=()=>e,a.d(i,l),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>({104:"blueprint-icons-all-paths",439:"blueprint-icons-all-paths-loader",569:"blueprint-icons-split-paths-by-size-loader"}[e]+".js"),a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},i="browser-extension:",a.l=(e,t,n,l)=>{if(s[e])s[e].push(t);else{var r,c;if(void 0!==n)for(var o=document.getElementsByTagName("script"),d=0;d<o.length;d++){var h=o[d];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==i+n){r=h;break}}r||(c=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",i+n),r.src=e),s[e]=[t];var u=(t,n)=>{r.onerror=r.onload=null,clearTimeout(x);var i=s[e];if(delete s[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),t)return t(n)},x=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),c&&document.head.appendChild(r)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.p="",(()=>{var e={961:0};a.f.j=(t,n)=>{var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var i=new Promise(((n,i)=>s=e[t]=[n,i]));n.push(s[2]=i);var l=a.p+a.u(t),r=new Error;a.l(l,(n=>{if(a.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+l+")",r.name="ChunkLoadError",r.type=i,r.request=l,s[1](r)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[l,r,c]=n,o=0;if(l.some((t=>0!==e[t]))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(c)var d=c(a)}for(t&&t(n);o<l.length;o++)i=l[o],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self.webpackChunkbrowser_extension=self.webpackChunkbrowser_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=a.O(void 0,[917,251,692,664,823,140,426,523,508,204],(()=>a(26602)));c=a.O(c)})();