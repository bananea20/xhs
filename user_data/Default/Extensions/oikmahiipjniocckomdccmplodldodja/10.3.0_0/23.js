"use strict";(self.webpackChunkbrowser_extension=self.webpackChunkbrowser_extension||[]).push([[23],{42595:(e,t,s)=>{s.d(t,{$:()=>i});var n=s(91942),o=s(57047),r="undefined"!=typeof document?new o.T(document.documentElement,n.ZOf):{isActive:function(){return!0},start:function(){return!0},stop:function(){return!0}},i={alwaysShowFocus:function(){return r.stop()},isActive:function(){return r.isActive()},onlyShowFocusOnTabs:function(){return r.start()}}},71786:(e,t,s)=>{s.d(t,{pB:()=>i});var n=s(80432),o=s(72481),r=s(99853);const i=[o.Lx,n.Ty];r.of.WebSpeech,o.zr,r.of.TencentRealtime,n.Uz,r.of.WebSpeech,o.Xn,r.of.TencentRealtime,n.PK},87393:(e,t,s)=>{s.d(t,{L:()=>o});s(73439),s(93784);const n={"中文(简体)":"zh",英语:"en",俄语:"ru",西班牙语:"es",法语:"fr",阿拉伯语:"ar",土耳其语:"tr",葡萄牙语:"pt",泰语:"th",印尼语:"id",意大利语:"it",越南语:"vi"};function o(e,t="",s=""){const o=n[s]||"auto",r=n[t]||"zh";return`https://translate.alibaba.com/#hcfy_text=${encodeURIComponent(e)}&hcfy_from=${o}&hcfy_to=${r}`}},55876:(e,t,s)=>{s.d(t,{r:()=>o});s(73439),s(93784);const n={"":"自动识别","中文(简体)":"中文"};function o(e,t="中文",s=""){return`https://fanyi.qq.com/#hcfy_text=${encodeURIComponent(e)}&hcfy_from=${n[s]||s}&hcfy_to=${n[t]||t}`}},17192:(e,t,s)=>{s.d(t,{Q:()=>o});const n=JSON.parse('{"中文(简体)":"zh-CHS","英语":"en","日语":"ja","西班牙语":"es","阿拉伯语":"ar","法语":"fr","韩语":"ko","俄语":"ru","德语":"de","葡萄牙语":"pt","意大利语":"it","希腊语":"el","荷兰语":"nl","芬兰语":"fi","丹麦语":"da","越南语":"vi","印地语":"hi","印尼语":"id","马来语":"ms"}');s(93784);function o(e,t="",s=""){const o=n[s],r=n[t];return o&&r?`https://fanyi.youdao.com/#hcfy_text=${encodeURIComponent(e)}&hcfy_from=${o}&hcfy_to=${r}`:`http://fanyi.youdao.com/#hcfy_text=${encodeURIComponent(e)}`}},18578:(e,t,s)=>{s.d(t,{Z:()=>_});s(15735),s(6886),s(73439),s(77950),s(85940),s(39529),s(36728);var n=s(50251),o=s.n(n),r=s(2784),i=s(41752),l=s(24400),a=s(12776),c=s(91942),u=s(8560),d=s(4953),p=s(15454),m=s(39421),h=s(39279),f=s(26777),x=s(22168),y=s(82228),g=s(18435),v=s(60279),C=s(51035),b=s(25456),j=s(64526),k=s(4307),I=s(61974),R=s(67067),S=s(76539),N=s(73827),T=s(42165),w=s(86388),z=s(10586),E=s(66012),P=s(18625),U=s(47909),A=s(52322);const L=(0,f.Z)(v.qI,"secondDestinationLatestSource","selectedAPIs","collapsedAPIs","selectedExternalLinks","source","destination","autoPlay","autoCopy","recentUseLangFrom","recentUseLangTo","sourceTransformNCaml","sourceTransformNoBr","sourceTransformNoComment","sourceTransformRegExps","tipPanelSettingsClosed","historyEnabled","favoritesEnabled","quickLinks","tipQuickLinksClosed","panelCustomStyle","customAPINames","panelSize","panelButtons","textAreaAuto"),O=(0,f.Z)(v.d6,["user","noticesUnreadNum"]),Z={small:14,middle:18,large:22},_=(0,r.forwardRef)((function(e,t){const{toaster:s,headerLeft:n,headerRight:v,extendOptions:_,showTextArea:B=!1,size:$="small",style:q,hasDragTip:M,portalContainer:D,showOptionsTip:F=!0,onTranslate:H,elementRef:J}=e,[K,Q,W]=(0,g.Z)(L),[X]=(0,g.Z)(O),G=(null==X?void 0:X.user)||null,V=(0,r.useMemo)((()=>{const e=null==K?void 0:K.selectedAPIs,t=null==K?void 0:K.customAPINames;if(e&&t)return[...e,...t]}),[null==K?void 0:K.customAPINames,null==K?void 0:K.selectedAPIs]),Y=(0,r.useMemo)((()=>{const e=null==K?void 0:K.collapsedAPIs;return e&&e.length?(0,R.Uy)(V,(t=>{t&&e.forEach((e=>{const s=t.indexOf(e);s>=0&&t.splice(s,1)}))})):V}),[V,null==K?void 0:K.collapsedAPIs]),ee=(null==K?void 0:K.quickLinks.filter((e=>e.panel)))||[],te=K||L,se=Z[$],ne="small"===$,oe="large"===$,re=(null==K?void 0:K.source)||"",ie=(0,r.useCallback)((e=>{Q({source:e})}),[Q]),[le,ae]=(0,r.useState)(""),[ce,ue]=(0,r.useState)(""),de=le===ce,pe=(0,r.useRef)(null),[me,he]=(0,r.useState)(!1),{results:fe,queryResult:xe,dispatchResults:ye}=(0,k.n)(ce,Y,re,null==K?void 0:K.destination,H),[ge,ve]=(0,r.useState)([]),[,Ce]=(0,b.Z)(),{isInFavorites:be,saveOrDelete:je}=(0,I.Z)(ce,ye,Y),ke=(0,w._)(s),{sourceTransformNCaml:Ie,sourceTransformNoBr:Re,sourceTransformNoComment:Se,sourceTransformRegExps:Ne}=null!=G&&G.vipActivated?(0,f.Z)(K||L,["sourceTransformNCaml","sourceTransformNoBr","sourceTransformNoComment","sourceTransformRegExps"]):{sourceTransformNCaml:!1,sourceTransformNoBr:!1,sourceTransformNoComment:!1,sourceTransformRegExps:[]},Te=(0,r.useRef)(""),we=(0,r.useCallback)((e=>{if(e===Te.current)return;Te.current=e,ve((e=>(0,R.Uy)(e,(e=>{e.splice(0)}))));const t=(0,U.L)(e,{sourceTransformNCaml:Ie,sourceTransformNoBr:Re,sourceTransformNoComment:Se,sourceTransformRegExps:Ne});ae(t),ue(t)}),[Ie,Re,Se,Ne]),ze=(0,r.useRef)(we);ze.current=we;const Ee=(0,S.Z)(ce);(0,r.useEffect)((()=>{te.historyEnabled&&Ee!==ce&&ce&&Ce({type:"save translate record",text:ce})}),[Ce,ce,te.historyEnabled]),(0,r.useEffect)((()=>{te.secondDestinationLatestSource&&Ee!==ce&&ce&&(0,P.e)(ce).then((e=>{null!=e&&"中文(简体)"!==e&&o().storage.local.set({latestSource:e})}))}),[ce,te.secondDestinationLatestSource]),(0,r.useImperativeHandle)(t,(()=>({select(){var e;null===(e=pe.current)||void 0===e||e.select()},async play(){var e;if(!V)return;const t=V[0],s=null===(e=fe.results[t])||void 0===e?void 0:e.result;var n;return t&&(null==s?void 0:s.text)===Te.current?(0,h.h)({apiId:t,source:s.from,text:s.text,ttsURI:(null===(n=s.phonetic)||void 0===n?void 0:n[0].ttsURI)||s.ttsURI}):void 0},async setText(e){if(await W,"text"===e.type)ae(e.text);else if("image"===e.type)return ke(e.dataURI).then((e=>{ae(e)}))},async translate(e,t){if(await W,"text"===e.type)ze.current(e.text),t&&this.select();else if("image"===e.type)return ke(e.dataURI).then((e=>{ze.current(e),t&&this.select()}))}})),[ke,W,fe.results,V]);const Pe=(0,r.useMemo)((()=>ne?{width:6,height:6,borderRadius:3,right:3,top:1}:oe?{width:10,height:10,borderRadius:5,right:8,top:6}:{width:8,height:8,borderRadius:4,right:5,top:3}),[oe,ne]),Ue=(0,A.jsx)(i.z,{icon:(0,A.jsx)(l.I,{icon:"cog",size:se}),small:ne,large:oe,minimal:!0,active:me,className:"settings",onClick:()=>{he((e=>!e))},title:"快捷设置"});return(0,A.jsxs)(A.Fragment,{children:[(null==K?void 0:K.panelCustomStyle)&&(0,A.jsx)("style",{children:K.panelCustomStyle.replace(/bp3/g,"bp4").replace(/bp4/g,"bp5")}),(0,A.jsxs)("div",{id:"translate-panel",className:"size-"+$,style:q,ref:J,children:[(0,A.jsxs)("div",{className:"fixed",children:[(0,A.jsxs)("div",{className:"header",children:[(0,A.jsxs)("div",{className:"left",children:[n,(null==K?void 0:K.panelButtons.includes("media"))&&(0,A.jsx)(z.j,{isSmall:ne,isLarge:oe,iconSize:se,onSelect:e=>{ke(e).then(we,x.Z)},portalContainer:D}),(null==K?void 0:K.panelButtons.includes("microphone"))&&(0,A.jsx)(E.k,{isSmall:ne,isLarge:oe,iconSize:se,onSelect:we,portalContainer:D}),(null==K?void 0:K.panelButtons.includes("folder-open"))&&(0,A.jsx)(i.z,{small:ne,large:oe,minimal:!0,icon:(0,A.jsx)(l.I,{icon:"folder-open",size:se}),onClick:()=>{o().runtime.sendMessage({action:"open options page",suffix:"#/stars"})},title:"打开收藏夹"}),(null==K?void 0:K.panelButtons.includes("history"))&&(0,A.jsx)(i.z,{small:ne,large:oe,minimal:!0,icon:(0,A.jsx)(l.I,{icon:"history",size:se}),onClick:()=>{o().runtime.sendMessage({action:"open options page",suffix:"#/history"})},title:"打开历史记录"})]}),(0,A.jsx)("div",{className:"drag-block",title:M?"按住不放可以拖动":void 0}),(0,A.jsxs)("div",{className:"right",children:[!!ge.length&&(0,A.jsx)(i.z,{icon:(0,A.jsx)(l.I,{icon:"undo",size:se}),small:ne,large:oe,minimal:!0,title:"返回上一次翻译",onClick:()=>{const e=(0,y.Z)(ge);e&&(ae(e),ue(e)),ve((e=>(0,R.Uy)(e,(e=>{e.pop()}))))}}),!(null==X||!X.noticesUnreadNum)&&(0,A.jsxs)("div",{style:{fontSize:0,position:"relative"},children:[(0,A.jsx)(i.z,{icon:(0,A.jsx)(l.I,{icon:"notifications",size:se}),small:ne,large:oe,minimal:!0,title:`你有 ${X.noticesUnreadNum} 条未读消息`,onClick:()=>{o().runtime.sendMessage({action:"open options page",suffix:"?notices"})}}),(0,A.jsx)("div",{style:{position:"absolute",background:"rgb(243,1,1)",...Pe}})]}),K&&(0,A.jsxs)(A.Fragment,{children:[K.favoritesEnabled&&(0,A.jsx)(i.z,{icon:(0,A.jsx)(l.I,{icon:be?"star":"star-empty",size:se}),disabled:!ce,small:ne,large:oe,minimal:!0,title:be?"从收藏夹中删除":"添加到收藏夹",onClick:je}),K.tipPanelSettingsClosed&&Ue,!K.tipPanelSettingsClosed&&(0,A.jsx)(a.J,{enforceFocus:!1,content:(0,A.jsxs)("div",{className:c.Tio,style:{width:"200px",padding:"5px"},children:["添加 / 隐藏翻译源、语种切换、鼠标悬浮取词开关和显示翻译文本开关在这里。",(0,A.jsx)("a",{onClick:()=>{Q({tipPanelSettingsClosed:!0})},children:"不再提示"})]}),canEscapeKeyClose:!1,isOpen:!K.tipPanelSettingsClosed&&F,portalContainer:D,children:Ue})]}),v]})]}),(0,A.jsx)(u.U,{isOpen:me,keepChildrenMounted:!0,children:(0,A.jsx)(j.Z,{source:re,setSource:ie,options:K,setOptions:Q,user:G,size:$,portalContainer:D,children:_})}),B&&(0,A.jsx)(T.H,{isLarge:oe,isSmall:ne,iconSize:se,value:le,onChange:ae,onTranslate:e=>{we(null==e?le:e)},ref:pe,hideBtn:de||!le,auto:(null==K?void 0:K.textAreaAuto)||!1})]}),(0,A.jsxs)("div",{className:"body",style:de?void 0:{opacity:.7},children:[!ce&&(0,A.jsx)("p",{children:"请输入需要翻译的文本。"}),ce&&K&&(null==V?void 0:V.map(((e,t)=>{const s=fe.results[e];return(0,A.jsx)(h.Z,{portalContainer:D,apiId:e,result:s,size:$,queryResult:t=>{xe(ce,e,t||re)},autoPlay:K.autoPlay&&0===t,autoCopy:!!(null==G?void 0:G.vipActivated)&&K.autoCopy&&0===t,setQuery:e=>{ve((e=>(0,R.Uy)(e,(e=>{e.push(ce)})))),ue(e),ae(e)},collapse:K.collapsedAPIs.includes(e),onCollapseChange:()=>{Q((t=>{const s=t.collapsedAPIs.indexOf(e);s>=0?t.collapsedAPIs.splice(s,1):t.collapsedAPIs.push(e)}))}},e)}))),V&&!V.length&&(0,A.jsx)(d.t,{className:"no-api",title:"你隐藏了所有翻译源",description:"请添加一个翻译源来显示翻译结果。",action:(0,A.jsx)(a.J,{portalContainer:D,content:(0,A.jsx)(p.v,{children:(0,A.jsx)(C.Z,{})}),children:(0,A.jsx)(i.z,{icon:"add",small:ne,large:oe,text:"添加翻译源"})})}),!(null==K||!K.selectedExternalLinks.length)&&(0,A.jsx)("div",{className:"external-translators",children:K.selectedExternalLinks.map((e=>{const t=N.F.find((t=>t.id===e));return t?(0,A.jsx)("div",{children:(0,A.jsx)(i.A,{small:ne,large:oe,text:t.name,target:"_blank",href:t.generateLink(ce,K.destination,re)})},e):null}))}),K&&!K.tipQuickLinksClosed&&ce&&(0,A.jsxs)(m.U,{style:{marginBottom:8,fontSize:12},children:["下方是预定义的三个快捷链接，你可以前往",(0,A.jsx)("a",{onClick:()=>{o().runtime.sendMessage({action:"open options page",suffix:"#/panel"})},children:"“设置” - “翻译面板”"})," ","- “快捷链接”中修改或删除它们。",(0,A.jsx)("a",{onClick:()=>{Q({tipQuickLinksClosed:!0})},children:"不再提示"})]}),!!ee.length&&ce&&(0,A.jsx)("div",{className:"quick-links",children:ee.map((e=>(0,A.jsx)("a",{href:e.link.replace("%s",encodeURIComponent(ce)),target:"_blank",rel:"noreferrer",children:e.name},e.name)))})]})]})]})}))},55773:(e,t,s)=>{s.d(t,{oJ:()=>r});s(15735),s(6886),s(39529);var n=s(8721),o=s(25130);s.n(o)()("hotkeys");const r={ctrl:n.eE?"metaKey":"ctrlKey",alt:"altKey",shift:"shiftKey"};n.eE&&n.vU},63627:(e,t,s)=>{s.d(t,{O:()=>h});s(15735),s(6886),s(73439);var n=s(2784),o=s(39421),r=s(83524),i=s(59069),l=s(41752),a=s(26777),c=s(60279),u=s(50251),d=s.n(u),p=s(52322);const m=(0,a.Z)(c.qI,["autoClipboard","autoClipboardImage"]);function h(e){const{onTranslate:t,onDismiss:s}=e,[a,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{d().storage.local.get(m).then((async({autoClipboard:e,autoClipboardImage:s})=>{if(!1===e&&!1===s)return;const n=await d().runtime.sendMessage({action:"read clipboard"});if(n&&("text"!==n.type||n.text.trim()))if("text"===n.type)switch(e){case null:c(n);break;case!0:t(n);break;case"write-only":t(n,!0)}else if("image"===n.type)switch(s){case null:c(n);break;case!0:t(n);break;case"write-only":t(n,!0)}}))}),[t]),a?(0,p.jsxs)(o.U,{intent:"primary",children:[(0,p.jsxs)(r.H5,{children:["是否要翻译剪切板内的",(0,p.jsx)("i",{children:"text"===a.type?"文本":"图片"}),"？"]}),(0,p.jsx)(i.XZ,{label:"记住我的选择，下次不再询问",className:"ask-clipboard-checkbox",checked:u,onChange:e=>{h(e.target.checked)}}),(0,p.jsx)(l.z,{style:{marginRight:15},text:"翻译",onClick:()=>{t(a),u&&d().storage.local.set({["text"===a.type?"autoClipboard":"autoClipboardImage"]:!0}),c(null)}}),(0,p.jsx)(l.z,{text:"不翻译",onClick:()=>{u&&d().storage.local.set({["text"===a.type?"autoClipboard":"autoClipboardImage"]:!1}),c(null),s()}})]}):null}},81139:(e,t,s)=>{s.d(t,{H:()=>o});s(15735),s(6886);var n=s(2784);function o(e){const[t,s]=(0,n.useState)({v:!1,h:!1});return(0,n.useEffect)((()=>{if(!e)return;const t=()=>{s(function(e){return{h:e.scrollWidth>e.clientWidth,v:e.scrollHeight>e.clientHeight}}(e))};t();const n=new ResizeObserver(t);return n.observe(e),()=>{n.unobserve(e)}}),[e]),t}},40448:(e,t,s)=>{s.d(t,{m:()=>r});s(85371),s(71372);var n=s(21591),o=s(48194);class r extends Error{constructor(e,t){super(e),null!==(null==t?void 0:t.type)&&(this.type=(null==t?void 0:t.type)||n.c.OTHER),this.link=null==t?void 0:t.link,this.context=null==t?void 0:t.context,this.errors=null==t?void 0:t.errors,this.noRetry=null==t?void 0:t.noRetry}toJSON(){var e;return{type:this.type,message:this.message,link:this.link,errors:null===(e=this.errors)||void 0===e?void 0:e.map((e=>(0,o.R)(e).toJSON()))}}clone(){return new r(this.message,{context:this.context,type:this.type,link:this.link,errors:this.errors,noRetry:this.noRetry})}}},69548:(e,t,s)=>{s.d(t,{D:()=>o});s(71372);var n=s(40448);function o(e){return e instanceof n.m?e:e instanceof Error?new n.m(e.message,{type:null}):new n.m("划词翻译内部出现了一个预期之外的错误，如果你看到了这条消息，请反馈给我。",{type:null})}},93784:(e,t,s)=>{s(43108),s(15735),s(6886)},25269:(e,t,s)=>{var n=s(23103),o=s(9859),r=s(96616),i=s(7400),l=TypeError,a=Object.defineProperty,c=o.self!==o;try{if(i){var u=Object.getOwnPropertyDescriptor(o,"self");!c&&u&&u.get&&u.enumerable||r(o,"self",{get:function(){return o},set:function(e){if(this!==o)throw new l("Illegal invocation");a(o,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else n({global:!0,simple:!0,forced:c},{self:o})}catch(e){}},92245:(e,t,s)=>{s.d(t,{RN:()=>l,ut:()=>a});s(73439),s(71372),s(15735),s(6886);var n=s(52322),o=s(98140),r=s(2784),i=s(17029);function l(e,t=document.body){const s=document.createElement("div");t.appendChild(s);const r=(0,i.s)(s);return new Promise(((t,s)=>{r.render((0,n.jsx)(o.q,{...e,usePortal:!1,ref:e=>{e?t(e):s(new Error("[Blueprint] Unable to create toaster."))}}))}))}function a(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{e.then((e=>{t.current=e}))}),[e]),t}},41188:(e,t,s)=>{s(77174),s(70031),s(2784)},64643:(e,t,s)=>{s(74584)}}]);