(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{392:function(e,s,i){"use strict";i.d(s,"a",(function(){return t})),i.d(s,"b",(function(){return n}));i(11),i(13);class t{constructor(){this._caches={},this._setCaches=e=>(...s)=>{this._caches[e]=s}}}const o=[],n=e=>new Proxy(e,{set:(e,s,i)=>null===i?(e[s]=i,!0):"function"==typeof e[s]?(console.warn("失败：重复注册"),!0):(e[s]=i,o.includes(s)&&delete e._caches[s],e._caches.hasOwnProperty(s)&&(e[s](...e._caches[s]),delete e._caches[s]),!0),get:(e,s)=>"function"==typeof e[s]?e[s]:e._setCaches(s)})},468:function(e,s,i){"use strict";i.r(s),i.d(s,"pluginStore",(function(){return l}));i(11),i(13),i(8);var t=i(4),o=i(75),n=i(392);class r extends n.a{opened(e){}}const a=Object(n.b)(new r);var c=function(e,s,i,t){var o,n=arguments.length,r=n<3?s:null===t?t=Object.getOwnPropertyDescriptor(s,i):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,s,i,t);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(s,i,r):o(s,i))||r);return n>3&&r&&Object.defineProperty(s,i,r),r};class p{constructor(){this.pluginsMap={"infinity://weather":"side-weather","infinity://todos":"side-todos","infinity://notes":"side-notes","infinity://history":"side-history","infinity://bookmarks":"side-bookmarks","infinity://extension":"side-extension","infinity://chrome-apps":"chrome-apps","infinity://wallpaper":"wallpaper","infinity://settings":"side-profile",search:"side-search",profile:"side-profile",editIcon:"side-editicon","side-tutorial":"side-tutorial"},this.pluginsTags={"side-weather":!1,"side-todos":!1,"side-notes":!1,"side-history":!1,"side-bookmarks":!1,"side-extension":!1,"chrome-apps":!1,"side-profile":!1,"side-search":!1,"side-editicon":!1,"side-tutorial":!1,wallpaper:!1},this.pluginViews=[],this.focusRepair=!1,Object(t.h)(()=>this.pluginViews.map(e=>e),([e])=>{a.opened(e)})}initDom(e){this.pluginsTags[e]=!0}async show(e){if(this.pluginViews.includes(e))return;const s=this.pluginsMap[e];if(!1===this.pluginsTags[s])try{await this.requestPermission(s),Object(t.i)(()=>{this.pluginsTags[s]=!0,this.pluginViews.push(e)})}catch(e){}else this.pluginViews.push(e)}async showRepair(){this.focusRepair=!0,this.show("profile"),localStorage.setItem("user-checkout-old-data","true")}async showRepairBadVersion(){this.focusRepair=!0,this.show("profile")}blurRepair(){this.focusRepair=!1}requestPermission(e){switch(e){case"side-bookmarks":return o.a.request(["bookmarks"],["chrome://favicon/"]);case"side-extension":case"chrome-apps":return o.a.request(["management"]);case"side-history":return o.a.request(["history"],["chrome://favicon/"])}}hideLast(){const e=this.pluginViews.pop();return 0===this.pluginViews.length&&document.getElementsByTagName("newtab-main")[0].shadowRoot.querySelector(".swiper-content").style.setProperty("transform","none"),e}}c([t.g],p.prototype,"pluginsTags",void 0),c([t.b],p.prototype,"initDom",null),c([t.g],p.prototype,"pluginViews",void 0),c([t.g],p.prototype,"focusRepair",void 0),c([t.b],p.prototype,"show",null),c([t.b],p.prototype,"showRepair",null),c([t.b],p.prototype,"showRepairBadVersion",null),c([t.b],p.prototype,"blurRepair",null),c([t.b],p.prototype,"hideLast",null);const l=new p}}]);