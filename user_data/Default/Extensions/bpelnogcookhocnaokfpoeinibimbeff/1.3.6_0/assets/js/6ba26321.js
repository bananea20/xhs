(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[5242],{52326:function(e){e.exports=function(){"use strict";return function(e,a,t){a.prototype.isToday=function(){var e="YYYY-MM-DD",a=t();return this.format(e)===a.format(e)}}}()},65242:(e,a,t)=>{"use strict";t.r(a),t.d(a,{useFootballStore:()=>f});var i=t(80661),n=t.n(i),s=t(52326),o=t.n(s),l=t(84522),m=t(10435),d=t(74003),r=t(17904),c=t(63477);const h=new c._P("football/competition",36e5);var u=t(96044),g=t(50344);n().extend(o());const p=n()().format("YYYY-MM-DD"),f=(0,m.Q_)(l.BU.football,{syncStorage:{watch:["matchesCache","standingsCache","competitionData"]},state:()=>({modalShow:!1,matchesCache:{},standingsCache:{},competitionData:[],loading:!1,standingsLoading:!1,homeMacthList:u.Q,modalMacthList:[],homeFinished:!1,homeLoading:!1,homePage:1,modalFinished:!1,modalLoading:!1,modalPage:1,selectDate:p,selectLeagueId:"",standingsList:[]}),getters:{standingsData:()=>[]},actions:{setModal(e){this.modalShow=e},filterDateMatches(e){if(0===(0,g.size)(this.matchesCache))return;const a=[];return Object.values(this.matchesCache).forEach((t=>{t.date===e&&a.push(t.data)})),(0,g.flatten)(a)},async getStandingsData(e){const a=this.standingsCache[e];if(a&&Date.now()-a.updateTime<18e6)return a.data;this.standingsLoading=!0;const[t,i]=await(async e=>{try{const a=await r.hj.get(`${d.H}football/standings`,{leagueId:e},{_delay:500});if(0===a.code&&a.data)return[null,a.data];throw a}catch(e){return["catch error"]}})(e);if(t||!i)return void(this.standingsLoading=!1);const n=Object.assign({},this.standingsCache);return n[e]={updateTime:Date.now(),data:i},this.standingsCache=n,this.standingsLoading=!1,i},async getCompetitionData(){this.competitionData.length>0&&(this.selectLeagueId=this.competitionData[0].leagueId,this.reqStandingsData());const[e,a]=await(async()=>{try{if(h.isLocked)return["locked error"];const e=await r.hj.get(`${d.H}football/competition`,{},{_single:!0});if(0===e.code&&e.data)return h.setLock(),[null,e.data];throw e}catch(e){return["catch error"]}})();!e&&a&&(this.selectLeagueId=a[0].leagueId,this.competitionData=a,this.reqStandingsData())},async _getList(e,a){const[t,i]=await(async e=>{try{const a=await r.hj.get(`${d.H}football/list`,e,{_single:!0});return 0===a.code&&a.data?[null,a.data]:[null,[]]}catch(e){return["catch error"]}})({date:e,page:a});return t||!i?[]:i},async reqFootballMatches(e,a){const t=`${e}_MATCHES_${a}`,i=this.matchesCache[t];if(i){if(Date.now()-n()(e).valueOf()>864e5)return i.data;if(Date.now()-i.updateTime<6e5)return i.data}const s=await this._getList(e,a);if(s.length>0){const i=Object.assign({},this.matchesCache);return i[t]={data:s,updateTime:n()().valueOf(),date:e,page:a},this.matchesCache=i,s}return[]},async getHomeMatchesList(){if(this.homeFinished||this.homeLoading)return;this.homeLoading=!0;const e=await this.reqFootballMatches(p,this.homePage);if(0===e.length)return this.homeLoading=!1,void(this.homeFinished=!0);this.homeMacthList.every((e=>0===e.updateTime))?this.homeMacthList=e:this.homeMacthList=[...this.homeMacthList,...e],this.homeFinished=!1,this.homePage=this.homePage+1,this.homeLoading=!1},async getModalMatchesList(){if(this.modalFinished||this.modalLoading)return;this.modalLoading=!0;const e=await this.reqFootballMatches(this.selectDate,this.modalPage);if(0===e.length)return this.modalLoading=!1,void(this.modalFinished=!0);this.modalMacthList=[...this.modalMacthList,...e],this.modalPage=this.modalPage+1,this.modalLoading=!1},resetModalPage(){this.modalMacthList=[],this.modalPage=1,this.modalFinished=!1,this.modalLoading=!1},setModalSelectDate(e){this.selectDate=e},setSelectLeagueId(e){this.selectLeagueId=e},async reqStandingsData(){const e=await this.getStandingsData(this.selectLeagueId);this.standingsList=e},clearStandingsList(){this.standingsList=[]}}})},96044:(e,a,t)=>{"use strict";let i;t.d(a,{G:()=>i,Q:()=>n}),function(e){e[e["未开始"]=0]="未开始",e[e["进行中"]=1]="进行中",e[e["已结束"]=2]="已结束",e[e["延期"]=3]="延期",e[e["中断"]=4]="中断",e[e["取消"]=5]="取消"}(i||(i={}));const n=[{mid:"nm:3908255",leagueId:"nm:542",competitionName:"中超",sid:"nm:11488",season:"2023",stage:"联赛第23轮",stageId:"nm:53555",groupNum:"",roundNum:"23",multiRoundNum:0,homeRank:"3",awayRank:"8",neutral:0,startTime:"2023-08-18 19:35:00",homeId:"nm:10138",homeTeamName:"山东泰山",awayId:"nm:10218",awayTeamName:"天津津门虎",status:2,elapsed:"90+",halfTimeScore:"0:0",fullTimeScore:"1:0",finalScore:"1:0",winId:"nm:10138",yelCards:"4:3",redCards:"0:1",corners:"8:1",level:1,colour:"#e35a20ff",lineup:1,infor:1,cartoon:"https://www.fkkq.net/live/?profile=4y8jeu2l0blilw6&id=3908255",videos:[{name:"点击观看",url:"https://vv.stnye.cc/live/8940",way:4,play:0}],updateTime:0,chat:0,online:0,top:0,redBag:0,screen:[1,2]},{mid:"nm:3908266",leagueId:"nm:542",competitionName:"中超",sid:"nm:11488",season:"2023",stage:"联赛第23轮",stageId:"nm:53555",groupNum:"",roundNum:"23",multiRoundNum:0,homeRank:"1",awayRank:"11",neutral:0,startTime:"2023-08-18 19:35:00",homeId:"nm:19717",homeTeamName:"上海海港",awayId:"nm:23094",awayTeamName:"梅州客家",status:2,elapsed:"90+",halfTimeScore:"0:0",fullTimeScore:"1:1",finalScore:"1:1",yelCards:"2:2",redCards:"0:0",corners:"8:3",level:1,colour:"#e35a20ff",lineup:1,infor:1,cartoon:"https://www.fkkq.net/live/?profile=4y8jeu2l0blilw6&id=3908266",videos:[{name:"点击观看",url:"https://vv.stnye.cc/live/15230",way:4,play:0}],updateTime:0,chat:0,online:0,top:0,redBag:0,screen:[1,2]},{mid:"nm:3908270",leagueId:"nm:542",competitionName:"中超",sid:"nm:11488",season:"2023",stage:"联赛第23轮",stageId:"nm:53555",groupNum:"",roundNum:"23",multiRoundNum:0,homeRank:"5",awayRank:"13",neutral:0,startTime:"2023-08-18 19:35:00",homeId:"nm:10767",homeTeamName:"浙江队",awayId:"nm:10139",awayTeamName:"青岛海牛",status:2,elapsed:"90+",halfTimeScore:"0:0",fullTimeScore:"0:0",finalScore:"0:0",yelCards:"2:2",redCards:"0:0",corners:"2:6",level:1,colour:"#e35a20ff",lineup:1,infor:1,cartoon:"https://www.fkkq.net/live/?profile=4y8jeu2l0blilw6&id=3908270",videos:[{name:"点击观看",url:"https://vv.stnye.cc/live/35250",way:4,play:0}],updateTime:0,chat:0,online:0,top:0,redBag:0,screen:[1,2]},{mid:"nm:3908258",leagueId:"nm:542",competitionName:"中超",sid:"nm:11488",season:"2023",stage:"联赛第23轮",stageId:"nm:53555",groupNum:"",roundNum:"23",multiRoundNum:0,homeRank:"6",awayRank:"3",neutral:0,startTime:"2023-08-19 19:35:00",homeId:"nm:10009",homeTeamName:"北京国安",awayId:"nm:10223",awayTeamName:"上海申花",status:2,elapsed:"90+",halfTimeScore:"2:1",fullTimeScore:"2:1",finalScore:"2:1",winId:"nm:10009",yelCards:"1:3",redCards:"1:0",corners:"6:7",level:1,colour:"#e35a20ff",lineup:1,infor:1,cartoon:"https://www.fkkq.net/live/?profile=4y8jeu2l0blilw6&id=3908258",videos:[{name:"点击观看",url:"https://vv.stnye.cc/live/18650",way:4,play:0},{name:"点击观看1",url:"https://tv.cctv.com/live/cctv5plus/index.shtml",way:2,play:0}],updateTime:0,chat:0,online:0,chatMember:208,top:0,redBag:0,screen:[1,2]},{mid:"nm:3908260",leagueId:"nm:542",competitionName:"中超",sid:"nm:11488",season:"2023",stage:"联赛第23轮",stageId:"nm:53555",groupNum:"",roundNum:"23",multiRoundNum:0,homeRank:"14",awayRank:"12",neutral:0,startTime:"2023-08-19 19:35:00",homeId:"nm:28893",homeTeamName:"大连人",awayId:"nm:10766",awayTeamName:"河南队",status:2,elapsed:"90+",halfTimeScore:"0:3",fullTimeScore:"0:3",finalScore:"0:3",winId:"nm:10766",yelCards:"1:2",redCards:"0:0",corners:"8:4",level:1,colour:"#e35a20ff",lineup:1,infor:1,cartoon:"https://www.fkkq.net/live/?profile=4y8jeu2l0blilw6&id=3908260",videos:[{name:"点击观看",url:"https://vv.stnye.cc/live/19980",way:4,play:0}],updateTime:0,chat:0,online:0,top:0,redBag:0,screen:[1,2]},{mid:"nm:3908262",leagueId:"nm:542",competitionName:"中超",sid:"nm:11488",season:"2023",stage:"联赛第23轮",stageId:"nm:53555",groupNum:"",roundNum:"23",multiRoundNum:0,homeRank:"16",awayRank:"15",neutral:0,startTime:"2023-08-19 19:35:00",homeId:"nm:10186",homeTeamName:"深圳队",awayId:"nm:34313",awayTeamName:"南通支云",status:2,elapsed:"90+",halfTimeScore:"0:0",fullTimeScore:"0:1",finalScore:"0:1",winId:"nm:34313",yelCards:"3:4",redCards:"0:0",corners:"3:7",level:1,colour:"#e35a20ff",lineup:1,infor:1,cartoon:"https://www.fkkq.net/live/?profile=4y8jeu2l0blilw6&id=3908262",videos:[{name:"点击观看",url:"https://vv.stnye.cc/live/35460",way:4,play:0},{name:"点击观看1",url:"https://tv.cctv.com/live/cctv16/",way:2,play:0}],updateTime:0,chat:0,online:0,top:0,redBag:0,screen:[1,2]}]}}]);