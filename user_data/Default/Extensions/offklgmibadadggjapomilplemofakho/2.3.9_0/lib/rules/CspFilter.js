!function(r,p){"use strict";function o(e){return e?e.whiteListRule&&e.isImportant?4:e.isImportant?3:e.whiteListRule?2:1:0}function v(e,t,u){var r=e.cspDirective,i=u[r],n=o(e),l=o(t),s=o(i),c=Math.max(n,l,s);c===n?u[r]=e:c===l?u[r]=t:c===s&&(u[r]=i)}r.CspFilter=function(e){var R=new r.UrlFilterRuleLookupTable,f=new r.UrlFilterRuleLookupTable;function t(e){for(var t=0;t<e.length;t++)u(e[t])}function u(e){e.whiteListRule?R.addRule(e):f.addRule(e)}return e&&t(e),{addRules:t,addRule:u,removeRule:function(e){e.whiteListRule?R.removeRule(e):f.removeRule(e)},getRules:function(){return R.getRules().concat(f.getRules())},findCspRules:function(e,t,u,r){r=r===p.RequestTypes.SUBDOCUMENT?r:p.RequestTypes.OTHER;var i,n,l=R.findRule(e,t,u,r),s=Object.create(null);if(l)for(i=0;i<l.length;i++){if(!(n=l[i]).cspDirective)return[n];v(n,null,s)}var c=f.findRule(e,t,u,r),o=Object.create(null),a=[];if(p.ArrayUtils.isArray(c)){for(i=0;i<c.length;i++){v(n=c[i],s[n.cspDirective],o)}Object.keys(o).forEach(function(e){a.push(o[e])})}else a.push(c);return a}}}}(yiclearAPI,vAPI);