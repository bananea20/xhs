function injectPageScriptAPI(n,r,o,e){"use strict";var a,c,u,l,i=e?window[n]:(a=window.postMessage,c=window.addEventListener,u=0,l={},{sendMessage:function(e,t,n,r){0===u&&c.call(window,"message",p,!1);var o=++u;l[o]={wrapper:n,onResponseReceived:r};var i={requestId:o,direction:"from-page-script@yiclear",elementUrl:e,documentUrl:document.URL,requestType:t};a.call(window,i,"*")}});function p(e){if(e.data&&e.data.direction&&"to-page-script@yiclear"===e.data.direction){var t=l[e.data.requestId];if(t){var n=t.wrapper;t.onResponseReceived(n,e.data.block),delete l[e.data.requestId]}}}var d,s,f=Function.prototype.toString.bind(injectPageScriptAPI);if(window.WeakSet instanceof Function){var t=new WeakSet;d=WeakSet.prototype.add.bind(t),s=WeakSet.prototype.has.bind(t)}else{var w=[];d=function(e){w.indexOf(e)<0&&w.push(e)},s=function(e){return 0<=w.indexOf(e)}}function b(e){try{if(e&&!s(e)){d(e),e[n]=i;var t="'"+n+"', "+r+", "+o+", true";e.eval("("+f()+")("+t+");"),delete e[n]}}catch(e){}}function y(e){var t=Object.getOwnPropertyDescriptor(e.prototype,"contentWindow"),n=Object.getOwnPropertyDescriptor(e.prototype,"contentDocument");if(t){var r=Function.prototype.call.bind(t.get),o=Function.prototype.call.bind(n.get);t.get=function(){var e=r(this);return b(e),e},n.get=function(){return b(r(this)),o(this)},Object.defineProperty(e.prototype,"contentWindow",t),Object.defineProperty(e.prototype,"contentDocument",n)}}for(var v=[HTMLFrameElement,HTMLIFrameElement,HTMLObjectElement],g=0;g<v.length;g++)y(v[g]);function m(e,t,n){for(var r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&Object.defineProperty(t,o,i)}}function C(e,t,n){i.sendMessage(e,t,this,function(e,t){n(t)})}r&&function(){if(window.WebSocket instanceof Function){var r=WebSocket,o=Function.prototype.call.bind(r.prototype.close);i.prototype=r.prototype,window.WebSocket=i.bind(),m(r,WebSocket,["CONNECTING","OPEN","CLOSING","CLOSED","name","prototype"]),r.prototype.constructor=WebSocket}function i(e,t){return this instanceof i?arguments.length<1?new r:(n=t?new r(e,t):new r(e),C(n.url,"WEBSOCKET",function(e){e&&o(n)}),n):r();var n}}(),o&&function(){if(window.RTCPeerConnection instanceof Function||window.webkitRTCPeerConnection instanceof Function){var r=window.RTCPeerConnection||window.webkitRTCPeerConnection,n=Function.prototype.call.bind(r.prototype.close),o=Array,t=String,i=Object.create,a=Object.defineProperty;if(r.prototype.setConfiguration){var c=Function.prototype.call.bind(r.prototype.setConfiguration);r.prototype.setConfiguration=function(e){e=p(e),c(this,e),s(this,e)}}f.prototype=r.prototype;var e=f.bind();m(r,e,["caller","generateCertificate","name","prototype"]),r.prototype.constructor=e,"RTCPeerConnection"in window&&(window.RTCPeerConnection=e),"webkitRTCPeerConnection"in window&&(window.webkitRTCPeerConnection=e)}function u(e){if(void 0!==e)return t(e)}function l(e,t){if(null===e||"object"!=typeof e)return e;for(var n=o(e.length),r=0;r<n.length;r++)a(n,r,{configurable:!1,enumerable:!1,writable:!1,value:t(e[r])});return a(n,"length",{configurable:!1,enumerable:!1,writable:!1,value:n.length}),n}function p(e){if(null===e||"object"!=typeof e)return e;var t=l(e.iceServers,function(e){var t=e.url,n=e.urls;return void 0===n||n instanceof o||(n=[n]),i(e,{url:{configurable:!1,enumerable:!1,writable:!1,value:u(t)},urls:{configurable:!1,enumerable:!1,writable:!1,value:l(n,u)}})});return i(e,{iceServers:{configurable:!1,enumerable:!1,writable:!1,value:t}})}function d(t,e){C(e,"WEBRTC",function(e){if(e)try{n(t)}catch(e){}})}function s(e,t){if(t&&t.iceServers)for(var n=t.iceServers,r=0;r<n.length;r++){var o=n[r];if(o&&(o.url&&d(e,o.url),o.urls))for(var i=0;i<o.urls.length;i++)d(e,o.urls[i])}}function f(e,t){if(!(this instanceof f))return r();e=p(e);var n=new r(e,t);return s(n,e),n}}()}var initPageMessageListener=function(){"use strict";window.addEventListener("message",function(n){if(n.source===window&&n.data.direction&&"from-page-script@yiclear"===n.data.direction&&n.data.elementUrl&&n.data.documentUrl){var e={type:"checkPageScriptWrapperRequest",elementUrl:n.data.elementUrl,documentUrl:n.data.documentUrl,requestType:n.data.requestType,requestId:n.data.requestId};contentPage.sendMessage(e,function(e){if(e){var t={direction:"to-page-script@yiclear",elementUrl:n.data.elementUrl,documentUrl:n.data.documentUrl,requestType:n.data.requestType,requestId:e.requestId,block:e.block};n.source.postMessage(t,n.origin)}})}},!1)};