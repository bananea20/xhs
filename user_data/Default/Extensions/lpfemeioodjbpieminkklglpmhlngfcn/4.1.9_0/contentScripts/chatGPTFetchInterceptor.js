import{b as i}from"../chunks/R2KXBBZI.js";import{f as a}from"../chunks/U3PG3M5Y.js";import{a as r}from"../chunks/USLLVG5P.js";import"../chunks/UTGLRY7A.js";var m=window.fetch,h=async(s,o)=>{let n=a(o);if(s==="https://chat.openai.com/backend-api/conversation"&&o.method==="POST"&&o.headers.accept==="text/event-stream"){let t=n.body;try{let e=JSON.parse(t),c=await i();c&&e.messages.unshift({author:{role:"system"},content:{content_type:"text",parts:[c]},id:r(),metadata:{}}),t=JSON.stringify(e)}catch{}n.body=t}return m(s,n??o).then(function(t){return new Promise(e=>{e(t)})})};window.fetch=h;
